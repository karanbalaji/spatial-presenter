var vy=s=>{throw TypeError(s)};var ap=(s,t,e)=>t.has(s)||vy("Cannot "+e);var Ee=(s,t,e)=>(ap(s,t,"read from private field"),e?e.call(s):t.get(s)),$n=(s,t,e)=>t.has(s)?vy("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),Hi=(s,t,e,n)=>(ap(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),Qn=(s,t,e)=>(ap(s,t,"access private method"),e);var _y=(s,t,e,n)=>({set _(r){Hi(s,t,r,e)},get _(){return Ee(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var Ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var rp={exports:{}},Dl={};var Ay;function rw(){if(Ay)return Dl;Ay=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:s,type:n,key:c,ref:r!==void 0?r:null,props:o}}return Dl.Fragment=t,Dl.jsx=e,Dl.jsxs=e,Dl}var wy;function ow(){return wy||(wy=1,rp.exports=rw()),rp.exports}var bt=ow(),op={exports:{}},It={};var Sy;function lw(){if(Sy)return It;Sy=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function w(M,L,J){this.props=M,this.context=L,this.refs=S,this.updater=J||A}w.prototype.isReactComponent={},w.prototype.setState=function(M,L){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,L,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function x(){}x.prototype=w.prototype;function C(M,L,J){this.props=M,this.context=L,this.refs=S,this.updater=J||A}var R=C.prototype=new x;R.constructor=C,_(R,w.prototype),R.isPureReactComponent=!0;var O=Array.isArray;function B(){}var N={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function j(M,L,J){var it=J.ref;return{$$typeof:s,type:M,key:L,ref:it!==void 0?it:null,props:J}}function Z(M,L){return j(M.type,L,M.props)}function at(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function F(M){var L={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(J){return L[J]})}var $=/\/+/g;function k(M,L){return typeof M=="object"&&M!==null&&M.key!=null?F(""+M.key):L.toString(36)}function tt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(B,B):(M.status="pending",M.then(function(L){M.status==="pending"&&(M.status="fulfilled",M.value=L)},function(L){M.status==="pending"&&(M.status="rejected",M.reason=L)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function U(M,L,J,it,rt){var _t=typeof M;(_t==="undefined"||_t==="boolean")&&(M=null);var At=!1;if(M===null)At=!0;else switch(_t){case"bigint":case"string":case"number":At=!0;break;case"object":switch(M.$$typeof){case s:case t:At=!0;break;case p:return At=M._init,U(At(M._payload),L,J,it,rt)}}if(At)return rt=rt(M),At=it===""?"."+k(M,0):it,O(rt)?(J="",At!=null&&(J=At.replace($,"$&/")+"/"),U(rt,L,J,"",function(ve){return ve})):rt!=null&&(at(rt)&&(rt=Z(rt,J+(rt.key==null||M&&M.key===rt.key?"":(""+rt.key).replace($,"$&/")+"/")+At)),L.push(rt)),1;At=0;var Dt=it===""?".":it+":";if(O(M))for(var xt=0;xt<M.length;xt++)it=M[xt],_t=Dt+k(it,xt),At+=U(it,L,J,_t,rt);else if(xt=v(M),typeof xt=="function")for(M=xt.call(M),xt=0;!(it=M.next()).done;)it=it.value,_t=Dt+k(it,xt++),At+=U(it,L,J,_t,rt);else if(_t==="object"){if(typeof M.then=="function")return U(tt(M),L,J,it,rt);throw L=String(M),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return At}function H(M,L,J){if(M==null)return M;var it=[],rt=0;return U(M,it,"","",function(_t){return L.call(J,_t,rt++)}),it}function ct(M){if(M._status===-1){var L=M._result;L=L(),L.then(function(J){(M._status===0||M._status===-1)&&(M._status=1,M._result=J)},function(J){(M._status===0||M._status===-1)&&(M._status=2,M._result=J)}),M._status===-1&&(M._status=0,M._result=L)}if(M._status===1)return M._result.default;throw M._result}var st=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},mt={map:H,forEach:function(M,L,J){H(M,function(){L.apply(this,arguments)},J)},count:function(M){var L=0;return H(M,function(){L++}),L},toArray:function(M){return H(M,function(L){return L})||[]},only:function(M){if(!at(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return It.Activity=m,It.Children=mt,It.Component=w,It.Fragment=e,It.Profiler=r,It.PureComponent=C,It.StrictMode=n,It.Suspense=d,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,It.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},It.cache=function(M){return function(){return M.apply(null,arguments)}},It.cacheSignal=function(){return null},It.cloneElement=function(M,L,J){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var it=_({},M.props),rt=M.key;if(L!=null)for(_t in L.key!==void 0&&(rt=""+L.key),L)!V.call(L,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&L.ref===void 0||(it[_t]=L[_t]);var _t=arguments.length-2;if(_t===1)it.children=J;else if(1<_t){for(var At=Array(_t),Dt=0;Dt<_t;Dt++)At[Dt]=arguments[Dt+2];it.children=At}return j(M.type,rt,it)},It.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},It.createElement=function(M,L,J){var it,rt={},_t=null;if(L!=null)for(it in L.key!==void 0&&(_t=""+L.key),L)V.call(L,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(rt[it]=L[it]);var At=arguments.length-2;if(At===1)rt.children=J;else if(1<At){for(var Dt=Array(At),xt=0;xt<At;xt++)Dt[xt]=arguments[xt+2];rt.children=Dt}if(M&&M.defaultProps)for(it in At=M.defaultProps,At)rt[it]===void 0&&(rt[it]=At[it]);return j(M,_t,rt)},It.createRef=function(){return{current:null}},It.forwardRef=function(M){return{$$typeof:u,render:M}},It.isValidElement=at,It.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:ct}},It.memo=function(M,L){return{$$typeof:f,type:M,compare:L===void 0?null:L}},It.startTransition=function(M){var L=N.T,J={};N.T=J;try{var it=M(),rt=N.S;rt!==null&&rt(J,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(B,st)}catch(_t){st(_t)}finally{L!==null&&J.types!==null&&(L.types=J.types),N.T=L}},It.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},It.use=function(M){return N.H.use(M)},It.useActionState=function(M,L,J){return N.H.useActionState(M,L,J)},It.useCallback=function(M,L){return N.H.useCallback(M,L)},It.useContext=function(M){return N.H.useContext(M)},It.useDebugValue=function(){},It.useDeferredValue=function(M,L){return N.H.useDeferredValue(M,L)},It.useEffect=function(M,L){return N.H.useEffect(M,L)},It.useEffectEvent=function(M){return N.H.useEffectEvent(M)},It.useId=function(){return N.H.useId()},It.useImperativeHandle=function(M,L,J){return N.H.useImperativeHandle(M,L,J)},It.useInsertionEffect=function(M,L){return N.H.useInsertionEffect(M,L)},It.useLayoutEffect=function(M,L){return N.H.useLayoutEffect(M,L)},It.useMemo=function(M,L){return N.H.useMemo(M,L)},It.useOptimistic=function(M,L){return N.H.useOptimistic(M,L)},It.useReducer=function(M,L,J){return N.H.useReducer(M,L,J)},It.useRef=function(M){return N.H.useRef(M)},It.useState=function(M){return N.H.useState(M)},It.useSyncExternalStore=function(M,L,J){return N.H.useSyncExternalStore(M,L,J)},It.useTransition=function(){return N.H.useTransition()},It.version="19.2.4",It}var Ey;function ug(){return Ey||(Ey=1,op.exports=lw()),op.exports}var Ce=ug(),lp={exports:{}},Ol={},cp={exports:{}},up={};var Ty;function cw(){return Ty||(Ty=1,(function(s){function t(U,H){var ct=U.length;U.push(H);t:for(;0<ct;){var st=ct-1>>>1,mt=U[st];if(0<r(mt,H))U[st]=H,U[ct]=mt,ct=st;else break t}}function e(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var H=U[0],ct=U.pop();if(ct!==H){U[0]=ct;t:for(var st=0,mt=U.length,M=mt>>>1;st<M;){var L=2*(st+1)-1,J=U[L],it=L+1,rt=U[it];if(0>r(J,ct))it<mt&&0>r(rt,J)?(U[st]=rt,U[it]=ct,st=it):(U[st]=J,U[L]=ct,st=L);else if(it<mt&&0>r(rt,ct))U[st]=rt,U[it]=ct,st=it;else break t}}return H}function r(U,H){var ct=U.sortIndex-H.sortIndex;return ct!==0?ct:U.id-H.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();s.unstable_now=function(){return c.now()-u}}var d=[],f=[],p=1,m=null,b=3,v=!1,A=!1,_=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function R(U){for(var H=e(f);H!==null;){if(H.callback===null)n(f);else if(H.startTime<=U)n(f),H.sortIndex=H.expirationTime,t(d,H);else break;H=e(f)}}function O(U){if(_=!1,R(U),!A)if(e(d)!==null)A=!0,B||(B=!0,F());else{var H=e(f);H!==null&&tt(O,H.startTime-U)}}var B=!1,N=-1,V=5,j=-1;function Z(){return S?!0:!(s.unstable_now()-j<V)}function at(){if(S=!1,B){var U=s.unstable_now();j=U;var H=!0;try{t:{A=!1,_&&(_=!1,x(N),N=-1),v=!0;var ct=b;try{e:{for(R(U),m=e(d);m!==null&&!(m.expirationTime>U&&Z());){var st=m.callback;if(typeof st=="function"){m.callback=null,b=m.priorityLevel;var mt=st(m.expirationTime<=U);if(U=s.unstable_now(),typeof mt=="function"){m.callback=mt,R(U),H=!0;break e}m===e(d)&&n(d),R(U)}else n(d);m=e(d)}if(m!==null)H=!0;else{var M=e(f);M!==null&&tt(O,M.startTime-U),H=!1}}break t}finally{m=null,b=ct,v=!1}H=void 0}}finally{H?F():B=!1}}}var F;if(typeof C=="function")F=function(){C(at)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,k=$.port2;$.port1.onmessage=at,F=function(){k.postMessage(null)}}else F=function(){w(at,0)};function tt(U,H){N=w(function(){U(s.unstable_now())},H)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(U){U.callback=null},s.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<U?Math.floor(1e3/U):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(U){switch(b){case 1:case 2:case 3:var H=3;break;default:H=b}var ct=b;b=H;try{return U()}finally{b=ct}},s.unstable_requestPaint=function(){S=!0},s.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ct=b;b=U;try{return H()}finally{b=ct}},s.unstable_scheduleCallback=function(U,H,ct){var st=s.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?st+ct:st):ct=st,U){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=ct+mt,U={id:p++,callback:H,priorityLevel:U,startTime:ct,expirationTime:mt,sortIndex:-1},ct>st?(U.sortIndex=ct,t(f,U),e(d)===null&&U===e(f)&&(_?(x(N),N=-1):_=!0,tt(O,ct-st))):(U.sortIndex=mt,t(d,U),A||v||(A=!0,B||(B=!0,F()))),U},s.unstable_shouldYield=Z,s.unstable_wrapCallback=function(U){var H=b;return function(){var ct=b;b=H;try{return U.apply(this,arguments)}finally{b=ct}}}})(up)),up}var xy;function uw(){return xy||(xy=1,cp.exports=cw()),cp.exports}var hp={exports:{}},Ci={};var Cy;function hw(){if(Cy)return Ci;Cy=1;var s=ug();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:d,containerInfo:f,implementation:p}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ci.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},Ci.flushSync=function(d){var f=c.T,p=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=p,n.d.f()}},Ci.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Ci.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ci.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:v}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:b,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ci.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Ci.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ci.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Ci.requestFormReset=function(d){n.d.r(d)},Ci.unstable_batchedUpdates=function(d,f){return d(f)},Ci.useFormState=function(d,f,p){return c.H.useFormState(d,f,p)},Ci.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ci.version="19.2.4",Ci}var ky;function dw(){if(ky)return hp.exports;ky=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),hp.exports=hw(),hp.exports}var My;function fw(){if(My)return Ol;My=1;var s=uw(),t=ug(),e=dw();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return d(g),i;if(y===h)return d(g),a;y=y.sibling}throw Error(n(188))}if(l.return!==h.return)l=g,h=y;else{for(var E=!1,D=g.child;D;){if(D===l){E=!0,l=g,h=y;break}if(D===h){E=!0,h=g,l=y;break}D=D.sibling}if(!E){for(D=y.child;D;){if(D===l){E=!0,l=y,h=g;break}if(D===h){E=!0,h=y,l=g;break}D=D.sibling}if(!E)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),at=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=at&&i[at]||i["@@iterator"],typeof i=="function"?i:null)}var $=Symbol.for("react.client.reference");function k(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===$?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case B:return"SuspenseList";case j:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case C:return i.displayName||"Context";case x:return(i._context.displayName||"Context")+".Consumer";case R:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return a=i.displayName||null,a!==null?a:k(i.type)||"Memo";case V:a=i._payload,i=i._init;try{return k(i(a))}catch{}}return null}var tt=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},st=[],mt=-1;function M(i){return{current:i}}function L(i){0>mt||(i.current=st[mt],st[mt]=null,mt--)}function J(i,a){mt++,st[mt]=i.current,i.current=a}var it=M(null),rt=M(null),_t=M(null),At=M(null);function Dt(i,a){switch(J(_t,a),J(rt,i),J(it,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?j2(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=j2(a),i=G2(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}L(it),J(it,i)}function xt(){L(it),L(rt),L(_t)}function ve(i){i.memoizedState!==null&&J(At,i);var a=it.current,l=G2(a,i.type);a!==l&&(J(rt,i),J(it,l))}function le(i){rt.current===i&&(L(it),L(rt)),At.current===i&&(L(At),xl._currentValue=ct)}var oi,yi;function T(i){if(oi===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);oi=a&&a[1]||"",yi=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oi+i+yi}var ut=!1;function nt(i,a){if(!i||ut)return"";ut=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(et){var Q=et}Reflect.construct(i,[],ht)}else{try{ht.call()}catch(et){Q=et}i.call(ht.prototype)}}else{try{throw Error()}catch(et){Q=et}(ht=i())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(et){if(et&&Q&&typeof et.stack=="string")return[et.stack,Q.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),E=y[0],D=y[1];if(E&&D){var I=E.split(`
`),K=D.split(`
`);for(g=h=0;h<I.length&&!I[h].includes("DetermineComponentFrameRoot");)h++;for(;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;if(h===I.length||g===K.length)for(h=I.length-1,g=K.length-1;1<=h&&0<=g&&I[h]!==K[g];)g--;for(;1<=h&&0<=g;h--,g--)if(I[h]!==K[g]){if(h!==1||g!==1)do if(h--,g--,0>g||I[h]!==K[g]){var ot=`
`+I[h].replace(" at new "," at ");return i.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",i.displayName)),ot}while(1<=h&&0<=g);break}}}finally{ut=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?T(l):""}function P(i,a){switch(i.tag){case 26:case 27:case 5:return T(i.type);case 16:return T("Lazy");case 13:return i.child!==a&&a!==null?T("Suspense Fallback"):T("Suspense");case 19:return T("SuspenseList");case 0:case 15:return nt(i.type,!1);case 11:return nt(i.type.render,!1);case 1:return nt(i.type,!0);case 31:return T("Activity");default:return""}}function z(i){try{var a="",l=null;do a+=P(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var X=Object.prototype.hasOwnProperty,dt=s.unstable_scheduleCallback,ft=s.unstable_cancelCallback,W=s.unstable_shouldYield,pt=s.unstable_requestPaint,yt=s.unstable_now,gt=s.unstable_getCurrentPriorityLevel,Ot=s.unstable_ImmediatePriority,ce=s.unstable_UserBlockingPriority,Gt=s.unstable_NormalPriority,Li=s.unstable_LowPriority,Us=s.unstable_IdlePriority,gn=s.log,Sa=s.unstable_setDisableYieldValue,ye=null,li=null;function mn(i){if(typeof gn=="function"&&Sa(i),li&&typeof li.setStrictMode=="function")try{li.setStrictMode(ye,i)}catch{}}var De=Math.clz32?Math.clz32:Xh,bc=Math.log,Vh=Math.LN2;function Xh(i){return i>>>=0,i===0?32:31-(bc(i)/Vh|0)|0}var hr=256,Ea=262144,Yn=4194304;function yn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function vc(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,y=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var D=h&134217727;return D!==0?(h=D&~y,h!==0?g=yn(h):(E&=D,E!==0?g=yn(E):l||(l=D&~i,l!==0&&(g=yn(l))))):(D=h&~y,D!==0?g=yn(D):E!==0?g=yn(E):l||(l=h&~i,l!==0&&(g=yn(l)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:g}function Io(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Y_(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sm(){var i=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),i}function Yh(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Uo(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function q_(i,a,l,h,g,y){var E=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var D=i.entanglements,I=i.expirationTimes,K=i.hiddenUpdates;for(l=E&~l;0<l;){var ot=31-De(l),ht=1<<ot;D[ot]=0,I[ot]=-1;var Q=K[ot];if(Q!==null)for(K[ot]=null,ot=0;ot<Q.length;ot++){var et=Q[ot];et!==null&&(et.lane&=-536870913)}l&=~ht}h!==0&&Em(i,h,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(E&~a))}function Em(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-De(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function Tm(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-De(l),g=1<<h;g&a|i[h]&a&&(i[h]|=a),l&=~g}}function xm(i,a){var l=a&-a;return l=(l&42)!==0?1:qh(l),(l&(i.suspendedLanes|a))!==0?0:l}function qh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Kh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Cm(){var i=H.p;return i!==0?i:(i=window.event,i===void 0?32:dy(i.type))}function km(i,a){var l=H.p;try{return H.p=i,a()}finally{H.p=l}}var Hs=Math.random().toString(36).slice(2),bi="__reactFiber$"+Hs,Ni="__reactProps$"+Hs,dr="__reactContainer$"+Hs,Wh="__reactEvents$"+Hs,K_="__reactListeners$"+Hs,W_="__reactHandles$"+Hs,Mm="__reactResources$"+Hs,Ho="__reactMarker$"+Hs;function Zh(i){delete i[bi],delete i[Ni],delete i[Wh],delete i[K_],delete i[W_]}function fr(i){var a=i[bi];if(a)return a;for(var l=i.parentNode;l;){if(a=l[dr]||l[bi]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Z2(i);i!==null;){if(l=i[bi])return l;i=Z2(i)}return a}i=l,l=i.parentNode}return null}function pr(i){if(i=i[bi]||i[dr]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function jo(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function gr(i){var a=i[Mm];return a||(a=i[Mm]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ci(i){i[Ho]=!0}var Dm=new Set,Om={};function Ta(i,a){mr(i,a),mr(i+"Capture",a)}function mr(i,a){for(Om[i]=a,i=0;i<a.length;i++)Dm.add(a[i])}var Z_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rm={},Lm={};function $_(i){return X.call(Lm,i)?!0:X.call(Rm,i)?!1:Z_.test(i)?Lm[i]=!0:(Rm[i]=!0,!1)}function _c(i,a,l){if($_(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Ac(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function fs(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function bn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Nm(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Q_(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,y=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(E){l=""+E,y.call(this,E)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function $h(i){if(!i._valueTracker){var a=Nm(i)?"checked":"value";i._valueTracker=Q_(i,a,""+i[a])}}function Bm(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Nm(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function wc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var J_=/[\n"\\]/g;function vn(i){return i.replace(J_,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Qh(i,a,l,h,g,y,E,D){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+bn(a)):i.value!==""+bn(a)&&(i.value=""+bn(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?Jh(i,E,bn(a)):l!=null?Jh(i,E,bn(l)):h!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+bn(D):i.removeAttribute("name")}function zm(i,a,l,h,g,y,E,D){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){$h(i);return}l=l!=null?""+bn(l):"",a=a!=null?""+bn(a):l,D||a===i.value||(i.value=a),i.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=D?i.checked:!!h,i.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),$h(i)}function Jh(i,a,l){a==="number"&&wc(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function yr(i,a,l,h){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+bn(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function Fm(i,a,l){if(a!=null&&(a=""+bn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+bn(l):""}function Pm(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(tt(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=bn(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),$h(i)}function br(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var tA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Im(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||tA.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Um(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&l[g]!==h&&Im(i,g,h)}else for(var y in a)a.hasOwnProperty(y)&&Im(i,y,a[y])}function td(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sc(i){return iA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ps(){}var ed=null;function id(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vr=null,_r=null;function Hm(i){var a=pr(i);if(a&&(i=a.stateNode)){var l=i[Ni]||null;t:switch(i=a.stateNode,a.type){case"input":if(Qh(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+vn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var g=h[Ni]||null;if(!g)throw Error(n(90));Qh(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Bm(h)}break t;case"textarea":Fm(i,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&yr(i,!!l.multiple,a,!1)}}}var nd=!1;function jm(i,a,l){if(nd)return i(a,l);nd=!0;try{var h=i(a);return h}finally{if(nd=!1,(vr!==null||_r!==null)&&(uu(),vr&&(a=vr,i=_r,_r=vr=null,Hm(a),i)))for(a=0;a<i.length;a++)Hm(i[a])}}function Go(i,a){var l=i.stateNode;if(l===null)return null;var h=l[Ni]||null;if(h===null)return null;l=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sd=!1;if(gs)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){sd=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{sd=!1}var js=null,ad=null,Ec=null;function Gm(){if(Ec)return Ec;var i,a=ad,l=a.length,h,g="value"in js?js.value:js.textContent,y=g.length;for(i=0;i<l&&a[i]===g[i];i++);var E=l-i;for(h=1;h<=E&&a[l-h]===g[y-h];h++);return Ec=g.slice(i,1<h?1-h:void 0)}function Tc(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function xc(){return!0}function Vm(){return!1}function Bi(i){function a(l,h,g,y,E){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(l=i[D],this[D]=l?l(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?xc:Vm,this.isPropagationStopped=Vm,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),a}var xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=Bi(xa),Xo=m({},xa,{view:0,detail:0}),nA=Bi(Xo),rd,od,Yo,kc=m({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Yo&&(Yo&&i.type==="mousemove"?(rd=i.screenX-Yo.screenX,od=i.screenY-Yo.screenY):od=rd=0,Yo=i),rd)},movementY:function(i){return"movementY"in i?i.movementY:od}}),Xm=Bi(kc),sA=m({},kc,{dataTransfer:0}),aA=Bi(sA),rA=m({},Xo,{relatedTarget:0}),ld=Bi(rA),oA=m({},xa,{animationName:0,elapsedTime:0,pseudoElement:0}),lA=Bi(oA),cA=m({},xa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uA=Bi(cA),hA=m({},xa,{data:0}),Ym=Bi(hA),dA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gA(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=pA[i])?!!a[i]:!1}function cd(){return gA}var mA=m({},Xo,{key:function(i){if(i.key){var a=dA[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Tc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?fA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cd,charCode:function(i){return i.type==="keypress"?Tc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Tc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yA=Bi(mA),bA=m({},kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qm=Bi(bA),vA=m({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cd}),_A=Bi(vA),AA=m({},xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),wA=Bi(AA),SA=m({},kc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),EA=Bi(SA),TA=m({},xa,{newState:0,oldState:0}),xA=Bi(TA),CA=[9,13,27,32],ud=gs&&"CompositionEvent"in window,qo=null;gs&&"documentMode"in document&&(qo=document.documentMode);var kA=gs&&"TextEvent"in window&&!qo,Km=gs&&(!ud||qo&&8<qo&&11>=qo),Wm=" ",Zm=!1;function $m(i,a){switch(i){case"keyup":return CA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ar=!1;function MA(i,a){switch(i){case"compositionend":return Qm(a);case"keypress":return a.which!==32?null:(Zm=!0,Wm);case"textInput":return i=a.data,i===Wm&&Zm?null:i;default:return null}}function DA(i,a){if(Ar)return i==="compositionend"||!ud&&$m(i,a)?(i=Gm(),Ec=ad=js=null,Ar=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Km&&a.locale!=="ko"?null:a.data;default:return null}}var OA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!OA[i.type]:a==="textarea"}function t0(i,a,l,h){vr?_r?_r.push(h):_r=[h]:vr=h,a=yu(a,"onChange"),0<a.length&&(l=new Cc("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var Ko=null,Wo=null;function RA(i){z2(i,0)}function Mc(i){var a=jo(i);if(Bm(a))return i}function e0(i,a){if(i==="change")return a}var i0=!1;if(gs){var hd;if(gs){var dd="oninput"in document;if(!dd){var n0=document.createElement("div");n0.setAttribute("oninput","return;"),dd=typeof n0.oninput=="function"}hd=dd}else hd=!1;i0=hd&&(!document.documentMode||9<document.documentMode)}function s0(){Ko&&(Ko.detachEvent("onpropertychange",a0),Wo=Ko=null)}function a0(i){if(i.propertyName==="value"&&Mc(Wo)){var a=[];t0(a,Wo,i,id(i)),jm(RA,a)}}function LA(i,a,l){i==="focusin"?(s0(),Ko=a,Wo=l,Ko.attachEvent("onpropertychange",a0)):i==="focusout"&&s0()}function NA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mc(Wo)}function BA(i,a){if(i==="click")return Mc(a)}function zA(i,a){if(i==="input"||i==="change")return Mc(a)}function FA(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var qi=typeof Object.is=="function"?Object.is:FA;function Zo(i,a){if(qi(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!X.call(a,g)||!qi(i[g],a[g]))return!1}return!0}function r0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function o0(i,a){var l=r0(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=r0(l)}}function l0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?l0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function c0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=wc(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=wc(i.document)}return a}function fd(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var PA=gs&&"documentMode"in document&&11>=document.documentMode,wr=null,pd=null,$o=null,gd=!1;function u0(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;gd||wr==null||wr!==wc(h)||(h=wr,"selectionStart"in h&&fd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),$o&&Zo($o,h)||($o=h,h=yu(pd,"onSelect"),0<h.length&&(a=new Cc("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=wr)))}function Ca(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Sr={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionrun:Ca("Transition","TransitionRun"),transitionstart:Ca("Transition","TransitionStart"),transitioncancel:Ca("Transition","TransitionCancel"),transitionend:Ca("Transition","TransitionEnd")},md={},h0={};gs&&(h0=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function ka(i){if(md[i])return md[i];if(!Sr[i])return i;var a=Sr[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in h0)return md[i]=a[l];return i}var d0=ka("animationend"),f0=ka("animationiteration"),p0=ka("animationstart"),IA=ka("transitionrun"),UA=ka("transitionstart"),HA=ka("transitioncancel"),g0=ka("transitionend"),m0=new Map,yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yd.push("scrollEnd");function Pn(i,a){m0.set(i,a),Ta(a,[i])}var Dc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},_n=[],Er=0,bd=0;function Oc(){for(var i=Er,a=bd=Er=0;a<i;){var l=_n[a];_n[a++]=null;var h=_n[a];_n[a++]=null;var g=_n[a];_n[a++]=null;var y=_n[a];if(_n[a++]=null,h!==null&&g!==null){var E=h.pending;E===null?g.next=g:(g.next=E.next,E.next=g),h.pending=g}y!==0&&y0(l,g,y)}}function Rc(i,a,l,h){_n[Er++]=i,_n[Er++]=a,_n[Er++]=l,_n[Er++]=h,bd|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function vd(i,a,l,h){return Rc(i,a,l,h),Lc(i)}function Ma(i,a){return Rc(i,null,null,a),Lc(i)}function y0(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,y=i.return;y!==null;)y.childLanes|=l,h=y.alternate,h!==null&&(h.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&a!==null&&(g=31-De(l),i=y.hiddenUpdates,h=i[g],h===null?i[g]=[a]:h.push(a),a.lane=l|536870912),y):null}function Lc(i){if(50<vl)throw vl=0,Mf=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Tr={};function jA(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(i,a,l,h){return new jA(i,a,l,h)}function _d(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ms(i,a){var l=i.alternate;return l===null?(l=Ki(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function b0(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Nc(i,a,l,h,g,y){var E=0;if(h=i,typeof i=="function")_d(i)&&(E=1);else if(typeof i=="string")E=q4(i,l,it.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case j:return i=Ki(31,l,a,g),i.elementType=j,i.lanes=y,i;case _:return Da(l.children,g,y,a);case S:E=8,g|=24;break;case w:return i=Ki(12,l,a,g|2),i.elementType=w,i.lanes=y,i;case O:return i=Ki(13,l,a,g),i.elementType=O,i.lanes=y,i;case B:return i=Ki(19,l,a,g),i.elementType=B,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:E=10;break t;case x:E=9;break t;case R:E=11;break t;case N:E=14;break t;case V:E=16,h=null;break t}E=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=Ki(E,l,a,g),a.elementType=i,a.type=h,a.lanes=y,a}function Da(i,a,l,h){return i=Ki(7,i,h,a),i.lanes=l,i}function Ad(i,a,l){return i=Ki(6,i,null,a),i.lanes=l,i}function v0(i){var a=Ki(18,null,null,0);return a.stateNode=i,a}function wd(i,a,l){return a=Ki(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var _0=new WeakMap;function An(i,a){if(typeof i=="object"&&i!==null){var l=_0.get(i);return l!==void 0?l:(a={value:i,source:a,stack:z(a)},_0.set(i,a),a)}return{value:i,source:a,stack:z(a)}}var xr=[],Cr=0,Bc=null,Qo=0,wn=[],Sn=0,Gs=null,qn=1,Kn="";function ys(i,a){xr[Cr++]=Qo,xr[Cr++]=Bc,Bc=i,Qo=a}function A0(i,a,l){wn[Sn++]=qn,wn[Sn++]=Kn,wn[Sn++]=Gs,Gs=i;var h=qn;i=Kn;var g=32-De(h)-1;h&=~(1<<g),l+=1;var y=32-De(a)+g;if(30<y){var E=g-g%5;y=(h&(1<<E)-1).toString(32),h>>=E,g-=E,qn=1<<32-De(a)+g|l<<g|h,Kn=y+i}else qn=1<<y|l<<g|h,Kn=i}function Sd(i){i.return!==null&&(ys(i,1),A0(i,1,0))}function Ed(i){for(;i===Bc;)Bc=xr[--Cr],xr[Cr]=null,Qo=xr[--Cr],xr[Cr]=null;for(;i===Gs;)Gs=wn[--Sn],wn[Sn]=null,Kn=wn[--Sn],wn[Sn]=null,qn=wn[--Sn],wn[Sn]=null}function w0(i,a){wn[Sn++]=qn,wn[Sn++]=Kn,wn[Sn++]=Gs,qn=a.id,Kn=a.overflow,Gs=i}var vi=null,Ae=null,Kt=!1,Vs=null,En=!1,Td=Error(n(519));function Xs(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jo(An(a,i)),Td}function S0(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[bi]=i,a[Ni]=h,l){case"dialog":Xt("cancel",a),Xt("close",a);break;case"iframe":case"object":case"embed":Xt("load",a);break;case"video":case"audio":for(l=0;l<Al.length;l++)Xt(Al[l],a);break;case"source":Xt("error",a);break;case"img":case"image":case"link":Xt("error",a),Xt("load",a);break;case"details":Xt("toggle",a);break;case"input":Xt("invalid",a),zm(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Xt("invalid",a);break;case"textarea":Xt("invalid",a),Pm(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||U2(a.textContent,l)?(h.popover!=null&&(Xt("beforetoggle",a),Xt("toggle",a)),h.onScroll!=null&&Xt("scroll",a),h.onScrollEnd!=null&&Xt("scrollend",a),h.onClick!=null&&(a.onclick=ps),a=!0):a=!1,a||Xs(i,!0)}function E0(i){for(vi=i.return;vi;)switch(vi.tag){case 5:case 31:case 13:En=!1;return;case 27:case 3:En=!0;return;default:vi=vi.return}}function kr(i){if(i!==vi)return!1;if(!Kt)return E0(i),Kt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Vf(i.type,i.memoizedProps)),l=!l),l&&Ae&&Xs(i),E0(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Ae=W2(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Ae=W2(i)}else a===27?(a=Ae,aa(i.type)?(i=Wf,Wf=null,Ae=i):Ae=a):Ae=vi?xn(i.stateNode.nextSibling):null;return!0}function Oa(){Ae=vi=null,Kt=!1}function xd(){var i=Vs;return i!==null&&(Ii===null?Ii=i:Ii.push.apply(Ii,i),Vs=null),i}function Jo(i){Vs===null?Vs=[i]:Vs.push(i)}var Cd=M(null),Ra=null,bs=null;function Ys(i,a,l){J(Cd,a._currentValue),a._currentValue=l}function vs(i){i._currentValue=Cd.current,L(Cd)}function kd(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Md(i,a,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;t:for(;y!==null;){var D=y;y=g;for(var I=0;I<a.length;I++)if(D.context===a[I]){y.lanes|=l,D=y.alternate,D!==null&&(D.lanes|=l),kd(y.return,l,i),h||(E=null);break t}y=D.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(n(341));E.lanes|=l,y=E.alternate,y!==null&&(y.lanes|=l),kd(E,l,i),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Mr(i,a,l,h){i=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var D=g.type;qi(g.pendingProps.value,E.value)||(i!==null?i.push(D):i=[D])}}else if(g===At.current){if(E=g.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(xl):i=[xl])}g=g.return}i!==null&&Md(a,i,l,h),a.flags|=262144}function zc(i){for(i=i.firstContext;i!==null;){if(!qi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function La(i){Ra=i,bs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function _i(i){return T0(Ra,i)}function Fc(i,a){return Ra===null&&La(i),T0(i,a)}function T0(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},bs===null){if(i===null)throw Error(n(308));bs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else bs=bs.next=a;return l}var GA=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},VA=s.unstable_scheduleCallback,XA=s.unstable_NormalPriority,Ye={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dd(){return{controller:new GA,data:new Map,refCount:0}}function tl(i){i.refCount--,i.refCount===0&&VA(XA,function(){i.controller.abort()})}var el=null,Od=0,Dr=0,Or=null;function YA(i,a){if(el===null){var l=el=[];Od=0,Dr=Bf(),Or={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Od++,a.then(x0,x0),a}function x0(){if(--Od===0&&el!==null){Or!==null&&(Or.status="fulfilled");var i=el;el=null,Dr=0,Or=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function qA(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var C0=U.S;U.S=function(i,a){u2=yt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&YA(i,a),C0!==null&&C0(i,a)};var Na=M(null);function Rd(){var i=Na.current;return i!==null?i:be.pooledCache}function Pc(i,a){a===null?J(Na,Na.current):J(Na,a.pool)}function k0(){var i=Rd();return i===null?null:{parent:Ye._currentValue,pool:i}}var Rr=Error(n(460)),Ld=Error(n(474)),Ic=Error(n(542)),Uc={then:function(){}};function M0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function D0(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(ps,ps),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,R0(i),i;default:if(typeof a.status=="string")a.then(ps,ps);else{if(i=be,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,R0(i),i}throw za=a,Rr}}function Ba(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(za=l,Rr):l}}var za=null;function O0(){if(za===null)throw Error(n(459));var i=za;return za=null,i}function R0(i){if(i===Rr||i===Ic)throw Error(n(483))}var Lr=null,il=0;function Hc(i){var a=il;return il+=1,Lr===null&&(Lr=[]),D0(Lr,i,a)}function nl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function jc(i,a){throw a.$$typeof===b?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function L0(i){function a(Y,G){if(i){var q=Y.deletions;q===null?(Y.deletions=[G],Y.flags|=16):q.push(G)}}function l(Y,G){if(!i)return null;for(;G!==null;)a(Y,G),G=G.sibling;return null}function h(Y){for(var G=new Map;Y!==null;)Y.key!==null?G.set(Y.key,Y):G.set(Y.index,Y),Y=Y.sibling;return G}function g(Y,G){return Y=ms(Y,G),Y.index=0,Y.sibling=null,Y}function y(Y,G,q){return Y.index=q,i?(q=Y.alternate,q!==null?(q=q.index,q<G?(Y.flags|=67108866,G):q):(Y.flags|=67108866,G)):(Y.flags|=1048576,G)}function E(Y){return i&&Y.alternate===null&&(Y.flags|=67108866),Y}function D(Y,G,q,lt){return G===null||G.tag!==6?(G=Ad(q,Y.mode,lt),G.return=Y,G):(G=g(G,q),G.return=Y,G)}function I(Y,G,q,lt){var Rt=q.type;return Rt===_?ot(Y,G,q.props.children,lt,q.key):G!==null&&(G.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===V&&Ba(Rt)===G.type)?(G=g(G,q.props),nl(G,q),G.return=Y,G):(G=Nc(q.type,q.key,q.props,null,Y.mode,lt),nl(G,q),G.return=Y,G)}function K(Y,G,q,lt){return G===null||G.tag!==4||G.stateNode.containerInfo!==q.containerInfo||G.stateNode.implementation!==q.implementation?(G=wd(q,Y.mode,lt),G.return=Y,G):(G=g(G,q.children||[]),G.return=Y,G)}function ot(Y,G,q,lt,Rt){return G===null||G.tag!==7?(G=Da(q,Y.mode,lt,Rt),G.return=Y,G):(G=g(G,q),G.return=Y,G)}function ht(Y,G,q){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Ad(""+G,Y.mode,q),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return q=Nc(G.type,G.key,G.props,null,Y.mode,q),nl(q,G),q.return=Y,q;case A:return G=wd(G,Y.mode,q),G.return=Y,G;case V:return G=Ba(G),ht(Y,G,q)}if(tt(G)||F(G))return G=Da(G,Y.mode,q,null),G.return=Y,G;if(typeof G.then=="function")return ht(Y,Hc(G),q);if(G.$$typeof===C)return ht(Y,Fc(Y,G),q);jc(Y,G)}return null}function Q(Y,G,q,lt){var Rt=G!==null?G.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Rt!==null?null:D(Y,G,""+q,lt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return q.key===Rt?I(Y,G,q,lt):null;case A:return q.key===Rt?K(Y,G,q,lt):null;case V:return q=Ba(q),Q(Y,G,q,lt)}if(tt(q)||F(q))return Rt!==null?null:ot(Y,G,q,lt,null);if(typeof q.then=="function")return Q(Y,G,Hc(q),lt);if(q.$$typeof===C)return Q(Y,G,Fc(Y,q),lt);jc(Y,q)}return null}function et(Y,G,q,lt,Rt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Y=Y.get(q)||null,D(G,Y,""+lt,Rt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case v:return Y=Y.get(lt.key===null?q:lt.key)||null,I(G,Y,lt,Rt);case A:return Y=Y.get(lt.key===null?q:lt.key)||null,K(G,Y,lt,Rt);case V:return lt=Ba(lt),et(Y,G,q,lt,Rt)}if(tt(lt)||F(lt))return Y=Y.get(q)||null,ot(G,Y,lt,Rt,null);if(typeof lt.then=="function")return et(Y,G,q,Hc(lt),Rt);if(lt.$$typeof===C)return et(Y,G,q,Fc(G,lt),Rt);jc(G,lt)}return null}function St(Y,G,q,lt){for(var Rt=null,Qt=null,Tt=G,jt=G=0,qt=null;Tt!==null&&jt<q.length;jt++){Tt.index>jt?(qt=Tt,Tt=null):qt=Tt.sibling;var Jt=Q(Y,Tt,q[jt],lt);if(Jt===null){Tt===null&&(Tt=qt);break}i&&Tt&&Jt.alternate===null&&a(Y,Tt),G=y(Jt,G,jt),Qt===null?Rt=Jt:Qt.sibling=Jt,Qt=Jt,Tt=qt}if(jt===q.length)return l(Y,Tt),Kt&&ys(Y,jt),Rt;if(Tt===null){for(;jt<q.length;jt++)Tt=ht(Y,q[jt],lt),Tt!==null&&(G=y(Tt,G,jt),Qt===null?Rt=Tt:Qt.sibling=Tt,Qt=Tt);return Kt&&ys(Y,jt),Rt}for(Tt=h(Tt);jt<q.length;jt++)qt=et(Tt,Y,jt,q[jt],lt),qt!==null&&(i&&qt.alternate!==null&&Tt.delete(qt.key===null?jt:qt.key),G=y(qt,G,jt),Qt===null?Rt=qt:Qt.sibling=qt,Qt=qt);return i&&Tt.forEach(function(ua){return a(Y,ua)}),Kt&&ys(Y,jt),Rt}function Bt(Y,G,q,lt){if(q==null)throw Error(n(151));for(var Rt=null,Qt=null,Tt=G,jt=G=0,qt=null,Jt=q.next();Tt!==null&&!Jt.done;jt++,Jt=q.next()){Tt.index>jt?(qt=Tt,Tt=null):qt=Tt.sibling;var ua=Q(Y,Tt,Jt.value,lt);if(ua===null){Tt===null&&(Tt=qt);break}i&&Tt&&ua.alternate===null&&a(Y,Tt),G=y(ua,G,jt),Qt===null?Rt=ua:Qt.sibling=ua,Qt=ua,Tt=qt}if(Jt.done)return l(Y,Tt),Kt&&ys(Y,jt),Rt;if(Tt===null){for(;!Jt.done;jt++,Jt=q.next())Jt=ht(Y,Jt.value,lt),Jt!==null&&(G=y(Jt,G,jt),Qt===null?Rt=Jt:Qt.sibling=Jt,Qt=Jt);return Kt&&ys(Y,jt),Rt}for(Tt=h(Tt);!Jt.done;jt++,Jt=q.next())Jt=et(Tt,Y,jt,Jt.value,lt),Jt!==null&&(i&&Jt.alternate!==null&&Tt.delete(Jt.key===null?jt:Jt.key),G=y(Jt,G,jt),Qt===null?Rt=Jt:Qt.sibling=Jt,Qt=Jt);return i&&Tt.forEach(function(sw){return a(Y,sw)}),Kt&&ys(Y,jt),Rt}function pe(Y,G,q,lt){if(typeof q=="object"&&q!==null&&q.type===_&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case v:t:{for(var Rt=q.key;G!==null;){if(G.key===Rt){if(Rt=q.type,Rt===_){if(G.tag===7){l(Y,G.sibling),lt=g(G,q.props.children),lt.return=Y,Y=lt;break t}}else if(G.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===V&&Ba(Rt)===G.type){l(Y,G.sibling),lt=g(G,q.props),nl(lt,q),lt.return=Y,Y=lt;break t}l(Y,G);break}else a(Y,G);G=G.sibling}q.type===_?(lt=Da(q.props.children,Y.mode,lt,q.key),lt.return=Y,Y=lt):(lt=Nc(q.type,q.key,q.props,null,Y.mode,lt),nl(lt,q),lt.return=Y,Y=lt)}return E(Y);case A:t:{for(Rt=q.key;G!==null;){if(G.key===Rt)if(G.tag===4&&G.stateNode.containerInfo===q.containerInfo&&G.stateNode.implementation===q.implementation){l(Y,G.sibling),lt=g(G,q.children||[]),lt.return=Y,Y=lt;break t}else{l(Y,G);break}else a(Y,G);G=G.sibling}lt=wd(q,Y.mode,lt),lt.return=Y,Y=lt}return E(Y);case V:return q=Ba(q),pe(Y,G,q,lt)}if(tt(q))return St(Y,G,q,lt);if(F(q)){if(Rt=F(q),typeof Rt!="function")throw Error(n(150));return q=Rt.call(q),Bt(Y,G,q,lt)}if(typeof q.then=="function")return pe(Y,G,Hc(q),lt);if(q.$$typeof===C)return pe(Y,G,Fc(Y,q),lt);jc(Y,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,G!==null&&G.tag===6?(l(Y,G.sibling),lt=g(G,q),lt.return=Y,Y=lt):(l(Y,G),lt=Ad(q,Y.mode,lt),lt.return=Y,Y=lt),E(Y)):l(Y,G)}return function(Y,G,q,lt){try{il=0;var Rt=pe(Y,G,q,lt);return Lr=null,Rt}catch(Tt){if(Tt===Rr||Tt===Ic)throw Tt;var Qt=Ki(29,Tt,null,Y.mode);return Qt.lanes=lt,Qt.return=Y,Qt}}}var Fa=L0(!0),N0=L0(!1),qs=!1;function Nd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bd(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ks(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ws(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ee&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=Lc(i),y0(i,null,l),a}return Rc(i,h,a,l),Lc(i)}function sl(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Tm(i,l)}}function zd(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?g=y=a:y=y.next=a}else g=y=a;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Fd=!1;function al(){if(Fd){var i=Or;if(i!==null)throw i}}function rl(i,a,l,h){Fd=!1;var g=i.updateQueue;qs=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var I=D,K=I.next;I.next=null,E===null?y=K:E.next=K,E=I;var ot=i.alternate;ot!==null&&(ot=ot.updateQueue,D=ot.lastBaseUpdate,D!==E&&(D===null?ot.firstBaseUpdate=K:D.next=K,ot.lastBaseUpdate=I))}if(y!==null){var ht=g.baseState;E=0,ot=K=I=null,D=y;do{var Q=D.lane&-536870913,et=Q!==D.lane;if(et?(Yt&Q)===Q:(h&Q)===Q){Q!==0&&Q===Dr&&(Fd=!0),ot!==null&&(ot=ot.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});t:{var St=i,Bt=D;Q=a;var pe=l;switch(Bt.tag){case 1:if(St=Bt.payload,typeof St=="function"){ht=St.call(pe,ht,Q);break t}ht=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Bt.payload,Q=typeof St=="function"?St.call(pe,ht,Q):St,Q==null)break t;ht=m({},ht,Q);break t;case 2:qs=!0}}Q=D.callback,Q!==null&&(i.flags|=64,et&&(i.flags|=8192),et=g.callbacks,et===null?g.callbacks=[Q]:et.push(Q))}else et={lane:Q,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ot===null?(K=ot=et,I=ht):ot=ot.next=et,E|=Q;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;et=D,D=et.next,et.next=null,g.lastBaseUpdate=et,g.shared.pending=null}}while(!0);ot===null&&(I=ht),g.baseState=I,g.firstBaseUpdate=K,g.lastBaseUpdate=ot,y===null&&(g.shared.lanes=0),ta|=E,i.lanes=E,i.memoizedState=ht}}function B0(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function z0(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)B0(l[i],a)}var Nr=M(null),Gc=M(0);function F0(i,a){i=ks,J(Gc,i),J(Nr,a),ks=i|a.baseLanes}function Pd(){J(Gc,ks),J(Nr,Nr.current)}function Id(){ks=Gc.current,L(Nr),L(Gc)}var Wi=M(null),Tn=null;function Zs(i){var a=i.alternate;J(Ue,Ue.current&1),J(Wi,i),Tn===null&&(a===null||Nr.current!==null||a.memoizedState!==null)&&(Tn=i)}function Ud(i){J(Ue,Ue.current),J(Wi,i),Tn===null&&(Tn=i)}function P0(i){i.tag===22?(J(Ue,Ue.current),J(Wi,i),Tn===null&&(Tn=i)):$s()}function $s(){J(Ue,Ue.current),J(Wi,Wi.current)}function Zi(i){L(Wi),Tn===i&&(Tn=null),L(Ue)}var Ue=M(0);function Vc(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||qf(l)||Kf(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var _s=0,Ht=null,de=null,qe=null,Xc=!1,Br=!1,Pa=!1,Yc=0,ol=0,zr=null,KA=0;function Be(){throw Error(n(321))}function Hd(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!qi(i[l],a[l]))return!1;return!0}function jd(i,a,l,h,g,y){return _s=y,Ht=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,U.H=i===null||i.memoizedState===null?A1:sf,Pa=!1,y=l(h,g),Pa=!1,Br&&(y=U0(a,l,h,g)),I0(i),y}function I0(i){U.H=ul;var a=de!==null&&de.next!==null;if(_s=0,qe=de=Ht=null,Xc=!1,ol=0,zr=null,a)throw Error(n(300));i===null||Ke||(i=i.dependencies,i!==null&&zc(i)&&(Ke=!0))}function U0(i,a,l,h){Ht=i;var g=0;do{if(Br&&(zr=null),ol=0,Br=!1,25<=g)throw Error(n(301));if(g+=1,qe=de=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}U.H=w1,y=a(l,h)}while(Br);return y}function WA(){var i=U.H,a=i.useState()[0];return a=typeof a.then=="function"?ll(a):a,i=i.useState()[0],(de!==null?de.memoizedState:null)!==i&&(Ht.flags|=1024),a}function Gd(){var i=Yc!==0;return Yc=0,i}function Vd(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Xd(i){if(Xc){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Xc=!1}_s=0,qe=de=Ht=null,Br=!1,ol=Yc=0,zr=null}function Mi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ht.memoizedState=qe=i:qe=qe.next=i,qe}function He(){if(de===null){var i=Ht.alternate;i=i!==null?i.memoizedState:null}else i=de.next;var a=qe===null?Ht.memoizedState:qe.next;if(a!==null)qe=a,de=i;else{if(i===null)throw Ht.alternate===null?Error(n(467)):Error(n(310));de=i,i={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},qe===null?Ht.memoizedState=qe=i:qe=qe.next=i}return qe}function qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(i){var a=ol;return ol+=1,zr===null&&(zr=[]),i=D0(zr,i,a),a=Ht,(qe===null?a.memoizedState:qe.next)===null&&(a=a.alternate,U.H=a===null||a.memoizedState===null?A1:sf),i}function Kc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ll(i);if(i.$$typeof===C)return _i(i)}throw Error(n(438,String(i)))}function Yd(i){var a=null,l=Ht.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=Ht.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=qc(),Ht.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=Z;return a.index++,l}function As(i,a){return typeof a=="function"?a(i):a}function Wc(i){var a=He();return qd(a,de,i)}function qd(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var g=i.baseQueue,y=h.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}a.baseQueue=g=y,h.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{a=g.next;var D=E=null,I=null,K=a,ot=!1;do{var ht=K.lane&-536870913;if(ht!==K.lane?(Yt&ht)===ht:(_s&ht)===ht){var Q=K.revertLane;if(Q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ht===Dr&&(ot=!0);else if((_s&Q)===Q){K=K.next,Q===Dr&&(ot=!0);continue}else ht={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(D=I=ht,E=y):I=I.next=ht,Ht.lanes|=Q,ta|=Q;ht=K.action,Pa&&l(y,ht),y=K.hasEagerState?K.eagerState:l(y,ht)}else Q={lane:ht,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(D=I=Q,E=y):I=I.next=Q,Ht.lanes|=ht,ta|=ht;K=K.next}while(K!==null&&K!==a);if(I===null?E=y:I.next=D,!qi(y,i.memoizedState)&&(Ke=!0,ot&&(l=Or,l!==null)))throw l;i.memoizedState=y,i.baseState=E,i.baseQueue=I,h.lastRenderedState=y}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Kd(i){var a=He(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,y=a.memoizedState;if(g!==null){l.pending=null;var E=g=g.next;do y=i(y,E.action),E=E.next;while(E!==g);qi(y,a.memoizedState)||(Ke=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,h]}function H0(i,a,l){var h=Ht,g=He(),y=Kt;if(y){if(l===void 0)throw Error(n(407));l=l()}else l=a();var E=!qi((de||g).memoizedState,l);if(E&&(g.memoizedState=l,Ke=!0),g=g.queue,$d(V0.bind(null,h,g,i),[i]),g.getSnapshot!==a||E||qe!==null&&qe.memoizedState.tag&1){if(h.flags|=2048,Fr(9,{destroy:void 0},G0.bind(null,h,g,l,a),null),be===null)throw Error(n(349));y||(_s&127)!==0||j0(h,a,l)}return l}function j0(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Ht.updateQueue,a===null?(a=qc(),Ht.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function G0(i,a,l,h){a.value=l,a.getSnapshot=h,X0(a)&&Y0(i)}function V0(i,a,l){return l(function(){X0(a)&&Y0(i)})}function X0(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!qi(i,l)}catch{return!0}}function Y0(i){var a=Ma(i,2);a!==null&&Ui(a,i,2)}function Wd(i){var a=Mi();if(typeof i=="function"){var l=i;if(i=l(),Pa){mn(!0);try{l()}finally{mn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:i},a}function q0(i,a,l,h){return i.baseState=l,qd(i,de,typeof h=="function"?h:As)}function ZA(i,a,l,h,g){if(Qc(i))throw Error(n(485));if(i=a.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};U.T!==null?l(!0):y.isTransition=!1,h(y),l=a.pending,l===null?(y.next=a.pending=y,K0(a,y)):(y.next=l.next,a.pending=l.next=y)}}function K0(i,a){var l=a.action,h=a.payload,g=i.state;if(a.isTransition){var y=U.T,E={};U.T=E;try{var D=l(g,h),I=U.S;I!==null&&I(E,D),W0(i,a,D)}catch(K){Zd(i,a,K)}finally{y!==null&&E.types!==null&&(y.types=E.types),U.T=y}}else try{y=l(g,h),W0(i,a,y)}catch(K){Zd(i,a,K)}}function W0(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Z0(i,a,h)},function(h){return Zd(i,a,h)}):Z0(i,a,l)}function Z0(i,a,l){a.status="fulfilled",a.value=l,$0(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,K0(i,l)))}function Zd(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,$0(a),a=a.next;while(a!==h)}i.action=null}function $0(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Q0(i,a){return a}function J0(i,a){if(Kt){var l=be.formState;if(l!==null){t:{var h=Ht;if(Kt){if(Ae){e:{for(var g=Ae,y=En;g.nodeType!==8;){if(!y){g=null;break e}if(g=xn(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Ae=xn(g.nextSibling),h=g.data==="F!";break t}}Xs(h)}h=!1}h&&(a=l[0])}}return l=Mi(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Q0,lastRenderedState:a},l.queue=h,l=b1.bind(null,Ht,h),h.dispatch=l,h=Wd(!1),y=nf.bind(null,Ht,!1,h.queue),h=Mi(),g={state:a,dispatch:null,action:i,pending:null},h.queue=g,l=ZA.bind(null,Ht,g,y,l),g.dispatch=l,h.memoizedState=i,[a,l,!1]}function t1(i){var a=He();return e1(a,de,i)}function e1(i,a,l){if(a=qd(i,a,Q0)[0],i=Wc(As)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=ll(a)}catch(E){throw E===Rr?Ic:E}else h=a;a=He();var g=a.queue,y=g.dispatch;return l!==a.memoizedState&&(Ht.flags|=2048,Fr(9,{destroy:void 0},$A.bind(null,g,l),null)),[h,y,i]}function $A(i,a){i.action=a}function i1(i){var a=He(),l=de;if(l!==null)return e1(a,l,i);He(),a=a.memoizedState,l=He();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function Fr(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=Ht.updateQueue,a===null&&(a=qc(),Ht.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function n1(){return He().memoizedState}function Zc(i,a,l,h){var g=Mi();Ht.flags|=i,g.memoizedState=Fr(1|a,{destroy:void 0},l,h===void 0?null:h)}function $c(i,a,l,h){var g=He();h=h===void 0?null:h;var y=g.memoizedState.inst;de!==null&&h!==null&&Hd(h,de.memoizedState.deps)?g.memoizedState=Fr(a,y,l,h):(Ht.flags|=i,g.memoizedState=Fr(1|a,y,l,h))}function s1(i,a){Zc(8390656,8,i,a)}function $d(i,a){$c(2048,8,i,a)}function QA(i){Ht.flags|=4;var a=Ht.updateQueue;if(a===null)a=qc(),Ht.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function a1(i){var a=He().memoizedState;return QA({ref:a,nextImpl:i}),function(){if((ee&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function r1(i,a){return $c(4,2,i,a)}function o1(i,a){return $c(4,4,i,a)}function l1(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function c1(i,a,l){l=l!=null?l.concat([i]):null,$c(4,4,l1.bind(null,a,i),l)}function Qd(){}function u1(i,a){var l=He();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Hd(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function h1(i,a){var l=He();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Hd(a,h[1]))return h[0];if(h=i(),Pa){mn(!0);try{i()}finally{mn(!1)}}return l.memoizedState=[h,a],h}function Jd(i,a,l){return l===void 0||(_s&1073741824)!==0&&(Yt&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=d2(),Ht.lanes|=i,ta|=i,l)}function d1(i,a,l,h){return qi(l,a)?l:Nr.current!==null?(i=Jd(i,l,h),qi(i,a)||(Ke=!0),i):(_s&42)===0||(_s&1073741824)!==0&&(Yt&261930)===0?(Ke=!0,i.memoizedState=l):(i=d2(),Ht.lanes|=i,ta|=i,a)}function f1(i,a,l,h,g){var y=H.p;H.p=y!==0&&8>y?y:8;var E=U.T,D={};U.T=D,nf(i,!1,a,l);try{var I=g(),K=U.S;if(K!==null&&K(D,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ot=qA(I,h);cl(i,a,ot,Ji(i))}else cl(i,a,h,Ji(i))}catch(ht){cl(i,a,{then:function(){},status:"rejected",reason:ht},Ji())}finally{H.p=y,E!==null&&D.types!==null&&(E.types=D.types),U.T=E}}function JA(){}function tf(i,a,l,h){if(i.tag!==5)throw Error(n(476));var g=p1(i).queue;f1(i,g,a,ct,l===null?JA:function(){return g1(i),l(h)})}function p1(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:ct},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function g1(i){var a=p1(i);a.next===null&&(a=i.alternate.memoizedState),cl(i,a.next.queue,{},Ji())}function ef(){return _i(xl)}function m1(){return He().memoizedState}function y1(){return He().memoizedState}function t4(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Ji();i=Ks(l);var h=Ws(a,i,l);h!==null&&(Ui(h,a,l),sl(h,a,l)),a={cache:Dd()},i.payload=a;return}a=a.return}}function e4(i,a,l){var h=Ji();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qc(i)?v1(a,l):(l=vd(i,a,l,h),l!==null&&(Ui(l,i,h),_1(l,a,h)))}function b1(i,a,l){var h=Ji();cl(i,a,l,h)}function cl(i,a,l,h){var g={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Qc(i))v1(a,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var E=a.lastRenderedState,D=y(E,l);if(g.hasEagerState=!0,g.eagerState=D,qi(D,E))return Rc(i,a,g,0),be===null&&Oc(),!1}catch{}if(l=vd(i,a,g,h),l!==null)return Ui(l,i,h),_1(l,a,h),!0}return!1}function nf(i,a,l,h){if(h={lane:2,revertLane:Bf(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Qc(i)){if(a)throw Error(n(479))}else a=vd(i,l,h,2),a!==null&&Ui(a,i,2)}function Qc(i){var a=i.alternate;return i===Ht||a!==null&&a===Ht}function v1(i,a){Br=Xc=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function _1(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Tm(i,l)}}var ul={readContext:_i,use:Kc,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be};ul.useEffectEvent=Be;var A1={readContext:_i,use:Kc,useCallback:function(i,a){return Mi().memoizedState=[i,a===void 0?null:a],i},useContext:_i,useEffect:s1,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Zc(4194308,4,l1.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Zc(4194308,4,i,a)},useInsertionEffect:function(i,a){Zc(4,2,i,a)},useMemo:function(i,a){var l=Mi();a=a===void 0?null:a;var h=i();if(Pa){mn(!0);try{i()}finally{mn(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=Mi();if(l!==void 0){var g=l(a);if(Pa){mn(!0);try{l(a)}finally{mn(!1)}}}else g=a;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=e4.bind(null,Ht,i),[h.memoizedState,i]},useRef:function(i){var a=Mi();return i={current:i},a.memoizedState=i},useState:function(i){i=Wd(i);var a=i.queue,l=b1.bind(null,Ht,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Qd,useDeferredValue:function(i,a){var l=Mi();return Jd(l,i,a)},useTransition:function(){var i=Wd(!1);return i=f1.bind(null,Ht,i.queue,!0,!1),Mi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=Ht,g=Mi();if(Kt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),be===null)throw Error(n(349));(Yt&127)!==0||j0(h,a,l)}g.memoizedState=l;var y={value:l,getSnapshot:a};return g.queue=y,s1(V0.bind(null,h,y,i),[i]),h.flags|=2048,Fr(9,{destroy:void 0},G0.bind(null,h,y,l,a),null),l},useId:function(){var i=Mi(),a=be.identifierPrefix;if(Kt){var l=Kn,h=qn;l=(h&~(1<<32-De(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Yc++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=KA++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:ef,useFormState:J0,useActionState:J0,useOptimistic:function(i){var a=Mi();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=nf.bind(null,Ht,!0,l),l.dispatch=a,[i,a]},useMemoCache:Yd,useCacheRefresh:function(){return Mi().memoizedState=t4.bind(null,Ht)},useEffectEvent:function(i){var a=Mi(),l={impl:i};return a.memoizedState=l,function(){if((ee&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},sf={readContext:_i,use:Kc,useCallback:u1,useContext:_i,useEffect:$d,useImperativeHandle:c1,useInsertionEffect:r1,useLayoutEffect:o1,useMemo:h1,useReducer:Wc,useRef:n1,useState:function(){return Wc(As)},useDebugValue:Qd,useDeferredValue:function(i,a){var l=He();return d1(l,de.memoizedState,i,a)},useTransition:function(){var i=Wc(As)[0],a=He().memoizedState;return[typeof i=="boolean"?i:ll(i),a]},useSyncExternalStore:H0,useId:m1,useHostTransitionStatus:ef,useFormState:t1,useActionState:t1,useOptimistic:function(i,a){var l=He();return q0(l,de,i,a)},useMemoCache:Yd,useCacheRefresh:y1};sf.useEffectEvent=a1;var w1={readContext:_i,use:Kc,useCallback:u1,useContext:_i,useEffect:$d,useImperativeHandle:c1,useInsertionEffect:r1,useLayoutEffect:o1,useMemo:h1,useReducer:Kd,useRef:n1,useState:function(){return Kd(As)},useDebugValue:Qd,useDeferredValue:function(i,a){var l=He();return de===null?Jd(l,i,a):d1(l,de.memoizedState,i,a)},useTransition:function(){var i=Kd(As)[0],a=He().memoizedState;return[typeof i=="boolean"?i:ll(i),a]},useSyncExternalStore:H0,useId:m1,useHostTransitionStatus:ef,useFormState:i1,useActionState:i1,useOptimistic:function(i,a){var l=He();return de!==null?q0(l,de,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:y1};w1.useEffectEvent=a1;function af(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:m({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var rf={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=Ji(),g=Ks(h);g.payload=a,l!=null&&(g.callback=l),a=Ws(i,g,h),a!==null&&(Ui(a,i,h),sl(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=Ji(),g=Ks(h);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Ws(i,g,h),a!==null&&(Ui(a,i,h),sl(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Ji(),h=Ks(l);h.tag=2,a!=null&&(h.callback=a),a=Ws(i,h,l),a!==null&&(Ui(a,i,l),sl(a,i,l))}};function S1(i,a,l,h,g,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,E):a.prototype&&a.prototype.isPureReactComponent?!Zo(l,h)||!Zo(g,y):!0}function E1(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&rf.enqueueReplaceState(a,a.state,null)}function Ia(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=m({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function T1(i){Dc(i)}function x1(i){console.error(i)}function C1(i){Dc(i)}function Jc(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function k1(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function of(i,a,l){return l=Ks(l),l.tag=3,l.payload={element:null},l.callback=function(){Jc(i,a)},l}function M1(i){return i=Ks(i),i.tag=3,i}function D1(i,a,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;i.payload=function(){return g(y)},i.callback=function(){k1(a,l,h)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){k1(a,l,h),typeof g!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var D=h.stack;this.componentDidCatch(h.value,{componentStack:D!==null?D:""})})}function i4(i,a,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&Mr(a,l,g,!0),l=Wi.current,l!==null){switch(l.tag){case 31:case 13:return Tn===null?hu():l.alternate===null&&ze===0&&(ze=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===Uc?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Rf(i,h,g)),!1;case 22:return l.flags|=65536,h===Uc?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Rf(i,h,g)),!1}throw Error(n(435,l.tag))}return Rf(i,h,g),hu(),!1}if(Kt)return a=Wi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==Td&&(i=Error(n(422),{cause:h}),Jo(An(i,l)))):(h!==Td&&(a=Error(n(423),{cause:h}),Jo(An(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=An(h,l),g=of(i.stateNode,h,g),zd(i,g),ze!==4&&(ze=2)),!1;var y=Error(n(520),{cause:h});if(y=An(y,l),bl===null?bl=[y]:bl.push(y),ze!==4&&(ze=2),a===null)return!0;h=An(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=of(l.stateNode,h,i),zd(l,i),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ea===null||!ea.has(y))))return l.flags|=65536,g&=-g,l.lanes|=g,g=M1(g),D1(g,i,l,h),zd(l,g),!1}l=l.return}while(l!==null);return!1}var lf=Error(n(461)),Ke=!1;function Ai(i,a,l,h){a.child=i===null?N0(a,null,l,h):Fa(a,i.child,l,h)}function O1(i,a,l,h,g){l=l.render;var y=a.ref;if("ref"in h){var E={};for(var D in h)D!=="ref"&&(E[D]=h[D])}else E=h;return La(a),h=jd(i,a,l,E,y,g),D=Gd(),i!==null&&!Ke?(Vd(i,a,g),ws(i,a,g)):(Kt&&D&&Sd(a),a.flags|=1,Ai(i,a,h,g),a.child)}function R1(i,a,l,h,g){if(i===null){var y=l.type;return typeof y=="function"&&!_d(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,L1(i,a,y,h,g)):(i=Nc(l.type,null,h,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!mf(i,g)){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:Zo,l(E,h)&&i.ref===a.ref)return ws(i,a,g)}return a.flags|=1,i=ms(y,h),i.ref=a.ref,i.return=a,a.child=i}function L1(i,a,l,h,g){if(i!==null){var y=i.memoizedProps;if(Zo(y,h)&&i.ref===a.ref)if(Ke=!1,a.pendingProps=h=y,mf(i,g))(i.flags&131072)!==0&&(Ke=!0);else return a.lanes=i.lanes,ws(i,a,g)}return cf(i,a,l,h,g)}function N1(i,a,l,h){var g=h.children,y=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(h=a.child=i.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~y}else h=0,a.child=null;return B1(i,a,y,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Pc(a,y!==null?y.cachePool:null),y!==null?F0(a,y):Pd(),P0(a);else return h=a.lanes=536870912,B1(i,a,y!==null?y.baseLanes|l:l,l,h)}else y!==null?(Pc(a,y.cachePool),F0(a,y),$s(),a.memoizedState=null):(i!==null&&Pc(a,null),Pd(),$s());return Ai(i,a,g,l),a.child}function hl(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function B1(i,a,l,h,g){var y=Rd();return y=y===null?null:{parent:Ye._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},i!==null&&Pc(a,null),Pd(),P0(a),i!==null&&Mr(i,a,h,!0),a.childLanes=g,null}function tu(i,a){return a=iu({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function z1(i,a,l){return Fa(a,i.child,null,l),i=tu(a,a.pendingProps),i.flags|=2,Zi(a),a.memoizedState=null,i}function n4(i,a,l){var h=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(Kt){if(h.mode==="hidden")return i=tu(a,h),a.lanes=536870912,hl(null,i);if(Ud(a),(i=Ae)?(i=K2(i,En),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Gs!==null?{id:qn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},l=v0(i),l.return=a,a.child=l,vi=a,Ae=null)):i=null,i===null)throw Xs(a);return a.lanes=536870912,null}return tu(a,h)}var y=i.memoizedState;if(y!==null){var E=y.dehydrated;if(Ud(a),g)if(a.flags&256)a.flags&=-257,a=z1(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(Ke||Mr(i,a,l,!1),g=(l&i.childLanes)!==0,Ke||g){if(h=be,h!==null&&(E=xm(h,l),E!==0&&E!==y.retryLane))throw y.retryLane=E,Ma(i,E),Ui(h,i,E),lf;hu(),a=z1(i,a,l)}else i=y.treeContext,Ae=xn(E.nextSibling),vi=a,Kt=!0,Vs=null,En=!1,i!==null&&w0(a,i),a=tu(a,h),a.flags|=4096;return a}return i=ms(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function eu(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function cf(i,a,l,h,g){return La(a),l=jd(i,a,l,h,void 0,g),h=Gd(),i!==null&&!Ke?(Vd(i,a,g),ws(i,a,g)):(Kt&&h&&Sd(a),a.flags|=1,Ai(i,a,l,g),a.child)}function F1(i,a,l,h,g,y){return La(a),a.updateQueue=null,l=U0(a,h,l,g),I0(i),h=Gd(),i!==null&&!Ke?(Vd(i,a,y),ws(i,a,y)):(Kt&&h&&Sd(a),a.flags|=1,Ai(i,a,l,y),a.child)}function P1(i,a,l,h,g){if(La(a),a.stateNode===null){var y=Tr,E=l.contextType;typeof E=="object"&&E!==null&&(y=_i(E)),y=new l(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=rf,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Nd(a),E=l.contextType,y.context=typeof E=="object"&&E!==null?_i(E):Tr,y.state=a.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(af(a,l,E,h),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&rf.enqueueReplaceState(y,y.state,null),rl(a,h,y,g),al(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){y=a.stateNode;var D=a.memoizedProps,I=Ia(l,D);y.props=I;var K=y.context,ot=l.contextType;E=Tr,typeof ot=="object"&&ot!==null&&(E=_i(ot));var ht=l.getDerivedStateFromProps;ot=typeof ht=="function"||typeof y.getSnapshotBeforeUpdate=="function",D=a.pendingProps!==D,ot||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D||K!==E)&&E1(a,y,h,E),qs=!1;var Q=a.memoizedState;y.state=Q,rl(a,h,y,g),al(),K=a.memoizedState,D||Q!==K||qs?(typeof ht=="function"&&(af(a,l,ht,h),K=a.memoizedState),(I=qs||S1(a,l,I,h,Q,K,E))?(ot||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=K),y.props=h,y.state=K,y.context=E,h=I):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,Bd(i,a),E=a.memoizedProps,ot=Ia(l,E),y.props=ot,ht=a.pendingProps,Q=y.context,K=l.contextType,I=Tr,typeof K=="object"&&K!==null&&(I=_i(K)),D=l.getDerivedStateFromProps,(K=typeof D=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==ht||Q!==I)&&E1(a,y,h,I),qs=!1,Q=a.memoizedState,y.state=Q,rl(a,h,y,g),al();var et=a.memoizedState;E!==ht||Q!==et||qs||i!==null&&i.dependencies!==null&&zc(i.dependencies)?(typeof D=="function"&&(af(a,l,D,h),et=a.memoizedState),(ot=qs||S1(a,l,ot,h,Q,et,I)||i!==null&&i.dependencies!==null&&zc(i.dependencies))?(K||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,et,I),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,et,I)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=et),y.props=h,y.state=et,y.context=I,h=ot):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=1024),h=!1)}return y=h,eu(i,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&h?(a.child=Fa(a,i.child,null,g),a.child=Fa(a,null,l,g)):Ai(i,a,l,g),a.memoizedState=y.state,i=a.child):i=ws(i,a,g),i}function I1(i,a,l,h){return Oa(),a.flags|=256,Ai(i,a,l,h),a.child}var uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hf(i){return{baseLanes:i,cachePool:k0()}}function df(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Qi),i}function U1(i,a,l){var h=a.pendingProps,g=!1,y=(a.flags&128)!==0,E;if((E=y)||(E=i!==null&&i.memoizedState===null?!1:(Ue.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(Kt){if(g?Zs(a):$s(),(i=Ae)?(i=K2(i,En),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Gs!==null?{id:qn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},l=v0(i),l.return=a,a.child=l,vi=a,Ae=null)):i=null,i===null)throw Xs(a);return Kf(i)?a.lanes=32:a.lanes=536870912,null}var D=h.children;return h=h.fallback,g?($s(),g=a.mode,D=iu({mode:"hidden",children:D},g),h=Da(h,g,l,null),D.return=a,h.return=a,D.sibling=h,a.child=D,h=a.child,h.memoizedState=hf(l),h.childLanes=df(i,E,l),a.memoizedState=uf,hl(null,h)):(Zs(a),ff(a,D))}var I=i.memoizedState;if(I!==null&&(D=I.dehydrated,D!==null)){if(y)a.flags&256?(Zs(a),a.flags&=-257,a=pf(i,a,l)):a.memoizedState!==null?($s(),a.child=i.child,a.flags|=128,a=null):($s(),D=h.fallback,g=a.mode,h=iu({mode:"visible",children:h.children},g),D=Da(D,g,l,null),D.flags|=2,h.return=a,D.return=a,h.sibling=D,a.child=h,Fa(a,i.child,null,l),h=a.child,h.memoizedState=hf(l),h.childLanes=df(i,E,l),a.memoizedState=uf,a=hl(null,h));else if(Zs(a),Kf(D)){if(E=D.nextSibling&&D.nextSibling.dataset,E)var K=E.dgst;E=K,h=Error(n(419)),h.stack="",h.digest=E,Jo({value:h,source:null,stack:null}),a=pf(i,a,l)}else if(Ke||Mr(i,a,l,!1),E=(l&i.childLanes)!==0,Ke||E){if(E=be,E!==null&&(h=xm(E,l),h!==0&&h!==I.retryLane))throw I.retryLane=h,Ma(i,h),Ui(E,i,h),lf;qf(D)||hu(),a=pf(i,a,l)}else qf(D)?(a.flags|=192,a.child=i.child,a=null):(i=I.treeContext,Ae=xn(D.nextSibling),vi=a,Kt=!0,Vs=null,En=!1,i!==null&&w0(a,i),a=ff(a,h.children),a.flags|=4096);return a}return g?($s(),D=h.fallback,g=a.mode,I=i.child,K=I.sibling,h=ms(I,{mode:"hidden",children:h.children}),h.subtreeFlags=I.subtreeFlags&65011712,K!==null?D=ms(K,D):(D=Da(D,g,l,null),D.flags|=2),D.return=a,h.return=a,h.sibling=D,a.child=h,hl(null,h),h=a.child,D=i.child.memoizedState,D===null?D=hf(l):(g=D.cachePool,g!==null?(I=Ye._currentValue,g=g.parent!==I?{parent:I,pool:I}:g):g=k0(),D={baseLanes:D.baseLanes|l,cachePool:g}),h.memoizedState=D,h.childLanes=df(i,E,l),a.memoizedState=uf,hl(i.child,h)):(Zs(a),l=i.child,i=l.sibling,l=ms(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=l,a.memoizedState=null,l)}function ff(i,a){return a=iu({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function iu(i,a){return i=Ki(22,i,null,a),i.lanes=0,i}function pf(i,a,l){return Fa(a,i.child,null,l),i=ff(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function H1(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),kd(i.return,a,l)}function gf(i,a,l,h,g,y){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g,treeForkCount:y}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=l,E.tailMode=g,E.treeForkCount=y)}function j1(i,a,l){var h=a.pendingProps,g=h.revealOrder,y=h.tail;h=h.children;var E=Ue.current,D=(E&2)!==0;if(D?(E=E&1|2,a.flags|=128):E&=1,J(Ue,E),Ai(i,a,h,l),h=Kt?Qo:0,!D&&i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&H1(i,l,a);else if(i.tag===19)H1(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&Vc(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),gf(a,!1,g,l,y,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Vc(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}gf(a,!0,l,null,y,h);break;case"together":gf(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ws(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),ta|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Mr(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=ms(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=ms(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function mf(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&zc(i)))}function s4(i,a,l){switch(a.tag){case 3:Dt(a,a.stateNode.containerInfo),Ys(a,Ye,i.memoizedState.cache),Oa();break;case 27:case 5:ve(a);break;case 4:Dt(a,a.stateNode.containerInfo);break;case 10:Ys(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ud(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Zs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?U1(i,a,l):(Zs(a),i=ws(i,a,l),i!==null?i.sibling:null);Zs(a);break;case 19:var g=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(Mr(i,a,l,!1),h=(l&a.childLanes)!==0),g){if(h)return j1(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),J(Ue,Ue.current),h)break;return null;case 22:return a.lanes=0,N1(i,a,l,a.pendingProps);case 24:Ys(a,Ye,i.memoizedState.cache)}return ws(i,a,l)}function G1(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)Ke=!0;else{if(!mf(i,l)&&(a.flags&128)===0)return Ke=!1,s4(i,a,l);Ke=(i.flags&131072)!==0}else Ke=!1,Kt&&(a.flags&1048576)!==0&&A0(a,Qo,a.index);switch(a.lanes=0,a.tag){case 16:t:{var h=a.pendingProps;if(i=Ba(a.elementType),a.type=i,typeof i=="function")_d(i)?(h=Ia(i,h),a.tag=1,a=P1(null,a,i,h,l)):(a.tag=0,a=cf(null,a,i,h,l));else{if(i!=null){var g=i.$$typeof;if(g===R){a.tag=11,a=O1(null,a,i,h,l);break t}else if(g===N){a.tag=14,a=R1(null,a,i,h,l);break t}}throw a=k(i)||i,Error(n(306,a,""))}}return a;case 0:return cf(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,g=Ia(h,a.pendingProps),P1(i,a,h,g,l);case 3:t:{if(Dt(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var y=a.memoizedState;g=y.element,Bd(i,a),rl(a,h,null,l);var E=a.memoizedState;if(h=E.cache,Ys(a,Ye,h),h!==y.cache&&Md(a,[Ye],l,!0),al(),h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=I1(i,a,h,l);break t}else if(h!==g){g=An(Error(n(424)),a),Jo(g),a=I1(i,a,h,l);break t}else for(i=a.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Ae=xn(i.firstChild),vi=a,Kt=!0,Vs=null,En=!0,l=N0(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Oa(),h===g){a=ws(i,a,l);break t}Ai(i,a,h,l)}a=a.child}return a;case 26:return eu(i,a),i===null?(l=ty(a.type,null,a.pendingProps,null))?a.memoizedState=l:Kt||(l=a.type,i=a.pendingProps,h=bu(_t.current).createElement(l),h[bi]=a,h[Ni]=i,wi(h,l,i),ci(h),a.stateNode=h):a.memoizedState=ty(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return ve(a),i===null&&Kt&&(h=a.stateNode=$2(a.type,a.pendingProps,_t.current),vi=a,En=!0,g=Ae,aa(a.type)?(Wf=g,Ae=xn(h.firstChild)):Ae=g),Ai(i,a,a.pendingProps.children,l),eu(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Kt&&((g=h=Ae)&&(h=N4(h,a.type,a.pendingProps,En),h!==null?(a.stateNode=h,vi=a,Ae=xn(h.firstChild),En=!1,g=!0):g=!1),g||Xs(a)),ve(a),g=a.type,y=a.pendingProps,E=i!==null?i.memoizedProps:null,h=y.children,Vf(g,y)?h=null:E!==null&&Vf(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=jd(i,a,WA,null,null,l),xl._currentValue=g),eu(i,a),Ai(i,a,h,l),a.child;case 6:return i===null&&Kt&&((i=l=Ae)&&(l=B4(l,a.pendingProps,En),l!==null?(a.stateNode=l,vi=a,Ae=null,i=!0):i=!1),i||Xs(a)),null;case 13:return U1(i,a,l);case 4:return Dt(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Fa(a,null,h,l):Ai(i,a,h,l),a.child;case 11:return O1(i,a,a.type,a.pendingProps,l);case 7:return Ai(i,a,a.pendingProps,l),a.child;case 8:return Ai(i,a,a.pendingProps.children,l),a.child;case 12:return Ai(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Ys(a,a.type,h.value),Ai(i,a,h.children,l),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,La(a),g=_i(g),h=h(g),a.flags|=1,Ai(i,a,h,l),a.child;case 14:return R1(i,a,a.type,a.pendingProps,l);case 15:return L1(i,a,a.type,a.pendingProps,l);case 19:return j1(i,a,l);case 31:return n4(i,a,l);case 22:return N1(i,a,l,a.pendingProps);case 24:return La(a),h=_i(Ye),i===null?(g=Rd(),g===null&&(g=be,y=Dd(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=l),g=y),a.memoizedState={parent:h,cache:g},Nd(a),Ys(a,Ye,g)):((i.lanes&l)!==0&&(Bd(i,a),rl(a,null,null,l),al()),g=i.memoizedState,y=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Ys(a,Ye,h)):(h=y.cache,Ys(a,Ye,h),h!==g.cache&&Md(a,[Ye],l,!0))),Ai(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function Ss(i){i.flags|=4}function yf(i,a,l,h,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(m2())i.flags|=8192;else throw za=Uc,Ld}else i.flags&=-16777217}function V1(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ay(a))if(m2())i.flags|=8192;else throw za=Uc,Ld}function nu(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Sm():536870912,i.lanes|=a,Hr|=a)}function dl(i,a){if(!Kt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function we(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function a4(i,a,l){var h=a.pendingProps;switch(Ed(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(a),null;case 1:return we(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),vs(Ye),xt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(kr(a)?Ss(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,xd())),we(a),null;case 26:var g=a.type,y=a.memoizedState;return i===null?(Ss(a),y!==null?(we(a),V1(a,y)):(we(a),yf(a,g,null,h,l))):y?y!==i.memoizedState?(Ss(a),we(a),V1(a,y)):(we(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&Ss(a),we(a),yf(a,g,i,h,l)),null;case 27:if(le(a),l=_t.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return we(a),null}i=it.current,kr(a)?S0(a):(i=$2(g,h,l),a.stateNode=i,Ss(a))}return we(a),null;case 5:if(le(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return we(a),null}if(y=it.current,kr(a))S0(a);else{var E=bu(_t.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?E.createElement("select",{is:h.is}):E.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?E.createElement(g,{is:h.is}):E.createElement(g)}}y[bi]=a,y[Ni]=h;t:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break t;for(;E.sibling===null;){if(E.return===null||E.return===a)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=y;t:switch(wi(y,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&Ss(a)}}return we(a),yf(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&Ss(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=_t.current,kr(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,g=vi,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[bi]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||U2(i.nodeValue,l)),i||Xs(a,!0)}else i=bu(i).createTextNode(h),i[bi]=a,a.stateNode=i}return we(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=kr(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[bi]=a}else Oa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;we(a),i=!1}else l=xd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(Zi(a),a):(Zi(a),null);if((a.flags&128)!==0)throw Error(n(558))}return we(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=kr(a),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[bi]=a}else Oa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;we(a),g=!1}else g=xd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Zi(a),a):(Zi(a),null)}return Zi(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),nu(a,a.updateQueue),we(a),null);case 4:return xt(),i===null&&If(a.stateNode.containerInfo),we(a),null;case 10:return vs(a.type),we(a),null;case 19:if(L(Ue),h=a.memoizedState,h===null)return we(a),null;if(g=(a.flags&128)!==0,y=h.rendering,y===null)if(g)dl(h,!1);else{if(ze!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=Vc(i),y!==null){for(a.flags|=128,dl(h,!1),i=y.updateQueue,a.updateQueue=i,nu(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)b0(l,i),l=l.sibling;return J(Ue,Ue.current&1|2),Kt&&ys(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&yt()>lu&&(a.flags|=128,g=!0,dl(h,!1),a.lanes=4194304)}else{if(!g)if(i=Vc(y),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,nu(a,i),dl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!Kt)return we(a),null}else 2*yt()-h.renderingStartTime>lu&&l!==536870912&&(a.flags|=128,g=!0,dl(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(i=h.last,i!==null?i.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=yt(),i.sibling=null,l=Ue.current,J(Ue,g?l&1|2:l&1),Kt&&ys(a,h.treeForkCount),i):(we(a),null);case 22:case 23:return Zi(a),Id(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(we(a),a.subtreeFlags&6&&(a.flags|=8192)):we(a),l=a.updateQueue,l!==null&&nu(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&L(Na),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),vs(Ye),we(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function r4(i,a){switch(Ed(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return vs(Ye),xt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return le(a),null;case 31:if(a.memoizedState!==null){if(Zi(a),a.alternate===null)throw Error(n(340));Oa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Zi(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Oa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return L(Ue),null;case 4:return xt(),null;case 10:return vs(a.type),null;case 22:case 23:return Zi(a),Id(),i!==null&&L(Na),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return vs(Ye),null;case 25:return null;default:return null}}function X1(i,a){switch(Ed(a),a.tag){case 3:vs(Ye),xt();break;case 26:case 27:case 5:le(a);break;case 4:xt();break;case 31:a.memoizedState!==null&&Zi(a);break;case 13:Zi(a);break;case 19:L(Ue);break;case 10:vs(a.type);break;case 22:case 23:Zi(a),Id(),i!==null&&L(Na);break;case 24:vs(Ye)}}function fl(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var y=l.create,E=l.inst;h=y(),E.destroy=h}l=l.next}while(l!==g)}}catch(D){he(a,a.return,D)}}function Qs(i,a,l){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&i)===i){var E=h.inst,D=E.destroy;if(D!==void 0){E.destroy=void 0,g=a;var I=l,K=D;try{K()}catch(ot){he(g,I,ot)}}}h=h.next}while(h!==y)}}catch(ot){he(a,a.return,ot)}}function Y1(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{z0(a,l)}catch(h){he(i,i.return,h)}}}function q1(i,a,l){l.props=Ia(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){he(i,a,h)}}function pl(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){he(i,a,g)}}function Wn(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){he(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){he(i,a,g)}else l.current=null}function K1(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){he(i,i.return,g)}}function bf(i,a,l){try{var h=i.stateNode;k4(h,i.type,l,a),h[Ni]=a}catch(g){he(i,i.return,g)}}function W1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&aa(i.type)||i.tag===4}function vf(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||W1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&aa(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _f(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ps));else if(h!==4&&(h===27&&aa(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(_f(i,a,l),i=i.sibling;i!==null;)_f(i,a,l),i=i.sibling}function su(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&aa(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(su(i,a,l),i=i.sibling;i!==null;)su(i,a,l),i=i.sibling}function Z1(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);wi(a,h,l),a[bi]=i,a[Ni]=l}catch(y){he(i,i.return,y)}}var Es=!1,We=!1,Af=!1,$1=typeof WeakSet=="function"?WeakSet:Set,ui=null;function o4(i,a){if(i=i.containerInfo,jf=Tu,i=c0(i),fd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var E=0,D=-1,I=-1,K=0,ot=0,ht=i,Q=null;e:for(;;){for(var et;ht!==l||g!==0&&ht.nodeType!==3||(D=E+g),ht!==y||h!==0&&ht.nodeType!==3||(I=E+h),ht.nodeType===3&&(E+=ht.nodeValue.length),(et=ht.firstChild)!==null;)Q=ht,ht=et;for(;;){if(ht===i)break e;if(Q===l&&++K===g&&(D=E),Q===y&&++ot===h&&(I=E),(et=ht.nextSibling)!==null)break;ht=Q,Q=ht.parentNode}ht=et}l=D===-1||I===-1?null:{start:D,end:I}}else l=null}l=l||{start:0,end:0}}else l=null;for(Gf={focusedElem:i,selectionRange:l},Tu=!1,ui=a;ui!==null;)if(a=ui,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ui=i;else for(;ui!==null;){switch(a=ui,y=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=a,g=y.memoizedProps,y=y.memoizedState,h=l.stateNode;try{var St=Ia(l.type,g);i=h.getSnapshotBeforeUpdate(St,y),h.__reactInternalSnapshotBeforeUpdate=i}catch(Bt){he(l,l.return,Bt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Yf(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,ui=i;break}ui=a.return}}function Q1(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:xs(i,l),h&4&&fl(5,l);break;case 1:if(xs(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(E){he(l,l.return,E)}else{var g=Ia(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(E){he(l,l.return,E)}}h&64&&Y1(l),h&512&&pl(l,l.return);break;case 3:if(xs(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{z0(i,a)}catch(E){he(l,l.return,E)}}break;case 27:a===null&&h&4&&Z1(l);case 26:case 5:xs(i,l),a===null&&h&4&&K1(l),h&512&&pl(l,l.return);break;case 12:xs(i,l);break;case 31:xs(i,l),h&4&&e2(i,l);break;case 13:xs(i,l),h&4&&i2(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=m4.bind(null,l),z4(i,l))));break;case 22:if(h=l.memoizedState!==null||Es,!h){a=a!==null&&a.memoizedState!==null||We,g=Es;var y=We;Es=h,(We=a)&&!y?Cs(i,l,(l.subtreeFlags&8772)!==0):xs(i,l),Es=g,We=y}break;case 30:break;default:xs(i,l)}}function J1(i){var a=i.alternate;a!==null&&(i.alternate=null,J1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Zh(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Se=null,zi=!1;function Ts(i,a,l){for(l=l.child;l!==null;)t2(i,a,l),l=l.sibling}function t2(i,a,l){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(ye,l)}catch{}switch(l.tag){case 26:We||Wn(l,a),Ts(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:We||Wn(l,a);var h=Se,g=zi;aa(l.type)&&(Se=l.stateNode,zi=!1),Ts(i,a,l),Sl(l.stateNode),Se=h,zi=g;break;case 5:We||Wn(l,a);case 6:if(h=Se,g=zi,Se=null,Ts(i,a,l),Se=h,zi=g,Se!==null)if(zi)try{(Se.nodeType===9?Se.body:Se.nodeName==="HTML"?Se.ownerDocument.body:Se).removeChild(l.stateNode)}catch(y){he(l,a,y)}else try{Se.removeChild(l.stateNode)}catch(y){he(l,a,y)}break;case 18:Se!==null&&(zi?(i=Se,Y2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Wr(i)):Y2(Se,l.stateNode));break;case 4:h=Se,g=zi,Se=l.stateNode.containerInfo,zi=!0,Ts(i,a,l),Se=h,zi=g;break;case 0:case 11:case 14:case 15:Qs(2,l,a),We||Qs(4,l,a),Ts(i,a,l);break;case 1:We||(Wn(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&q1(l,a,h)),Ts(i,a,l);break;case 21:Ts(i,a,l);break;case 22:We=(h=We)||l.memoizedState!==null,Ts(i,a,l),We=h;break;default:Ts(i,a,l)}}function e2(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Wr(i)}catch(l){he(a,a.return,l)}}}function i2(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Wr(i)}catch(l){he(a,a.return,l)}}function l4(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new $1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new $1),a;default:throw Error(n(435,i.tag))}}function au(i,a){var l=l4(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var g=y4.bind(null,i,h);h.then(g,g)}})}function Fi(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],y=i,E=a,D=E;t:for(;D!==null;){switch(D.tag){case 27:if(aa(D.type)){Se=D.stateNode,zi=!1;break t}break;case 5:Se=D.stateNode,zi=!1;break t;case 3:case 4:Se=D.stateNode.containerInfo,zi=!0;break t}D=D.return}if(Se===null)throw Error(n(160));t2(y,E,g),Se=null,zi=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)n2(a,i),a=a.sibling}var In=null;function n2(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Fi(a,i),Pi(i),h&4&&(Qs(3,i,i.return),fl(3,i),Qs(5,i,i.return));break;case 1:Fi(a,i),Pi(i),h&512&&(We||l===null||Wn(l,l.return)),h&64&&Es&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=In;if(Fi(a,i),Pi(i),h&512&&(We||l===null||Wn(l,l.return)),h&4){var y=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){t:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;e:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Ho]||y[bi]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),wi(y,h,l),y[bi]=i,ci(y),h=y;break t;case"link":var E=ny("link","href",g).get(h+(l.href||""));if(E){for(var D=0;D<E.length;D++)if(y=E[D],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(D,1);break e}}y=g.createElement(h),wi(y,h,l),g.head.appendChild(y);break;case"meta":if(E=ny("meta","content",g).get(h+(l.content||""))){for(D=0;D<E.length;D++)if(y=E[D],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(D,1);break e}}y=g.createElement(h),wi(y,h,l),g.head.appendChild(y);break;default:throw Error(n(468,h))}y[bi]=i,ci(y),h=y}i.stateNode=h}else sy(g,i.type,i.stateNode);else i.stateNode=iy(g,h,i.memoizedProps);else y!==h?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,h===null?sy(g,i.type,i.stateNode):iy(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&bf(i,i.memoizedProps,l.memoizedProps)}break;case 27:Fi(a,i),Pi(i),h&512&&(We||l===null||Wn(l,l.return)),l!==null&&h&4&&bf(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Fi(a,i),Pi(i),h&512&&(We||l===null||Wn(l,l.return)),i.flags&32){g=i.stateNode;try{br(g,"")}catch(St){he(i,i.return,St)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,bf(i,g,l!==null?l.memoizedProps:g)),h&1024&&(Af=!0);break;case 6:if(Fi(a,i),Pi(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(St){he(i,i.return,St)}}break;case 3:if(Au=null,g=In,In=vu(a.containerInfo),Fi(a,i),In=g,Pi(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Wr(a.containerInfo)}catch(St){he(i,i.return,St)}Af&&(Af=!1,s2(i));break;case 4:h=In,In=vu(i.stateNode.containerInfo),Fi(a,i),Pi(i),In=h;break;case 12:Fi(a,i),Pi(i);break;case 31:Fi(a,i),Pi(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,au(i,h)));break;case 13:Fi(a,i),Pi(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ou=yt()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,au(i,h)));break;case 22:g=i.memoizedState!==null;var I=l!==null&&l.memoizedState!==null,K=Es,ot=We;if(Es=K||g,We=ot||I,Fi(a,i),We=ot,Es=K,Pi(i),h&8192)t:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||I||Es||We||Ua(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){I=l=a;try{if(y=I.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{D=I.stateNode;var ht=I.memoizedProps.style,Q=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;D.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(St){he(I,I.return,St)}}}else if(a.tag===6){if(l===null){I=a;try{I.stateNode.nodeValue=g?"":I.memoizedProps}catch(St){he(I,I.return,St)}}}else if(a.tag===18){if(l===null){I=a;try{var et=I.stateNode;g?q2(et,!0):q2(I.stateNode,!1)}catch(St){he(I,I.return,St)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,au(i,l))));break;case 19:Fi(a,i),Pi(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,au(i,h)));break;case 30:break;case 21:break;default:Fi(a,i),Pi(i)}}function Pi(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(W1(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var g=l.stateNode,y=vf(i);su(i,y,g);break;case 5:var E=l.stateNode;l.flags&32&&(br(E,""),l.flags&=-33);var D=vf(i);su(i,D,E);break;case 3:case 4:var I=l.stateNode.containerInfo,K=vf(i);_f(i,K,I);break;default:throw Error(n(161))}}catch(ot){he(i,i.return,ot)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function s2(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;s2(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function xs(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Q1(i,a.alternate,a),a=a.sibling}function Ua(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Qs(4,a,a.return),Ua(a);break;case 1:Wn(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&q1(a,a.return,l),Ua(a);break;case 27:Sl(a.stateNode);case 26:case 5:Wn(a,a.return),Ua(a);break;case 22:a.memoizedState===null&&Ua(a);break;case 30:Ua(a);break;default:Ua(a)}i=i.sibling}}function Cs(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=i,y=a,E=y.flags;switch(y.tag){case 0:case 11:case 15:Cs(g,y,l),fl(4,y);break;case 1:if(Cs(g,y,l),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(K){he(h,h.return,K)}if(h=y,g=h.updateQueue,g!==null){var D=h.stateNode;try{var I=g.shared.hiddenCallbacks;if(I!==null)for(g.shared.hiddenCallbacks=null,g=0;g<I.length;g++)B0(I[g],D)}catch(K){he(h,h.return,K)}}l&&E&64&&Y1(y),pl(y,y.return);break;case 27:Z1(y);case 26:case 5:Cs(g,y,l),l&&h===null&&E&4&&K1(y),pl(y,y.return);break;case 12:Cs(g,y,l);break;case 31:Cs(g,y,l),l&&E&4&&e2(g,y);break;case 13:Cs(g,y,l),l&&E&4&&i2(g,y);break;case 22:y.memoizedState===null&&Cs(g,y,l),pl(y,y.return);break;case 30:break;default:Cs(g,y,l)}a=a.sibling}}function wf(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&tl(l))}function Sf(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&tl(i))}function Un(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)a2(i,a,l,h),a=a.sibling}function a2(i,a,l,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Un(i,a,l,h),g&2048&&fl(9,a);break;case 1:Un(i,a,l,h);break;case 3:Un(i,a,l,h),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&tl(i)));break;case 12:if(g&2048){Un(i,a,l,h),i=a.stateNode;try{var y=a.memoizedProps,E=y.id,D=y.onPostCommit;typeof D=="function"&&D(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(I){he(a,a.return,I)}}else Un(i,a,l,h);break;case 31:Un(i,a,l,h);break;case 13:Un(i,a,l,h);break;case 23:break;case 22:y=a.stateNode,E=a.alternate,a.memoizedState!==null?y._visibility&2?Un(i,a,l,h):gl(i,a):y._visibility&2?Un(i,a,l,h):(y._visibility|=2,Pr(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),g&2048&&wf(E,a);break;case 24:Un(i,a,l,h),g&2048&&Sf(a.alternate,a);break;default:Un(i,a,l,h)}}function Pr(i,a,l,h,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=i,E=a,D=l,I=h,K=E.flags;switch(E.tag){case 0:case 11:case 15:Pr(y,E,D,I,g),fl(8,E);break;case 23:break;case 22:var ot=E.stateNode;E.memoizedState!==null?ot._visibility&2?Pr(y,E,D,I,g):gl(y,E):(ot._visibility|=2,Pr(y,E,D,I,g)),g&&K&2048&&wf(E.alternate,E);break;case 24:Pr(y,E,D,I,g),g&&K&2048&&Sf(E.alternate,E);break;default:Pr(y,E,D,I,g)}a=a.sibling}}function gl(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,g=h.flags;switch(h.tag){case 22:gl(l,h),g&2048&&wf(h.alternate,h);break;case 24:gl(l,h),g&2048&&Sf(h.alternate,h);break;default:gl(l,h)}a=a.sibling}}var ml=8192;function Ir(i,a,l){if(i.subtreeFlags&ml)for(i=i.child;i!==null;)r2(i,a,l),i=i.sibling}function r2(i,a,l){switch(i.tag){case 26:Ir(i,a,l),i.flags&ml&&i.memoizedState!==null&&K4(l,In,i.memoizedState,i.memoizedProps);break;case 5:Ir(i,a,l);break;case 3:case 4:var h=In;In=vu(i.stateNode.containerInfo),Ir(i,a,l),In=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=ml,ml=16777216,Ir(i,a,l),ml=h):Ir(i,a,l));break;default:Ir(i,a,l)}}function o2(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function yl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];ui=h,c2(h,i)}o2(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)l2(i),i=i.sibling}function l2(i){switch(i.tag){case 0:case 11:case 15:yl(i),i.flags&2048&&Qs(9,i,i.return);break;case 3:yl(i);break;case 12:yl(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,ru(i)):yl(i);break;default:yl(i)}}function ru(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];ui=h,c2(h,i)}o2(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Qs(8,a,a.return),ru(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,ru(a));break;default:ru(a)}i=i.sibling}}function c2(i,a){for(;ui!==null;){var l=ui;switch(l.tag){case 0:case 11:case 15:Qs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:tl(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,ui=h;else t:for(l=i;ui!==null;){h=ui;var g=h.sibling,y=h.return;if(J1(h),h===l){ui=null;break t}if(g!==null){g.return=y,ui=g;break t}ui=y}}}var c4={getCacheForType:function(i){var a=_i(Ye),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return _i(Ye).controller.signal}},u4=typeof WeakMap=="function"?WeakMap:Map,ee=0,be=null,Vt=null,Yt=0,ue=0,$i=null,Js=!1,Ur=!1,Ef=!1,ks=0,ze=0,ta=0,Ha=0,Tf=0,Qi=0,Hr=0,bl=null,Ii=null,xf=!1,ou=0,u2=0,lu=1/0,cu=null,ea=null,ei=0,ia=null,jr=null,Ms=0,Cf=0,kf=null,h2=null,vl=0,Mf=null;function Ji(){return(ee&2)!==0&&Yt!==0?Yt&-Yt:U.T!==null?Bf():Cm()}function d2(){if(Qi===0)if((Yt&536870912)===0||Kt){var i=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),Qi=i}else Qi=536870912;return i=Wi.current,i!==null&&(i.flags|=32),Qi}function Ui(i,a,l){(i===be&&(ue===2||ue===9)||i.cancelPendingCommit!==null)&&(Gr(i,0),na(i,Yt,Qi,!1)),Uo(i,l),((ee&2)===0||i!==be)&&(i===be&&((ee&2)===0&&(Ha|=l),ze===4&&na(i,Yt,Qi,!1)),Zn(i))}function f2(i,a,l){if((ee&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||Io(i,a),g=h?f4(i,a):Of(i,a,!0),y=h;do{if(g===0){Ur&&!h&&na(i,a,0,!1);break}else{if(l=i.current.alternate,y&&!h4(l)){g=Of(i,a,!1),y=!1;continue}if(g===2){if(y=a,i.errorRecoveryDisabledLanes&y)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;t:{var D=i;g=bl;var I=D.current.memoizedState.isDehydrated;if(I&&(Gr(D,E).flags|=256),E=Of(D,E,!1),E!==2){if(Ef&&!I){D.errorRecoveryDisabledLanes|=y,Ha|=y,g=4;break t}y=Ii,Ii=g,y!==null&&(Ii===null?Ii=y:Ii.push.apply(Ii,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){Gr(i,0),na(i,a,0,!0);break}t:{switch(h=i,y=g,y){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:na(h,a,Qi,!Js);break t;case 2:Ii=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(g=ou+300-yt(),10<g)){if(na(h,a,Qi,!Js),vc(h,0,!0)!==0)break t;Ms=a,h.timeoutHandle=V2(p2.bind(null,h,l,Ii,cu,xf,a,Qi,Ha,Hr,Js,y,"Throttled",-0,0),g);break t}p2(h,l,Ii,cu,xf,a,Qi,Ha,Hr,Js,y,null,-0,0)}}break}while(!0);Zn(i)}function p2(i,a,l,h,g,y,E,D,I,K,ot,ht,Q,et){if(i.timeoutHandle=-1,ht=a.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ps},r2(a,y,ht);var St=(y&62914560)===y?ou-yt():(y&4194048)===y?u2-yt():0;if(St=W4(ht,St),St!==null){Ms=y,i.cancelPendingCommit=St(w2.bind(null,i,a,y,l,h,g,E,D,I,ot,ht,null,Q,et)),na(i,y,E,!K);return}}w2(i,a,y,l,h,g,E,D,I)}function h4(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],y=g.getSnapshot;g=g.value;try{if(!qi(y(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function na(i,a,l,h){a&=~Tf,a&=~Ha,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var g=a;0<g;){var y=31-De(g),E=1<<y;h[y]=-1,g&=~E}l!==0&&Em(i,l,a)}function uu(){return(ee&6)===0?(_l(0),!1):!0}function Df(){if(Vt!==null){if(ue===0)var i=Vt.return;else i=Vt,bs=Ra=null,Xd(i),Lr=null,il=0,i=Vt;for(;i!==null;)X1(i.alternate,i),i=i.return;Vt=null}}function Gr(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,O4(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ms=0,Df(),be=i,Vt=l=ms(i.current,null),Yt=a,ue=0,$i=null,Js=!1,Ur=Io(i,a),Ef=!1,Hr=Qi=Tf=Ha=ta=ze=0,Ii=bl=null,xf=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var g=31-De(h),y=1<<g;a|=i[g],h&=~y}return ks=a,Oc(),l}function g2(i,a){Ht=null,U.H=ul,a===Rr||a===Ic?(a=O0(),ue=3):a===Ld?(a=O0(),ue=4):ue=a===lf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,$i=a,Vt===null&&(ze=1,Jc(i,An(a,i.current)))}function m2(){var i=Wi.current;return i===null?!0:(Yt&4194048)===Yt?Tn===null:(Yt&62914560)===Yt||(Yt&536870912)!==0?i===Tn:!1}function y2(){var i=U.H;return U.H=ul,i===null?ul:i}function b2(){var i=U.A;return U.A=c4,i}function hu(){ze=4,Js||(Yt&4194048)!==Yt&&Wi.current!==null||(Ur=!0),(ta&134217727)===0&&(Ha&134217727)===0||be===null||na(be,Yt,Qi,!1)}function Of(i,a,l){var h=ee;ee|=2;var g=y2(),y=b2();(be!==i||Yt!==a)&&(cu=null,Gr(i,a)),a=!1;var E=ze;t:do try{if(ue!==0&&Vt!==null){var D=Vt,I=$i;switch(ue){case 8:Df(),E=6;break t;case 3:case 2:case 9:case 6:Wi.current===null&&(a=!0);var K=ue;if(ue=0,$i=null,Vr(i,D,I,K),l&&Ur){E=0;break t}break;default:K=ue,ue=0,$i=null,Vr(i,D,I,K)}}d4(),E=ze;break}catch(ot){g2(i,ot)}while(!0);return a&&i.shellSuspendCounter++,bs=Ra=null,ee=h,U.H=g,U.A=y,Vt===null&&(be=null,Yt=0,Oc()),E}function d4(){for(;Vt!==null;)v2(Vt)}function f4(i,a){var l=ee;ee|=2;var h=y2(),g=b2();be!==i||Yt!==a?(cu=null,lu=yt()+500,Gr(i,a)):Ur=Io(i,a);t:do try{if(ue!==0&&Vt!==null){a=Vt;var y=$i;e:switch(ue){case 1:ue=0,$i=null,Vr(i,a,y,1);break;case 2:case 9:if(M0(y)){ue=0,$i=null,_2(a);break}a=function(){ue!==2&&ue!==9||be!==i||(ue=7),Zn(i)},y.then(a,a);break t;case 3:ue=7;break t;case 4:ue=5;break t;case 7:M0(y)?(ue=0,$i=null,_2(a)):(ue=0,$i=null,Vr(i,a,y,7));break;case 5:var E=null;switch(Vt.tag){case 26:E=Vt.memoizedState;case 5:case 27:var D=Vt;if(E?ay(E):D.stateNode.complete){ue=0,$i=null;var I=D.sibling;if(I!==null)Vt=I;else{var K=D.return;K!==null?(Vt=K,du(K)):Vt=null}break e}}ue=0,$i=null,Vr(i,a,y,5);break;case 6:ue=0,$i=null,Vr(i,a,y,6);break;case 8:Df(),ze=6;break t;default:throw Error(n(462))}}p4();break}catch(ot){g2(i,ot)}while(!0);return bs=Ra=null,U.H=h,U.A=g,ee=l,Vt!==null?0:(be=null,Yt=0,Oc(),ze)}function p4(){for(;Vt!==null&&!W();)v2(Vt)}function v2(i){var a=G1(i.alternate,i,ks);i.memoizedProps=i.pendingProps,a===null?du(i):Vt=a}function _2(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=F1(l,a,a.pendingProps,a.type,void 0,Yt);break;case 11:a=F1(l,a,a.pendingProps,a.type.render,a.ref,Yt);break;case 5:Xd(a);default:X1(l,a),a=Vt=b0(a,ks),a=G1(l,a,ks)}i.memoizedProps=i.pendingProps,a===null?du(i):Vt=a}function Vr(i,a,l,h){bs=Ra=null,Xd(a),Lr=null,il=0;var g=a.return;try{if(i4(i,g,a,l,Yt)){ze=1,Jc(i,An(l,i.current)),Vt=null;return}}catch(y){if(g!==null)throw Vt=g,y;ze=1,Jc(i,An(l,i.current)),Vt=null;return}a.flags&32768?(Kt||h===1?i=!0:Ur||(Yt&536870912)!==0?i=!1:(Js=i=!0,(h===2||h===9||h===3||h===6)&&(h=Wi.current,h!==null&&h.tag===13&&(h.flags|=16384))),A2(a,i)):du(a)}function du(i){var a=i;do{if((a.flags&32768)!==0){A2(a,Js);return}i=a.return;var l=a4(a.alternate,a,ks);if(l!==null){Vt=l;return}if(a=a.sibling,a!==null){Vt=a;return}Vt=a=i}while(a!==null);ze===0&&(ze=5)}function A2(i,a){do{var l=r4(i.alternate,i);if(l!==null){l.flags&=32767,Vt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Vt=i;return}Vt=i=l}while(i!==null);ze=6,Vt=null}function w2(i,a,l,h,g,y,E,D,I){i.cancelPendingCommit=null;do fu();while(ei!==0);if((ee&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(y=a.lanes|a.childLanes,y|=bd,q_(i,l,y,E,D,I),i===be&&(Vt=be=null,Yt=0),jr=a,ia=i,Ms=l,Cf=y,kf=g,h2=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,b4(Gt,function(){return C2(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=U.T,U.T=null,g=H.p,H.p=2,E=ee,ee|=4;try{o4(i,a,l)}finally{ee=E,H.p=g,U.T=h}}ei=1,S2(),E2(),T2()}}function S2(){if(ei===1){ei=0;var i=ia,a=jr,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=U.T,U.T=null;var h=H.p;H.p=2;var g=ee;ee|=4;try{n2(a,i);var y=Gf,E=c0(i.containerInfo),D=y.focusedElem,I=y.selectionRange;if(E!==D&&D&&D.ownerDocument&&l0(D.ownerDocument.documentElement,D)){if(I!==null&&fd(D)){var K=I.start,ot=I.end;if(ot===void 0&&(ot=K),"selectionStart"in D)D.selectionStart=K,D.selectionEnd=Math.min(ot,D.value.length);else{var ht=D.ownerDocument||document,Q=ht&&ht.defaultView||window;if(Q.getSelection){var et=Q.getSelection(),St=D.textContent.length,Bt=Math.min(I.start,St),pe=I.end===void 0?Bt:Math.min(I.end,St);!et.extend&&Bt>pe&&(E=pe,pe=Bt,Bt=E);var Y=o0(D,Bt),G=o0(D,pe);if(Y&&G&&(et.rangeCount!==1||et.anchorNode!==Y.node||et.anchorOffset!==Y.offset||et.focusNode!==G.node||et.focusOffset!==G.offset)){var q=ht.createRange();q.setStart(Y.node,Y.offset),et.removeAllRanges(),Bt>pe?(et.addRange(q),et.extend(G.node,G.offset)):(q.setEnd(G.node,G.offset),et.addRange(q))}}}}for(ht=[],et=D;et=et.parentNode;)et.nodeType===1&&ht.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ht.length;D++){var lt=ht[D];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}Tu=!!jf,Gf=jf=null}finally{ee=g,H.p=h,U.T=l}}i.current=a,ei=2}}function E2(){if(ei===2){ei=0;var i=ia,a=jr,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=U.T,U.T=null;var h=H.p;H.p=2;var g=ee;ee|=4;try{Q1(i,a.alternate,a)}finally{ee=g,H.p=h,U.T=l}}ei=3}}function T2(){if(ei===4||ei===3){ei=0,pt();var i=ia,a=jr,l=Ms,h=h2;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ei=5:(ei=0,jr=ia=null,x2(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ea=null),Kh(l),a=a.stateNode,li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(ye,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=U.T,g=H.p,H.p=2,U.T=null;try{for(var y=i.onRecoverableError,E=0;E<h.length;E++){var D=h[E];y(D.value,{componentStack:D.stack})}}finally{U.T=a,H.p=g}}(Ms&3)!==0&&fu(),Zn(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===Mf?vl++:(vl=0,Mf=i):vl=0,_l(0)}}function x2(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,tl(a)))}function fu(){return S2(),E2(),T2(),C2()}function C2(){if(ei!==5)return!1;var i=ia,a=Cf;Cf=0;var l=Kh(Ms),h=U.T,g=H.p;try{H.p=32>l?32:l,U.T=null,l=kf,kf=null;var y=ia,E=Ms;if(ei=0,jr=ia=null,Ms=0,(ee&6)!==0)throw Error(n(331));var D=ee;if(ee|=4,l2(y.current),a2(y,y.current,E,l),ee=D,_l(0,!1),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(ye,y)}catch{}return!0}finally{H.p=g,U.T=h,x2(i,a)}}function k2(i,a,l){a=An(l,a),a=of(i.stateNode,a,2),i=Ws(i,a,2),i!==null&&(Uo(i,2),Zn(i))}function he(i,a,l){if(i.tag===3)k2(i,i,l);else for(;a!==null;){if(a.tag===3){k2(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ea===null||!ea.has(h))){i=An(l,i),l=M1(2),h=Ws(a,l,2),h!==null&&(D1(l,h,a,i),Uo(h,2),Zn(h));break}}a=a.return}}function Rf(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new u4;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(l)||(Ef=!0,g.add(l),i=g4.bind(null,i,a,l),a.then(i,i))}function g4(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,be===i&&(Yt&l)===l&&(ze===4||ze===3&&(Yt&62914560)===Yt&&300>yt()-ou?(ee&2)===0&&Gr(i,0):Tf|=l,Hr===Yt&&(Hr=0)),Zn(i)}function M2(i,a){a===0&&(a=Sm()),i=Ma(i,a),i!==null&&(Uo(i,a),Zn(i))}function m4(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),M2(i,l)}function y4(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),M2(i,l)}function b4(i,a){return dt(i,a)}var pu=null,Xr=null,Lf=!1,gu=!1,Nf=!1,sa=0;function Zn(i){i!==Xr&&i.next===null&&(Xr===null?pu=Xr=i:Xr=Xr.next=i),gu=!0,Lf||(Lf=!0,_4())}function _l(i,a){if(!Nf&&gu){Nf=!0;do for(var l=!1,h=pu;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var E=h.suspendedLanes,D=h.pingedLanes;y=(1<<31-De(42|i)+1)-1,y&=g&~(E&~D),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,L2(h,y))}else y=Yt,y=vc(h,h===be?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||Io(h,y)||(l=!0,L2(h,y));h=h.next}while(l);Nf=!1}}function v4(){D2()}function D2(){gu=Lf=!1;var i=0;sa!==0&&D4()&&(i=sa);for(var a=yt(),l=null,h=pu;h!==null;){var g=h.next,y=O2(h,a);y===0?(h.next=null,l===null?pu=g:l.next=g,g===null&&(Xr=l)):(l=h,(i!==0||(y&3)!==0)&&(gu=!0)),h=g}ei!==0&&ei!==5||_l(i),sa!==0&&(sa=0)}function O2(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var E=31-De(y),D=1<<E,I=g[E];I===-1?((D&l)===0||(D&h)!==0)&&(g[E]=Y_(D,a)):I<=a&&(i.expiredLanes|=D),y&=~D}if(a=be,l=Yt,l=vc(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(ue===2||ue===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ft(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Io(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&ft(h),Kh(l)){case 2:case 8:l=ce;break;case 32:l=Gt;break;case 268435456:l=Us;break;default:l=Gt}return h=R2.bind(null,i),l=dt(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&ft(h),i.callbackPriority=2,i.callbackNode=null,2}function R2(i,a){if(ei!==0&&ei!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(fu()&&i.callbackNode!==l)return null;var h=Yt;return h=vc(i,i===be?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(f2(i,h,a),O2(i,yt()),i.callbackNode!=null&&i.callbackNode===l?R2.bind(null,i):null)}function L2(i,a){if(fu())return null;f2(i,a,!0)}function _4(){R4(function(){(ee&6)!==0?dt(Ot,v4):D2()})}function Bf(){if(sa===0){var i=Dr;i===0&&(i=hr,hr<<=1,(hr&261888)===0&&(hr=256)),sa=i}return sa}function N2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Sc(""+i)}function B2(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function A4(i,a,l,h,g){if(a==="submit"&&l&&l.stateNode===g){var y=N2((g[Ni]||null).action),E=h.submitter;E&&(a=(a=E[Ni]||null)?N2(a.formAction):E.getAttribute("formAction"),a!==null&&(y=a,E=null));var D=new Cc("action","action",null,h,g);i.push({event:D,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(sa!==0){var I=E?B2(g,E):new FormData(g);tf(l,{pending:!0,data:I,method:g.method,action:y},null,I)}}else typeof y=="function"&&(D.preventDefault(),I=E?B2(g,E):new FormData(g),tf(l,{pending:!0,data:I,method:g.method,action:y},y,I))},currentTarget:g}]})}}for(var zf=0;zf<yd.length;zf++){var Ff=yd[zf],w4=Ff.toLowerCase(),S4=Ff[0].toUpperCase()+Ff.slice(1);Pn(w4,"on"+S4)}Pn(d0,"onAnimationEnd"),Pn(f0,"onAnimationIteration"),Pn(p0,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(IA,"onTransitionRun"),Pn(UA,"onTransitionStart"),Pn(HA,"onTransitionCancel"),Pn(g0,"onTransitionEnd"),mr("onMouseEnter",["mouseout","mouseover"]),mr("onMouseLeave",["mouseout","mouseover"]),mr("onPointerEnter",["pointerout","pointerover"]),mr("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function z2(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;t:{var y=void 0;if(a)for(var E=h.length-1;0<=E;E--){var D=h[E],I=D.instance,K=D.currentTarget;if(D=D.listener,I!==y&&g.isPropagationStopped())break t;y=D,g.currentTarget=K;try{y(g)}catch(ot){Dc(ot)}g.currentTarget=null,y=I}else for(E=0;E<h.length;E++){if(D=h[E],I=D.instance,K=D.currentTarget,D=D.listener,I!==y&&g.isPropagationStopped())break t;y=D,g.currentTarget=K;try{y(g)}catch(ot){Dc(ot)}g.currentTarget=null,y=I}}}}function Xt(i,a){var l=a[Wh];l===void 0&&(l=a[Wh]=new Set);var h=i+"__bubble";l.has(h)||(F2(a,i,2,!1),l.add(h))}function Pf(i,a,l){var h=0;a&&(h|=4),F2(l,i,h,a)}var mu="_reactListening"+Math.random().toString(36).slice(2);function If(i){if(!i[mu]){i[mu]=!0,Dm.forEach(function(l){l!=="selectionchange"&&(E4.has(l)||Pf(l,!1,i),Pf(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[mu]||(a[mu]=!0,Pf("selectionchange",!1,a))}}function F2(i,a,l,h){switch(dy(a)){case 2:var g=Q4;break;case 8:g=J4;break;default:g=tp}l=g.bind(null,a,l,i),g=void 0,!sd||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function Uf(i,a,l,h,g){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var D=h.stateNode.containerInfo;if(D===g)break;if(E===4)for(E=h.return;E!==null;){var I=E.tag;if((I===3||I===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;D!==null;){if(E=fr(D),E===null)return;if(I=E.tag,I===5||I===6||I===26||I===27){h=y=E;continue t}D=D.parentNode}}h=h.return}jm(function(){var K=y,ot=id(l),ht=[];t:{var Q=m0.get(i);if(Q!==void 0){var et=Cc,St=i;switch(i){case"keypress":if(Tc(l)===0)break t;case"keydown":case"keyup":et=yA;break;case"focusin":St="focus",et=ld;break;case"focusout":St="blur",et=ld;break;case"beforeblur":case"afterblur":et=ld;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Xm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=aA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=_A;break;case d0:case f0:case p0:et=lA;break;case g0:et=wA;break;case"scroll":case"scrollend":et=nA;break;case"wheel":et=EA;break;case"copy":case"cut":case"paste":et=uA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=qm;break;case"toggle":case"beforetoggle":et=xA}var Bt=(a&4)!==0,pe=!Bt&&(i==="scroll"||i==="scrollend"),Y=Bt?Q!==null?Q+"Capture":null:Q;Bt=[];for(var G=K,q;G!==null;){var lt=G;if(q=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||q===null||Y===null||(lt=Go(G,Y),lt!=null&&Bt.push(wl(G,lt,q))),pe)break;G=G.return}0<Bt.length&&(Q=new et(Q,St,null,l,ot),ht.push({event:Q,listeners:Bt}))}}if((a&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",et=i==="mouseout"||i==="pointerout",Q&&l!==ed&&(St=l.relatedTarget||l.fromElement)&&(fr(St)||St[dr]))break t;if((et||Q)&&(Q=ot.window===ot?ot:(Q=ot.ownerDocument)?Q.defaultView||Q.parentWindow:window,et?(St=l.relatedTarget||l.toElement,et=K,St=St?fr(St):null,St!==null&&(pe=o(St),Bt=St.tag,St!==pe||Bt!==5&&Bt!==27&&Bt!==6)&&(St=null)):(et=null,St=K),et!==St)){if(Bt=Xm,lt="onMouseLeave",Y="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Bt=qm,lt="onPointerLeave",Y="onPointerEnter",G="pointer"),pe=et==null?Q:jo(et),q=St==null?Q:jo(St),Q=new Bt(lt,G+"leave",et,l,ot),Q.target=pe,Q.relatedTarget=q,lt=null,fr(ot)===K&&(Bt=new Bt(Y,G+"enter",St,l,ot),Bt.target=q,Bt.relatedTarget=pe,lt=Bt),pe=lt,et&&St)e:{for(Bt=T4,Y=et,G=St,q=0,lt=Y;lt;lt=Bt(lt))q++;lt=0;for(var Rt=G;Rt;Rt=Bt(Rt))lt++;for(;0<q-lt;)Y=Bt(Y),q--;for(;0<lt-q;)G=Bt(G),lt--;for(;q--;){if(Y===G||G!==null&&Y===G.alternate){Bt=Y;break e}Y=Bt(Y),G=Bt(G)}Bt=null}else Bt=null;et!==null&&P2(ht,Q,et,Bt,!1),St!==null&&pe!==null&&P2(ht,pe,St,Bt,!0)}}t:{if(Q=K?jo(K):window,et=Q.nodeName&&Q.nodeName.toLowerCase(),et==="select"||et==="input"&&Q.type==="file")var Qt=e0;else if(Jm(Q))if(i0)Qt=zA;else{Qt=NA;var Tt=LA}else et=Q.nodeName,!et||et.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&td(K.elementType)&&(Qt=e0):Qt=BA;if(Qt&&(Qt=Qt(i,K))){t0(ht,Qt,l,ot);break t}Tt&&Tt(i,Q,K),i==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Jh(Q,"number",Q.value)}switch(Tt=K?jo(K):window,i){case"focusin":(Jm(Tt)||Tt.contentEditable==="true")&&(wr=Tt,pd=K,$o=null);break;case"focusout":$o=pd=wr=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,u0(ht,l,ot);break;case"selectionchange":if(PA)break;case"keydown":case"keyup":u0(ht,l,ot)}var jt;if(ud)t:{switch(i){case"compositionstart":var qt="onCompositionStart";break t;case"compositionend":qt="onCompositionEnd";break t;case"compositionupdate":qt="onCompositionUpdate";break t}qt=void 0}else Ar?$m(i,l)&&(qt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(qt="onCompositionStart");qt&&(Km&&l.locale!=="ko"&&(Ar||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&Ar&&(jt=Gm()):(js=ot,ad="value"in js?js.value:js.textContent,Ar=!0)),Tt=yu(K,qt),0<Tt.length&&(qt=new Ym(qt,i,null,l,ot),ht.push({event:qt,listeners:Tt}),jt?qt.data=jt:(jt=Qm(l),jt!==null&&(qt.data=jt)))),(jt=kA?MA(i,l):DA(i,l))&&(qt=yu(K,"onBeforeInput"),0<qt.length&&(Tt=new Ym("onBeforeInput","beforeinput",null,l,ot),ht.push({event:Tt,listeners:qt}),Tt.data=jt)),A4(ht,i,K,l,ot)}z2(ht,a)})}function wl(i,a,l){return{instance:i,listener:a,currentTarget:l}}function yu(i,a){for(var l=a+"Capture",h=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Go(i,l),g!=null&&h.unshift(wl(i,g,y)),g=Go(i,a),g!=null&&h.push(wl(i,g,y))),i.tag===3)return h;i=i.return}return[]}function T4(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function P2(i,a,l,h,g){for(var y=a._reactName,E=[];l!==null&&l!==h;){var D=l,I=D.alternate,K=D.stateNode;if(D=D.tag,I!==null&&I===h)break;D!==5&&D!==26&&D!==27||K===null||(I=K,g?(K=Go(l,y),K!=null&&E.unshift(wl(l,K,I))):g||(K=Go(l,y),K!=null&&E.push(wl(l,K,I)))),l=l.return}E.length!==0&&i.push({event:a,listeners:E})}var x4=/\r\n?/g,C4=/\u0000|\uFFFD/g;function I2(i){return(typeof i=="string"?i:""+i).replace(x4,`
`).replace(C4,"")}function U2(i,a){return a=I2(a),I2(i)===a}function fe(i,a,l,h,g,y){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||br(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&br(i,""+h);break;case"className":Ac(i,"class",h);break;case"tabIndex":Ac(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ac(i,l,h);break;case"style":Um(i,h,y);break;case"data":if(a!=="object"){Ac(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Sc(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&fe(i,a,"name",g.name,g,null),fe(i,a,"formEncType",g.formEncType,g,null),fe(i,a,"formMethod",g.formMethod,g,null),fe(i,a,"formTarget",g.formTarget,g,null)):(fe(i,a,"encType",g.encType,g,null),fe(i,a,"method",g.method,g,null),fe(i,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Sc(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=ps);break;case"onScroll":h!=null&&Xt("scroll",i);break;case"onScrollEnd":h!=null&&Xt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Sc(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Xt("beforetoggle",i),Xt("toggle",i),_c(i,"popover",h);break;case"xlinkActuate":fs(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":fs(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":fs(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":fs(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":fs(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":fs(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":fs(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":fs(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":fs(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":_c(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=eA.get(l)||l,_c(i,l,h))}}function Hf(i,a,l,h,g,y){switch(l){case"style":Um(i,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?br(i,h):(typeof h=="number"||typeof h=="bigint")&&br(i,""+h);break;case"onScroll":h!=null&&Xt("scroll",i);break;case"onScrollEnd":h!=null&&Xt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=ps);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Om.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),y=i[Ni]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(a,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,g);break t}l in i?i[l]=h:h===!0?i.setAttribute(l,""):_c(i,l,h)}}}function wi(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xt("error",i),Xt("load",i);var h=!1,g=!1,y;for(y in l)if(l.hasOwnProperty(y)){var E=l[y];if(E!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:fe(i,a,y,E,l,null)}}g&&fe(i,a,"srcSet",l.srcSet,l,null),h&&fe(i,a,"src",l.src,l,null);return;case"input":Xt("invalid",i);var D=y=E=g=null,I=null,K=null;for(h in l)if(l.hasOwnProperty(h)){var ot=l[h];if(ot!=null)switch(h){case"name":g=ot;break;case"type":E=ot;break;case"checked":I=ot;break;case"defaultChecked":K=ot;break;case"value":y=ot;break;case"defaultValue":D=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(n(137,a));break;default:fe(i,a,h,ot,l,null)}}zm(i,y,D,I,K,E,g,!1);return;case"select":Xt("invalid",i),h=E=y=null;for(g in l)if(l.hasOwnProperty(g)&&(D=l[g],D!=null))switch(g){case"value":y=D;break;case"defaultValue":E=D;break;case"multiple":h=D;default:fe(i,a,g,D,l,null)}a=y,l=E,i.multiple=!!h,a!=null?yr(i,!!h,a,!1):l!=null&&yr(i,!!h,l,!0);return;case"textarea":Xt("invalid",i),y=g=h=null;for(E in l)if(l.hasOwnProperty(E)&&(D=l[E],D!=null))switch(E){case"value":h=D;break;case"defaultValue":g=D;break;case"children":y=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:fe(i,a,E,D,l,null)}Pm(i,h,g,y);return;case"option":for(I in l)l.hasOwnProperty(I)&&(h=l[I],h!=null)&&(I==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":fe(i,a,I,h,l,null));return;case"dialog":Xt("beforetoggle",i),Xt("toggle",i),Xt("cancel",i),Xt("close",i);break;case"iframe":case"object":Xt("load",i);break;case"video":case"audio":for(h=0;h<Al.length;h++)Xt(Al[h],i);break;case"image":Xt("error",i),Xt("load",i);break;case"details":Xt("toggle",i);break;case"embed":case"source":case"link":Xt("error",i),Xt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(h=l[K],h!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:fe(i,a,K,h,l,null)}return;default:if(td(a)){for(ot in l)l.hasOwnProperty(ot)&&(h=l[ot],h!==void 0&&Hf(i,a,ot,h,l,void 0));return}}for(D in l)l.hasOwnProperty(D)&&(h=l[D],h!=null&&fe(i,a,D,h,l,null))}function k4(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,D=null,I=null,K=null,ot=null;for(et in l){var ht=l[et];if(l.hasOwnProperty(et)&&ht!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":I=ht;default:h.hasOwnProperty(et)||fe(i,a,et,null,h,ht)}}for(var Q in h){var et=h[Q];if(ht=l[Q],h.hasOwnProperty(Q)&&(et!=null||ht!=null))switch(Q){case"type":y=et;break;case"name":g=et;break;case"checked":K=et;break;case"defaultChecked":ot=et;break;case"value":E=et;break;case"defaultValue":D=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,a));break;default:et!==ht&&fe(i,a,Q,et,h,ht)}}Qh(i,E,D,I,K,ot,y,g);return;case"select":et=E=D=Q=null;for(y in l)if(I=l[y],l.hasOwnProperty(y)&&I!=null)switch(y){case"value":break;case"multiple":et=I;default:h.hasOwnProperty(y)||fe(i,a,y,null,h,I)}for(g in h)if(y=h[g],I=l[g],h.hasOwnProperty(g)&&(y!=null||I!=null))switch(g){case"value":Q=y;break;case"defaultValue":D=y;break;case"multiple":E=y;default:y!==I&&fe(i,a,g,y,h,I)}a=D,l=E,h=et,Q!=null?yr(i,!!l,Q,!1):!!h!=!!l&&(a!=null?yr(i,!!l,a,!0):yr(i,!!l,l?[]:"",!1));return;case"textarea":et=Q=null;for(D in l)if(g=l[D],l.hasOwnProperty(D)&&g!=null&&!h.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:fe(i,a,D,null,h,g)}for(E in h)if(g=h[E],y=l[E],h.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":Q=g;break;case"defaultValue":et=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==y&&fe(i,a,E,g,h,y)}Fm(i,Q,et);return;case"option":for(var St in l)Q=l[St],l.hasOwnProperty(St)&&Q!=null&&!h.hasOwnProperty(St)&&(St==="selected"?i.selected=!1:fe(i,a,St,null,h,Q));for(I in h)Q=h[I],et=l[I],h.hasOwnProperty(I)&&Q!==et&&(Q!=null||et!=null)&&(I==="selected"?i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":fe(i,a,I,Q,h,et));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in l)Q=l[Bt],l.hasOwnProperty(Bt)&&Q!=null&&!h.hasOwnProperty(Bt)&&fe(i,a,Bt,null,h,Q);for(K in h)if(Q=h[K],et=l[K],h.hasOwnProperty(K)&&Q!==et&&(Q!=null||et!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,a));break;default:fe(i,a,K,Q,h,et)}return;default:if(td(a)){for(var pe in l)Q=l[pe],l.hasOwnProperty(pe)&&Q!==void 0&&!h.hasOwnProperty(pe)&&Hf(i,a,pe,void 0,h,Q);for(ot in h)Q=h[ot],et=l[ot],!h.hasOwnProperty(ot)||Q===et||Q===void 0&&et===void 0||Hf(i,a,ot,Q,h,et);return}}for(var Y in l)Q=l[Y],l.hasOwnProperty(Y)&&Q!=null&&!h.hasOwnProperty(Y)&&fe(i,a,Y,null,h,Q);for(ht in h)Q=h[ht],et=l[ht],!h.hasOwnProperty(ht)||Q===et||Q==null&&et==null||fe(i,a,ht,Q,h,et)}function H2(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M4(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var g=l[h],y=g.transferSize,E=g.initiatorType,D=g.duration;if(y&&D&&H2(E)){for(E=0,D=g.responseEnd,h+=1;h<l.length;h++){var I=l[h],K=I.startTime;if(K>D)break;var ot=I.transferSize,ht=I.initiatorType;ot&&H2(ht)&&(I=I.responseEnd,E+=ot*(I<D?1:(D-K)/(I-K)))}if(--h,a+=8*(y+E)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var jf=null,Gf=null;function bu(i){return i.nodeType===9?i:i.ownerDocument}function j2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G2(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Vf(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Xf=null;function D4(){var i=window.event;return i&&i.type==="popstate"?i===Xf?!1:(Xf=i,!0):(Xf=null,!1)}var V2=typeof setTimeout=="function"?setTimeout:void 0,O4=typeof clearTimeout=="function"?clearTimeout:void 0,X2=typeof Promise=="function"?Promise:void 0,R4=typeof queueMicrotask=="function"?queueMicrotask:typeof X2<"u"?function(i){return X2.resolve(null).then(i).catch(L4)}:V2;function L4(i){setTimeout(function(){throw i})}function aa(i){return i==="head"}function Y2(i,a){var l=a,h=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(g),Wr(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")Sl(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Sl(l);for(var y=l.firstChild;y;){var E=y.nextSibling,D=y.nodeName;y[Ho]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=E}}else l==="body"&&Sl(i.ownerDocument.body);l=g}while(l);Wr(a)}function q2(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function Yf(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Yf(l),Zh(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function N4(i,a,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ho])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=xn(i.nextSibling),i===null)break}return null}function B4(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=xn(i.nextSibling),i===null))return null;return i}function K2(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=xn(i.nextSibling),i===null))return null;return i}function qf(i){return i.data==="$?"||i.data==="$~"}function Kf(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function z4(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function xn(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Wf=null;function W2(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return xn(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function Z2(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function $2(i,a,l){switch(a=bu(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Sl(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Zh(i)}var Cn=new Map,Q2=new Set;function vu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ds=H.d;H.d={f:F4,r:P4,D:I4,C:U4,L:H4,m:j4,X:V4,S:G4,M:X4};function F4(){var i=Ds.f(),a=uu();return i||a}function P4(i){var a=pr(i);a!==null&&a.tag===5&&a.type==="form"?g1(a):Ds.r(i)}var Yr=typeof document>"u"?null:document;function J2(i,a,l){var h=Yr;if(h&&typeof a=="string"&&a){var g=vn(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Q2.has(g)||(Q2.add(g),i={rel:i,crossOrigin:l,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),wi(a,"link",i),ci(a),h.head.appendChild(a)))}}function I4(i){Ds.D(i),J2("dns-prefetch",i,null)}function U4(i,a){Ds.C(i,a),J2("preconnect",i,a)}function H4(i,a,l){Ds.L(i,a,l);var h=Yr;if(h&&i&&a){var g='link[rel="preload"][as="'+vn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+vn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+vn(l.imageSizes)+'"]')):g+='[href="'+vn(i)+'"]';var y=g;switch(a){case"style":y=qr(i);break;case"script":y=Kr(i)}Cn.has(y)||(i=m({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Cn.set(y,i),h.querySelector(g)!==null||a==="style"&&h.querySelector(El(y))||a==="script"&&h.querySelector(Tl(y))||(a=h.createElement("link"),wi(a,"link",i),ci(a),h.head.appendChild(a)))}}function j4(i,a){Ds.m(i,a);var l=Yr;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+vn(h)+'"][href="'+vn(i)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Kr(i)}if(!Cn.has(y)&&(i=m({rel:"modulepreload",href:i},a),Cn.set(y,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Tl(y)))return}h=l.createElement("link"),wi(h,"link",i),ci(h),l.head.appendChild(h)}}}function G4(i,a,l){Ds.S(i,a,l);var h=Yr;if(h&&i){var g=gr(h).hoistableStyles,y=qr(i);a=a||"default";var E=g.get(y);if(!E){var D={loading:0,preload:null};if(E=h.querySelector(El(y)))D.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Cn.get(y))&&Zf(i,l);var I=E=h.createElement("link");ci(I),wi(I,"link",i),I._p=new Promise(function(K,ot){I.onload=K,I.onerror=ot}),I.addEventListener("load",function(){D.loading|=1}),I.addEventListener("error",function(){D.loading|=2}),D.loading|=4,_u(E,a,h)}E={type:"stylesheet",instance:E,count:1,state:D},g.set(y,E)}}}function V4(i,a){Ds.X(i,a);var l=Yr;if(l&&i){var h=gr(l).hoistableScripts,g=Kr(i),y=h.get(g);y||(y=l.querySelector(Tl(g)),y||(i=m({src:i,async:!0},a),(a=Cn.get(g))&&$f(i,a),y=l.createElement("script"),ci(y),wi(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function X4(i,a){Ds.M(i,a);var l=Yr;if(l&&i){var h=gr(l).hoistableScripts,g=Kr(i),y=h.get(g);y||(y=l.querySelector(Tl(g)),y||(i=m({src:i,async:!0,type:"module"},a),(a=Cn.get(g))&&$f(i,a),y=l.createElement("script"),ci(y),wi(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function ty(i,a,l,h){var g=(g=_t.current)?vu(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=qr(l.href),l=gr(g).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=qr(l.href);var y=gr(g).hoistableStyles,E=y.get(i);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,E),(y=g.querySelector(El(i)))&&!y._p&&(E.instance=y,E.state.loading=5),Cn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Cn.set(i,l),y||Y4(g,i,l,E.state))),a&&h===null)throw Error(n(528,""));return E}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Kr(l),l=gr(g).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function qr(i){return'href="'+vn(i)+'"'}function El(i){return'link[rel="stylesheet"]['+i+"]"}function ey(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function Y4(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),wi(a,"link",l),ci(a),i.head.appendChild(a))}function Kr(i){return'[src="'+vn(i)+'"]'}function Tl(i){return"script[async]"+i}function iy(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+vn(l.href)+'"]');if(h)return a.instance=h,ci(h),h;var g=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),ci(h),wi(h,"style",g),_u(h,l.precedence,i),a.instance=h;case"stylesheet":g=qr(l.href);var y=i.querySelector(El(g));if(y)return a.state.loading|=4,a.instance=y,ci(y),y;h=ey(l),(g=Cn.get(g))&&Zf(h,g),y=(i.ownerDocument||i).createElement("link"),ci(y);var E=y;return E._p=new Promise(function(D,I){E.onload=D,E.onerror=I}),wi(y,"link",h),a.state.loading|=4,_u(y,l.precedence,i),a.instance=y;case"script":return y=Kr(l.src),(g=i.querySelector(Tl(y)))?(a.instance=g,ci(g),g):(h=l,(g=Cn.get(y))&&(h=m({},l),$f(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),ci(g),wi(g,"link",h),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,_u(h,l.precedence,i));return a.instance}function _u(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,E=0;E<h.length;E++){var D=h[E];if(D.dataset.precedence===a)y=D;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Zf(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function $f(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Au=null;function ny(i,a,l){if(Au===null){var h=new Map,g=Au=new Map;g.set(l,h)}else g=Au,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var y=l[g];if(!(y[Ho]||y[bi]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(a)||"";E=i+E;var D=h.get(E);D?D.push(y):h.set(E,[y])}}return h}function sy(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function q4(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(i=a.disabled,typeof a.precedence=="string"&&i==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ay(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function K4(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=qr(h.href),y=a.querySelector(El(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=wu.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=y,ci(y);return}y=a.ownerDocument||a,h=ey(h),(g=Cn.get(g))&&Zf(h,g),y=y.createElement("link"),ci(y);var E=y;E._p=new Promise(function(D,I){E.onload=D,E.onerror=I}),wi(y,"link",h),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=wu.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var Qf=0;function W4(i,a){return i.stylesheets&&i.count===0&&Eu(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&Eu(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+a);0<i.imgBytes&&Qf===0&&(Qf=62500*M4());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Eu(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Qf?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function wu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Su=null;function Eu(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Su=new Map,a.forEach(Z4,i),Su=null,wu.call(i))}function Z4(i,a){if(!(a.state.loading&4)){var l=Su.get(i);if(l)var h=l.get(null);else{l=new Map,Su.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),h=E)}h&&l.set(null,h)}g=a.instance,E=g.getAttribute("data-precedence"),y=l.get(E)||h,y===h&&l.set(null,g),l.set(E,g),this.count++,h=wu.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var xl={$$typeof:C,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function $4(i,a,l,h,g,y,E,D,I){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.hiddenUpdates=Yh(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function ry(i,a,l,h,g,y,E,D,I,K,ot,ht){return i=new $4(i,a,l,E,I,K,ot,ht,D),a=1,y===!0&&(a|=24),y=Ki(3,null,null,a),i.current=y,y.stateNode=i,a=Dd(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:l,cache:a},Nd(y),i}function oy(i){return i?(i=Tr,i):Tr}function ly(i,a,l,h,g,y){g=oy(g),h.context===null?h.context=g:h.pendingContext=g,h=Ks(a),h.payload={element:l},y=y===void 0?null:y,y!==null&&(h.callback=y),l=Ws(i,h,a),l!==null&&(Ui(l,i,a),sl(l,i,a))}function cy(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Jf(i,a){cy(i,a),(i=i.alternate)&&cy(i,a)}function uy(i){if(i.tag===13||i.tag===31){var a=Ma(i,67108864);a!==null&&Ui(a,i,67108864),Jf(i,67108864)}}function hy(i){if(i.tag===13||i.tag===31){var a=Ji();a=qh(a);var l=Ma(i,a);l!==null&&Ui(l,i,a),Jf(i,a)}}var Tu=!0;function Q4(i,a,l,h){var g=U.T;U.T=null;var y=H.p;try{H.p=2,tp(i,a,l,h)}finally{H.p=y,U.T=g}}function J4(i,a,l,h){var g=U.T;U.T=null;var y=H.p;try{H.p=8,tp(i,a,l,h)}finally{H.p=y,U.T=g}}function tp(i,a,l,h){if(Tu){var g=ep(h);if(g===null)Uf(i,a,h,xu,l),fy(i,h);else if(ew(g,i,a,l,h))h.stopPropagation();else if(fy(i,h),a&4&&-1<tw.indexOf(i)){for(;g!==null;){var y=pr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=yn(y.pendingLanes);if(E!==0){var D=y;for(D.pendingLanes|=2,D.entangledLanes|=2;E;){var I=1<<31-De(E);D.entanglements[1]|=I,E&=~I}Zn(y),(ee&6)===0&&(lu=yt()+500,_l(0))}}break;case 31:case 13:D=Ma(y,2),D!==null&&Ui(D,y,2),uu(),Jf(y,2)}if(y=ep(h),y===null&&Uf(i,a,h,xu,l),y===g)break;g=y}g!==null&&h.stopPropagation()}else Uf(i,a,h,null,l)}}function ep(i){return i=id(i),ip(i)}var xu=null;function ip(i){if(xu=null,i=fr(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return xu=i,null}function dy(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case Ot:return 2;case ce:return 8;case Gt:case Li:return 32;case Us:return 268435456;default:return 32}default:return 32}}var np=!1,ra=null,oa=null,la=null,Cl=new Map,kl=new Map,ca=[],tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fy(i,a){switch(i){case"focusin":case"focusout":ra=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Cl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(a.pointerId)}}function Ml(i,a,l,h,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},a!==null&&(a=pr(a),a!==null&&uy(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function ew(i,a,l,h,g){switch(a){case"focusin":return ra=Ml(ra,i,a,l,h,g),!0;case"dragenter":return oa=Ml(oa,i,a,l,h,g),!0;case"mouseover":return la=Ml(la,i,a,l,h,g),!0;case"pointerover":var y=g.pointerId;return Cl.set(y,Ml(Cl.get(y)||null,i,a,l,h,g)),!0;case"gotpointercapture":return y=g.pointerId,kl.set(y,Ml(kl.get(y)||null,i,a,l,h,g)),!0}return!1}function py(i){var a=fr(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,km(i.priority,function(){hy(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,km(i.priority,function(){hy(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cu(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=ep(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);ed=h,l.target.dispatchEvent(h),ed=null}else return a=pr(l),a!==null&&uy(a),i.blockedOn=l,!1;a.shift()}return!0}function gy(i,a,l){Cu(i)&&l.delete(a)}function iw(){np=!1,ra!==null&&Cu(ra)&&(ra=null),oa!==null&&Cu(oa)&&(oa=null),la!==null&&Cu(la)&&(la=null),Cl.forEach(gy),kl.forEach(gy)}function ku(i,a){i.blockedOn===a&&(i.blockedOn=null,np||(np=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,iw)))}var Mu=null;function my(i){Mu!==i&&(Mu=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Mu===i&&(Mu=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],g=i[a+2];if(typeof h!="function"){if(ip(h||l)===null)continue;break}var y=pr(l);y!==null&&(i.splice(a,3),a-=3,tf(y,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function Wr(i){function a(I){return ku(I,i)}ra!==null&&ku(ra,i),oa!==null&&ku(oa,i),la!==null&&ku(la,i),Cl.forEach(a),kl.forEach(a);for(var l=0;l<ca.length;l++){var h=ca[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<ca.length&&(l=ca[0],l.blockedOn===null);)py(l),l.blockedOn===null&&ca.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],y=l[h+1],E=g[Ni]||null;if(typeof y=="function")E||my(l);else if(E){var D=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[Ni]||null)D=E.formAction;else if(ip(g)!==null)continue}else D=E.action;typeof D=="function"?l[h+1]=D:(l.splice(h,3),h-=3),my(l)}}}function yy(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function sp(i){this._internalRoot=i}Du.prototype.render=sp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=Ji();ly(l,h,i,a,null,null)},Du.prototype.unmount=sp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ly(i.current,2,null,i,null,null),uu(),a[dr]=null}};function Du(i){this._internalRoot=i}Du.prototype.unstable_scheduleHydration=function(i){if(i){var a=Cm();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ca.length&&a!==0&&a<ca[l].priority;l++);ca.splice(l,0,i),l===0&&py(i)}};var by=t.version;if(by!=="19.2.4")throw Error(n(527,by,"19.2.4"));H.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var nw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{ye=Ou.inject(nw),li=Ou}catch{}}return Ol.createRoot=function(i,a){if(!r(i))throw Error(n(299));var l=!1,h="",g=T1,y=x1,E=C1;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=ry(i,1,!1,null,null,l,h,null,g,y,E,yy),i[dr]=a.current,If(i),new sp(a)},Ol.hydrateRoot=function(i,a,l){if(!r(i))throw Error(n(299));var h=!1,g="",y=T1,E=x1,D=C1,I=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError),l.formState!==void 0&&(I=l.formState)),a=ry(i,1,!0,a,l??null,h,g,I,y,E,D,yy),a.context=oy(null),l=a.current,h=Ji(),h=qh(h),g=Ks(h),g.callback=null,Ws(l,g,h),l=h,a.current.lanes=l,Uo(a,l),Zn(a),i[dr]=a.current,If(i),new Du(a)},Ol.version="19.2.4",Ol}var Dy;function pw(){if(Dy)return lp.exports;Dy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),lp.exports=fw(),lp.exports}var gw=pw(),po=typeof self<"u"?self:{};function Wl(s,t){t:{for(var e=["CLOSURE_FLAGS"],n=po,r=0;r<e.length;r++)if((n=n[e[r]])==null){e=null;break t}e=n}return(s=e&&e[s])!=null?s:t}function ja(){throw Error("Invalid UTF8")}function Oy(s,t){return t=String.fromCharCode.apply(null,t),s==null?t:s+t}let Lu,dp;const mw=typeof TextDecoder<"u";let yw;const bw=typeof TextEncoder<"u";function uv(s){if(bw)s=(yw||=new TextEncoder).encode(s);else{let e=0;const n=new Uint8Array(3*s.length);for(let r=0;r<s.length;r++){var t=s.charCodeAt(r);if(t<128)n[e++]=t;else{if(t<2048)n[e++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&r<s.length){const o=s.charCodeAt(++r);if(o>=56320&&o<=57343){t=1024*(t-55296)+o-56320+65536,n[e++]=t>>18|240,n[e++]=t>>12&63|128,n[e++]=t>>6&63|128,n[e++]=63&t|128;continue}r--}t=65533}n[e++]=t>>12|224,n[e++]=t>>6&63|128}n[e++]=63&t|128}}s=e===n.length?n:n.subarray(0,e)}return s}function hv(s){po.setTimeout((()=>{throw s}),0)}var Op,vw=Wl(610401301,!1),Ry=Wl(748402147,!0),hg=Wl(824648567,!0),dg=Wl(824656860,Wl(1,!0));function Ly(){var s=po.navigator;return s&&(s=s.userAgent)?s:""}const Ny=po.navigator;function ch(s){return ch[" "](s),s}Op=Ny&&Ny.userAgentData||null,ch[" "]=function(){};const dv={};let Ul=null;function _w(s){const t=s.length;let e=3*t/4;e%3?e=Math.floor(e):"=.".indexOf(s[t-1])!=-1&&(e="=.".indexOf(s[t-2])!=-1?e-2:e-1);const n=new Uint8Array(e);let r=0;return(function(o,c){function u(f){for(;d<o.length;){const p=o.charAt(d++),m=Ul[p];if(m!=null)return m;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return f}fv();let d=0;for(;;){const f=u(-1),p=u(0),m=u(64),b=u(64);if(b===64&&f===-1)break;c(f<<2|p>>4),m!=64&&(c(p<<4&240|m>>2),b!=64&&c(m<<6&192|b))}})(s,(function(o){n[r++]=o})),r!==e?n.subarray(0,r):n}function fv(){if(!Ul){Ul={};var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let e=0;e<5;e++){const n=s.concat(t[e].split(""));dv[e]=n;for(let r=0;r<n.length;r++){const o=n[r];Ul[o]===void 0&&(Ul[o]=r)}}}}var Aw=typeof Uint8Array<"u",pv=!(!(vw&&Op&&Op.brands.length>0)&&(Ly().indexOf("Trident")!=-1||Ly().indexOf("MSIE")!=-1))&&typeof btoa=="function";const By=/[-_.]/g,ww={"-":"+",_:"/",".":"="};function Sw(s){return ww[s]||""}function gv(s){if(!pv)return _w(s);s=By.test(s)?s.replace(By,Sw):s,s=atob(s);const t=new Uint8Array(s.length);for(let e=0;e<s.length;e++)t[e]=s.charCodeAt(e);return t}function fg(s){return Aw&&s!=null&&s instanceof Uint8Array}var go={};function er(){return Ew||=new rs(null,go)}function pg(s){mv(go);var t=s.g;return(t=t==null||fg(t)?t:typeof t=="string"?gv(t):null)==null?t:s.g=t}var rs=class{h(){return new Uint8Array(pg(this)||0)}constructor(s,t){if(mv(t),this.g=s,s!=null&&s.length===0)throw Error("ByteString should be constructed with non-empty values")}};let Ew,Tw;function mv(s){if(s!==go)throw Error("illegal external caller")}function yv(s,t){s.__closure__error__context__984382||(s.__closure__error__context__984382={}),s.__closure__error__context__984382.severity=t}function Rp(s){return yv(s=Error(s),"warning"),s}function mo(s,t){if(s!=null){var e=Tw??={},n=e[s]||0;n>=t||(e[s]=n+1,yv(s=Error(),"incident"),hv(s))}}function Co(){return typeof BigInt=="function"}var ko=typeof Symbol=="function"&&typeof Symbol()=="symbol";function ls(s,t,e=!1){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?e&&Symbol.for&&s?Symbol.for(s):s!=null?Symbol(s):Symbol():t}var xw=ls("jas",void 0,!0),zy=ls(void 0,"0di"),Rl=ls(void 0,"1oa"),on=ls(void 0,Symbol()),Cw=ls(void 0,"0ub"),kw=ls(void 0,"0ubs"),Lp=ls(void 0,"0ubsb"),Mw=ls(void 0,"0actk"),yo=ls("m_m","Pa",!0),Fy=ls();const bv={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},vv=Object.defineProperties,Ct=ko?xw:"Ga";var rr;const Py=[];function ac(s,t){ko||Ct in s||vv(s,bv),s[Ct]|=t}function ri(s,t){ko||Ct in s||vv(s,bv),s[Ct]=t}function rc(s){return ac(s,34),s}function Zl(s){return ac(s,8192),s}ri(Py,7),rr=Object.freeze(Py);var bo={};function cn(s,t){return t===void 0?s.h!==ir&&!!(2&(0|s.v[Ct])):!!(2&t)&&s.h!==ir}const ir={};function gg(s,t){if(s!=null){if(typeof s=="string")s=s?new rs(s,go):er();else if(s.constructor!==rs)if(fg(s))s=s.length?new rs(new Uint8Array(s),go):er();else{if(!t)throw Error();s=void 0}}return s}class Iy{constructor(t,e,n){this.g=t,this.h=e,this.l=n}next(){const t=this.g.next();return t.done||(t.value=this.h.call(this.l,t.value)),t}[Symbol.iterator](){return this}}var Dw=Object.freeze({});function _v(s,t,e){const n=128&t?0:-1,r=s.length;var o;(o=!!r)&&(o=(o=s[r-1])!=null&&typeof o=="object"&&o.constructor===Object);const c=r+(o?-1:0);for(t=128&t?1:0;t<c;t++)e(t-n,s[t]);if(o){s=s[r-1];for(const u in s)!isNaN(u)&&e(+u,s[u])}}var Av={};function Mo(s){return 128&s?Av:void 0}function uh(s){return s.Na=!0,s}var Ow=uh((s=>typeof s=="number")),Uy=uh((s=>typeof s=="string")),Rw=uh((s=>typeof s=="boolean")),hh=typeof po.BigInt=="function"&&typeof po.BigInt(0)=="bigint";function ln(s){var t=s;if(Uy(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(Ow(t)&&!Number.isSafeInteger(t))throw Error(String(t));return hh?BigInt(s):s=Rw(s)?s?"1":"0":Uy(s)?s.trim()||"0":String(s)}var Np=uh((s=>hh?s>=Nw&&s<=zw:s[0]==="-"?Hy(s,Lw):Hy(s,Bw)));const Lw=Number.MIN_SAFE_INTEGER.toString(),Nw=hh?BigInt(Number.MIN_SAFE_INTEGER):void 0,Bw=Number.MAX_SAFE_INTEGER.toString(),zw=hh?BigInt(Number.MAX_SAFE_INTEGER):void 0;function Hy(s,t){if(s.length>t.length)return!1;if(s.length<t.length||s===t)return!0;for(let e=0;e<s.length;e++){const n=s[e],r=t[e];if(n>r)return!1;if(n<r)return!0}}const Fw=typeof Uint8Array.prototype.slice=="function";let Pw,Re=0,Qe=0;function jy(s){const t=s>>>0;Re=t,Qe=(s-t)/4294967296>>>0}function vo(s){if(s<0){jy(-s);const[t,e]=vg(Re,Qe);Re=t>>>0,Qe=e>>>0}else jy(s)}function mg(s){const t=Pw||=new DataView(new ArrayBuffer(8));t.setFloat32(0,+s,!0),Qe=0,Re=t.getUint32(0,!0)}function Bp(s,t){const e=4294967296*t+(s>>>0);return Number.isSafeInteger(e)?e:$l(s,t)}function Iw(s,t){return ln(Co()?BigInt.asUintN(64,(BigInt(t>>>0)<<BigInt(32))+BigInt(s>>>0)):$l(s,t))}function yg(s,t){const e=2147483648&t;return e&&(t=~t>>>0,(s=1+~s>>>0)==0&&(t=t+1>>>0)),typeof(s=Bp(s,t))=="number"?e?-s:s:e?"-"+s:s}function wv(s,t){return Co()?ln(BigInt.asIntN(64,(BigInt.asUintN(32,BigInt(t))<<BigInt(32))+BigInt.asUintN(32,BigInt(s)))):ln(bg(s,t))}function $l(s,t){if(s>>>=0,(t>>>=0)<=2097151)var e=""+(4294967296*t+s);else Co()?e=""+(BigInt(t)<<BigInt(32)|BigInt(s)):(s=(16777215&s)+6777216*(e=16777215&(s>>>24|t<<8))+6710656*(t=t>>16&65535),e+=8147497*t,t*=2,s>=1e7&&(e+=s/1e7>>>0,s%=1e7),e>=1e7&&(t+=e/1e7>>>0,e%=1e7),e=t+Gy(e)+Gy(s));return e}function Gy(s){return s=String(s),"0000000".slice(s.length)+s}function bg(s,t){if(2147483648&t)if(Co())s=""+(BigInt(0|t)<<BigInt(32)|BigInt(s>>>0));else{const[e,n]=vg(s,t);s="-"+$l(e,n)}else s=$l(s,t);return s}function dh(s){if(s.length<16)vo(Number(s));else if(Co())s=BigInt(s),Re=Number(s&BigInt(4294967295))>>>0,Qe=Number(s>>BigInt(32)&BigInt(4294967295));else{const t=+(s[0]==="-");Qe=Re=0;const e=s.length;for(let n=t,r=(e-t)%6+t;r<=e;n=r,r+=6){const o=Number(s.slice(n,r));Qe*=1e6,Re=1e6*Re+o,Re>=4294967296&&(Qe+=Math.trunc(Re/4294967296),Qe>>>=0,Re>>>=0)}if(t){const[n,r]=vg(Re,Qe);Re=n,Qe=r}}}function vg(s,t){return t=~t,s?s=1+~s:t+=1,[s,t]}function jn(s){return Array.prototype.slice.call(s)}const oc=typeof BigInt=="function"?BigInt.asIntN:void 0,Uw=typeof BigInt=="function"?BigInt.asUintN:void 0,nr=Number.isSafeInteger,fh=Number.isFinite,_o=Math.trunc,Hw=ln(0);function Hl(s){if(s!=null&&typeof s!="number")throw Error(`Value of float/double field must be a number, found ${typeof s}: ${s}`);return s}function as(s){return s==null||typeof s=="number"?s:s==="NaN"||s==="Infinity"||s==="-Infinity"?Number(s):void 0}function Ql(s){if(s!=null&&typeof s!="boolean"){var t=typeof s;throw Error(`Expected boolean but got ${t!="object"?t:s?Array.isArray(s)?"array":t:"null"}: ${s}`)}return s}function Sv(s){return s==null||typeof s=="boolean"?s:typeof s=="number"?!!s:void 0}const jw=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function lc(s){switch(typeof s){case"bigint":return!0;case"number":return fh(s);case"string":return jw.test(s);default:return!1}}function Do(s){if(s==null)return s;if(typeof s=="string"&&s)s=+s;else if(typeof s!="number")return;return fh(s)?0|s:void 0}function Ev(s){if(s==null)return s;if(typeof s=="string"&&s)s=+s;else if(typeof s!="number")return;return fh(s)?s>>>0:void 0}function Tv(s){const t=s.length;return(s[0]==="-"?t<20||t===20&&s<="-9223372036854775808":t<19||t===19&&s<="9223372036854775807")?s:(dh(s),bg(Re,Qe))}function _g(s){return s=_o(s),nr(s)||(vo(s),s=yg(Re,Qe)),s}function xv(s){var t=_o(Number(s));return nr(t)?String(t):((t=s.indexOf("."))!==-1&&(s=s.substring(0,t)),Tv(s))}function Cv(s){var t=_o(Number(s));return nr(t)?ln(t):((t=s.indexOf("."))!==-1&&(s=s.substring(0,t)),Co()?ln(oc(64,BigInt(s))):ln(Tv(s)))}function kv(s){return nr(s)?s=ln(_g(s)):(s=_o(s),nr(s)?s=String(s):(vo(s),s=bg(Re,Qe)),s=ln(s)),s}function Gw(s){return s==null?s:typeof s=="bigint"?(Np(s)?s=Number(s):(s=oc(64,s),s=Np(s)?Number(s):String(s)),s):lc(s)?typeof s=="number"?_g(s):xv(s):void 0}function Qu(s){const t=typeof s;return s==null?s:t==="bigint"?ln(oc(64,s)):lc(s)?t==="string"?Cv(s):kv(s):void 0}function Mv(s){if(typeof s!="string")throw Error();return s}function cc(s){if(s!=null&&typeof s!="string")throw Error();return s}function xi(s){return s==null||typeof s=="string"?s:void 0}function Ag(s,t,e,n){return s!=null&&s[yo]===bo?s:Array.isArray(s)?((n=(e=0|s[Ct])|32&n|2&n)!==e&&ri(s,n),new t(s)):(e?2&n?((s=t[zy])||(rc((s=new t).v),s=t[zy]=s),t=s):t=new t:t=void 0,t)}function Vw(s,t,e){if(t)t:{if(!lc(t=s))throw Rp("int64");switch(typeof t){case"string":t=Cv(t);break t;case"bigint":t=ln(oc(64,t));break t;default:t=kv(t)}}else t=Qu(s);return(s=t)==null?e?Hw:void 0:s}const Xw={};let Yw=(function(){try{return ch(new class extends Map{constructor(){super()}}),!1}catch{return!0}})();class fp{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,e){return this.g.set(t,e),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,e){return this.g.forEach(t,e)}[Symbol.iterator](){return this.entries()}}const qw=Yw?(Object.setPrototypeOf(fp.prototype,Map.prototype),Object.defineProperties(fp.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),fp):class extends Map{constructor(){super()}};function Vy(s){return s}function pp(s){if(2&s.J)throw Error("Cannot mutate an immutable Map")}var Bs=class extends qw{constructor(s,t,e=Vy,n=Vy){super(),this.J=0|s[Ct],this.K=t,this.S=e,this.fa=this.K?Kw:n;for(let r=0;r<s.length;r++){const o=s[r],c=e(o[0],!1,!0);let u=o[1];t?u===void 0&&(u=null):u=n(o[1],!1,!0,void 0,void 0,this.J),super.set(c,u)}}V(s){return Zl(Array.from(super.entries(),s))}clear(){pp(this),super.clear()}delete(s){return pp(this),super.delete(this.S(s,!0,!1))}entries(){if(this.K){var s=super.keys();s=new Iy(s,Ww,this)}else s=super.entries();return s}values(){if(this.K){var s=super.keys();s=new Iy(s,Bs.prototype.get,this)}else s=super.values();return s}forEach(s,t){this.K?super.forEach(((e,n,r)=>{s.call(t,r.get(n),n,r)})):super.forEach(s,t)}set(s,t){return pp(this),(s=this.S(s,!0,!1))==null?this:t==null?(super.delete(s),this):super.set(s,this.fa(t,!0,!0,this.K,!1,this.J))}Ma(s){const t=this.S(s[0],!1,!0);s=s[1],s=this.K?s===void 0?null:s:this.fa(s,!1,!0,void 0,!1,this.J),super.set(t,s)}has(s){return super.has(this.S(s,!1,!1))}get(s){s=this.S(s,!1,!1);const t=super.get(s);if(t!==void 0){var e=this.K;return e?((e=this.fa(t,!1,!0,e,this.ra,this.J))!==t&&super.set(s,e),e):t}}[Symbol.iterator](){return this.entries()}};function Kw(s,t,e,n,r,o){return s=Ag(s,n,e,o),r&&(s=Sg(s)),s}function Ww(s){return[s,this.get(s)]}let Zw;function Xy(){return Zw||=new Bs(rc([]),void 0,void 0,void 0,Xw)}function ph(s){return on?s[on]:void 0}function Ju(s,t){for(const e in s)!isNaN(e)&&t(s,+e,s[e])}Bs.prototype.toJSON=void 0;var zp=class{};const $w={Ka:!0};function Qw(s,t){t<100||mo(kw,1)}function gh(s,t,e,n){const r=n!==void 0;n=!!n;var o,c=on;!r&&ko&&c&&(o=s[c])&&Ju(o,Qw),c=[];var u=s.length;let d;o=4294967295;let f=!1;const p=!!(64&t),m=p?128&t?0:-1:void 0;1&t||(d=u&&s[u-1],d!=null&&typeof d=="object"&&d.constructor===Object?o=--u:d=void 0,!p||128&t||r||(f=!0,o=o-m+m)),t=void 0;for(var b=0;b<u;b++){let v=s[b];if(v!=null&&(v=e(v,n))!=null)if(p&&b>=o){const A=b-m;(t??={})[A]=v}else c[b]=v}if(d)for(let v in d){if((u=d[v])==null||(u=e(u,n))==null)continue;let A;b=+v,p&&!Number.isNaN(b)&&(A=b+m)<o?c[A]=u:(t??={})[v]=u}return t&&(f?c.push(t):c[o]=t),r&&on&&(s=ph(s))&&s instanceof zp&&(c[on]=(function(v){const A=new zp;return Ju(v,((_,S,w)=>{A[S]=jn(w)})),A.da=v.da,A})(s)),c}function Jw(s){return s[0]=Jl(s[0]),s[1]=Jl(s[1]),s}function Jl(s){switch(typeof s){case"number":return Number.isFinite(s)?s:""+s;case"bigint":return Np(s)?Number(s):""+s;case"boolean":return s?1:0;case"object":if(Array.isArray(s)){var t=0|s[Ct];return s.length===0&&1&t?void 0:gh(s,t,Jl)}if(s!=null&&s[yo]===bo)return Dv(s);if(s instanceof rs){if((t=s.g)==null)s="";else if(typeof t=="string")s=t;else{if(pv){for(var e="",n=0,r=t.length-10240;n<r;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));e+=String.fromCharCode.apply(null,n?t.subarray(n):t),t=btoa(e)}else{e===void 0&&(e=0),fv(),e=dv[e],n=Array(Math.floor(t.length/3)),r=e[64]||"";let f=0,p=0;for(;f<t.length-2;f+=3){var o=t[f],c=t[f+1],u=t[f+2],d=e[o>>2];o=e[(3&o)<<4|c>>4],c=e[(15&c)<<2|u>>6],u=e[63&u],n[p++]=d+o+c+u}switch(d=0,u=r,t.length-f){case 2:u=e[(15&(d=t[f+1]))<<2]||r;case 1:t=t[f],n[p]=e[t>>2]+e[(3&t)<<4|d>>4]+u+r}t=n.join("")}s=s.g=t}return s}return s instanceof Bs?s=s.size!==0?s.V(Jw):void 0:void 0}return s}function Dv(s){return gh(s=s.v,0|s[Ct],Jl)}let tS,eS;function Za(s,t){return Ov(s,t[0],t[1])}function Ov(s,t,e,n=0){if(s==null){var r=32;e?(s=[e],r|=128):s=[],t&&(r=-16760833&r|(1023&t)<<14)}else{if(!Array.isArray(s))throw Error("narr");if(r=0|s[Ct],Ry&&1&r)throw Error("rfarr");if(2048&r&&!(2&r)&&(function(){if(Ry)throw Error("carr");mo(Mw,5)})(),256&r)throw Error("farr");if(64&r)return(r|n)!==r&&ri(s,r|n),s;if(e&&(r|=128,e!==s[0]))throw Error("mid");t:{r|=64;var o=(e=s).length;if(o){var c=o-1;const d=e[c];if(d!=null&&typeof d=="object"&&d.constructor===Object){if((c-=t=128&r?0:-1)>=1024)throw Error("pvtlmt");for(var u in d)(o=+u)<c&&(e[o+t]=d[u],delete d[u]);r=-16760833&r|(1023&c)<<14;break t}}if(t){if((u=Math.max(t,o-(128&r?0:-1)))>1024)throw Error("spvt");r=-16760833&r|(1023&u)<<14}}}return ri(s,64|r|n),s}function iS(s,t){if(typeof s!="object")return s;if(Array.isArray(s)){var e=0|s[Ct];return s.length===0&&1&e?void 0:Yy(s,e,t)}if(s!=null&&s[yo]===bo)return qy(s);if(s instanceof Bs){if(2&(t=s.J))return s;if(!s.size)return;if(e=rc(s.V()),s.K)for(s=0;s<e.length;s++){const n=e[s];let r=n[1];r=r==null||typeof r!="object"?void 0:r!=null&&r[yo]===bo?qy(r):Array.isArray(r)?Yy(r,0|r[Ct],!!(32&t)):void 0,n[1]=r}return e}return s instanceof rs?s:void 0}function Yy(s,t,e){return 2&t||(!e||4096&t||16&t?s=Oo(s,t,!1,e&&!(16&t)):(ac(s,34),4&t&&Object.freeze(s))),s}function wg(s,t,e){return s=new s.constructor(t),e&&(s.h=ir),s.m=ir,s}function qy(s){const t=s.v,e=0|t[Ct];return cn(s,e)?s:Eg(s,t,e)?wg(s,t):Oo(t,e)}function Oo(s,t,e,n){return n??=!!(34&t),s=gh(s,t,iS,n),n=32,e&&(n|=2),ri(s,t=16769217&t|n),s}function Sg(s){const t=s.v,e=0|t[Ct];return cn(s,e)?Eg(s,t,e)?wg(s,t,!0):new s.constructor(Oo(t,e,!1)):s}function Ro(s){if(s.h!==ir)return!1;var t=s.v;return ac(t=Oo(t,0|t[Ct]),2048),s.v=t,s.h=void 0,s.m=void 0,!0}function Lo(s){if(!Ro(s)&&cn(s,0|s.v[Ct]))throw Error()}function or(s,t){t===void 0&&(t=0|s[Ct]),32&t&&!(4096&t)&&ri(s,4096|t)}function Eg(s,t,e){return!!(2&e)||!(!(32&e)||4096&e)&&(ri(t,2|e),s.h=ir,!0)}const nS=ln(0),ha={};function ke(s,t,e,n,r){if((t=zs(s.v,t,e,r))!==null||n&&s.m!==ir)return t}function zs(s,t,e,n){if(t===-1)return null;const r=t+(e?0:-1),o=s.length-1;let c,u;if(!(o<1+(e?0:-1))){if(r>=o)if(c=s[o],c!=null&&typeof c=="object"&&c.constructor===Object)e=c[t],u=!0;else{if(r!==o)return;e=c}else e=s[r];if(n&&e!=null){if((n=n(e))==null)return n;if(!Object.is(n,e))return u?c[t]=n:s[r]=n,n}return e}}function me(s,t,e,n){Lo(s),ni(s=s.v,0|s[Ct],t,e,n)}function ni(s,t,e,n,r){const o=e+(r?0:-1);var c=s.length-1;if(c>=1+(r?0:-1)&&o>=c){const u=s[c];if(u!=null&&typeof u=="object"&&u.constructor===Object)return u[e]=n,t}return o<=c?(s[o]=n,t):(n!==void 0&&(e>=(c=(t??=0|s[Ct])>>14&1023||536870912)?n!=null&&(s[c+(r?0:-1)]={[e]:n}):s[o]=n),t)}function Va(){return Dw===void 0?2:4}function Xa(s,t,e,n,r){let o=s.v,c=0|o[Ct];n=cn(s,c)?1:n,r=!!r||n===3,n===2&&Ro(s)&&(o=s.v,c=0|o[Ct]);let u=(s=Tg(o,t))===rr?7:0|s[Ct],d=xg(u,c);var f=!(4&d);if(f){4&d&&(s=jn(s),u=0,d=Qa(d,c),c=ni(o,c,t,s));let p=0,m=0;for(;p<s.length;p++){const b=e(s[p]);b!=null&&(s[m++]=b)}m<p&&(s.length=m),e=-513&(4|d),d=e&=-1025,d&=-4097}return d!==u&&(ri(s,d),2&d&&Object.freeze(s)),Rv(s,d,o,c,t,n,f,r)}function Rv(s,t,e,n,r,o,c,u){let d=t;return o===1||o===4&&(2&t||!(16&t)&&32&n)?$a(t)||((t|=!s.length||c&&!(4096&t)||32&n&&!(4096&t||16&t)?2:256)!==d&&ri(s,t),Object.freeze(s)):(o===2&&$a(t)&&(s=jn(s),d=0,t=Qa(t,n),n=ni(e,n,r,s)),$a(t)||(u||(t|=16),t!==d&&ri(s,t))),2&t||!(4096&t||16&t)||or(e,n),s}function Tg(s,t,e){return s=zs(s,t,e),Array.isArray(s)?s:rr}function xg(s,t){return 2&t&&(s|=2),1|s}function $a(s){return!!(2&s)&&!!(4&s)||!!(256&s)}function Lv(s){return gg(s,!0)}function Nv(s){s=jn(s);for(let t=0;t<s.length;t++){const e=s[t]=jn(s[t]);Array.isArray(e[1])&&(e[1]=rc(e[1]))}return Zl(s)}function fa(s,t,e,n){Lo(s),ni(s=s.v,0|s[Ct],t,(n==="0"?Number(e)===0:e===n)?void 0:e)}function No(s,t,e){if(2&t)throw Error();const n=Mo(t);let r=Tg(s,e,n),o=r===rr?7:0|r[Ct],c=xg(o,t);return(2&c||$a(c)||16&c)&&(c===o||$a(c)||ri(r,c),r=jn(r),o=0,c=Qa(c,t),ni(s,t,e,r,n)),c&=-13,c!==o&&ri(r,c),r}function gp(s,t){var e=x3;return kg(Cg(s=s.v),s,void 0,e)===t?t:-1}function Cg(s){if(ko)return s[Rl]??(s[Rl]=new Map);if(Rl in s)return s[Rl];const t=new Map;return Object.defineProperty(s,Rl,{value:t}),t}function Bv(s,t,e,n,r){const o=Cg(s),c=kg(o,s,t,e,r);return c!==n&&(c&&(t=ni(s,t,c,void 0,r)),o.set(e,n)),t}function kg(s,t,e,n,r){let o=s.get(n);if(o!=null)return o;o=0;for(let c=0;c<n.length;c++){const u=n[c];zs(t,u,r)!=null&&(o!==0&&(e=ni(t,e,o,void 0,r)),o=u)}return s.set(n,o),o}function Mg(s,t,e){let n=0|s[Ct];const r=Mo(n),o=zs(s,e,r);let c;if(o!=null&&o[yo]===bo){if(!cn(o))return Ro(o),o.v;c=o.v}else Array.isArray(o)&&(c=o);if(c){const u=0|c[Ct];2&u&&(c=Oo(c,u))}return c=Za(c,t),c!==o&&ni(s,n,e,c,r),c}function zv(s,t,e,n,r){let o=!1;if((n=zs(s,n,r,(c=>{const u=Ag(c,e,!1,t);return o=u!==c&&u!=null,u})))!=null)return o&&!cn(n)&&or(s,t),n}function te(s,t,e,n){let r=s.v,o=0|r[Ct];if((t=zv(r,o,t,e,n))==null)return t;if(o=0|r[Ct],!cn(s,o)){const c=Sg(t);c!==t&&(Ro(s)&&(r=s.v,o=0|r[Ct]),o=ni(r,o,e,t=c,n),or(r,o))}return t}function Fv(s,t,e,n,r,o,c,u){var d=cn(s,e);o=d?1:o,c=!!c||o===3,d=u&&!d,(o===2||d)&&Ro(s)&&(e=0|(t=s.v)[Ct]);var f=(s=Tg(t,r))===rr?7:0|s[Ct],p=xg(f,e);if(u=!(4&p)){var m=s,b=e;const v=!!(2&p);v&&(b|=2);let A=!v,_=!0,S=0,w=0;for(;S<m.length;S++){const x=Ag(m[S],n,!1,b);if(x instanceof n){if(!v){const C=cn(x);A&&=!C,_&&=C}m[w++]=x}}w<S&&(m.length=w),p|=4,p=_?-4097&p:4096|p,p=A?8|p:-9&p}if(p!==f&&(ri(s,p),2&p&&Object.freeze(s)),d&&!(8&p||!s.length&&(o===1||o===4&&(2&p||!(16&p)&&32&e)))){for($a(p)&&(s=jn(s),p=Qa(p,e),e=ni(t,e,r,s)),n=s,d=p,f=0;f<n.length;f++)(m=n[f])!==(p=Sg(m))&&(n[f]=p);d|=8,ri(s,p=d=n.length?4096|d:-4097&d)}return Rv(s,p,t,e,r,o,u,c)}function Fs(s,t,e){const n=s.v;return Fv(s,n,0|n[Ct],t,e,Va(),!1,!0)}function Pv(s){return s==null&&(s=void 0),s}function zt(s,t,e,n,r){return me(s,e,n=Pv(n),r),n&&!cn(n)&&or(s.v),s}function Xl(s,t,e,n){t:{var r=n=Pv(n);Lo(s);const o=s.v;let c=0|o[Ct];if(r==null){const u=Cg(o);if(kg(u,o,c,e)!==t)break t;u.set(e,0)}else c=Bv(o,c,e,t);ni(o,c,t,r)}n&&!cn(n)&&or(s.v)}function Qa(s,t){return-273&(2&t?2|s:-3&s)}function Dg(s,t,e,n){var r=n;Lo(s),s=Fv(s,n=s.v,0|n[Ct],e,t,2,!0),r=r??new e,s.push(r),t=e=s===rr?7:0|s[Ct],(r=cn(r))?(e&=-9,s.length===1&&(e&=-4097)):e|=4096,e!==t&&ri(s,e),r||or(n)}function Nn(s,t,e){return Do(ke(s,t,void 0,e))}function Iv(s){return(dg?ke(s,2,void 0,void 0,Qu):Qu(ke(s,2)))??nS}function Ve(s,t){return ke(s,t,void 0,void 0,as)??0}function Ps(s,t,e){if(e!=null){if(typeof e!="number"||!fh(e))throw Rp("int32");e|=0}me(s,t,e)}function Nt(s,t,e){me(s,t,Hl(e))}function un(s,t,e){fa(s,t,cc(e),"")}function th(s,t,e){{Lo(s);const c=s.v;let u=0|c[Ct];if(e==null)ni(c,u,t);else{var n=s=e===rr?7:0|e[Ct],r=$a(s),o=r||Object.isFrozen(e);for(r||(s=0),o||(e=jn(e),n=0,s=Qa(s,u),o=!1),s|=5,s|=(4&s?512&s?512:1024&s?1024:0:void 0)??(dg?1024:0),r=0;r<e.length;r++){const d=e[r],f=Mv(d);Object.is(d,f)||(o&&(e=jn(e),n=0,s=Qa(s,u),o=!1),e[r]=f)}s!==n&&(o&&(e=jn(e),s=Qa(s,u)),ri(e,s)),ni(c,u,t,e)}}}function mh(s,t,e){Lo(s),Xa(s,t,xi,2,!0).push(Mv(e))}var Zr=class{constructor(s,t,e){if(this.buffer=s,e&&!t)throw Error();this.g=t}};function Og(s,t){if(typeof s=="string")return new Zr(gv(s),t);if(Array.isArray(s))return new Zr(new Uint8Array(s),t);if(s.constructor===Uint8Array)return new Zr(s,!1);if(s.constructor===ArrayBuffer)return s=new Uint8Array(s),new Zr(s,!1);if(s.constructor===rs)return t=pg(s)||new Uint8Array(0),new Zr(t,!0,s);if(s instanceof Uint8Array)return s=s.constructor===Uint8Array?s:new Uint8Array(s.buffer,s.byteOffset,s.byteLength),new Zr(s,!1);throw Error()}function Ao(s,t){let e,n=0,r=0,o=0;const c=s.h;let u=s.g;do e=c[u++],n|=(127&e)<<o,o+=7;while(o<32&&128&e);if(o>32)for(r|=(127&e)>>4,o=3;o<32&&128&e;o+=7)e=c[u++],r|=(127&e)<<o;if(Ja(s,u),!(128&e))return t(n>>>0,r>>>0);throw Error()}function Rg(s){let t=0,e=s.g;const n=e+10,r=s.h;for(;e<n;){const o=r[e++];if(t|=o,(128&o)==0)return Ja(s,e),!!(127&t)}throw Error()}function ba(s){const t=s.h;let e=s.g,n=t[e++],r=127&n;if(128&n&&(n=t[e++],r|=(127&n)<<7,128&n&&(n=t[e++],r|=(127&n)<<14,128&n&&(n=t[e++],r|=(127&n)<<21,128&n&&(n=t[e++],r|=n<<28,128&n&&128&t[e++]&&128&t[e++]&&128&t[e++]&&128&t[e++]&&128&t[e++])))))throw Error();return Ja(s,e),r}function Is(s){return ba(s)>>>0}function eh(s){var t=s.h;const e=s.g;var n=t[e],r=t[e+1];const o=t[e+2];return t=t[e+3],Ja(s,s.g+4),s=2*((r=(n<<0|r<<8|o<<16|t<<24)>>>0)>>31)+1,n=r>>>23&255,r&=8388607,n==255?r?NaN:s*(1/0):n==0?1401298464324817e-60*s*r:s*Math.pow(2,n-150)*(r+8388608)}function sS(s){return ba(s)}function Ja(s,t){if(s.g=t,t>s.l)throw Error()}function Uv(s,t){if(t<0)throw Error();const e=s.g;if((t=e+t)>s.l)throw Error();return s.g=t,e}function Hv(s,t){if(t==0)return er();var e=Uv(s,t);return s.Y&&s.j?e=s.h.subarray(e,e+t):(s=s.h,e=e===(t=e+t)?new Uint8Array(0):Fw?s.slice(e,t):new Uint8Array(s.subarray(e,t))),e.length==0?er():new rs(e,go)}var Ky=[];function jv(s,t,e,n){if(ih.length){const r=ih.pop();return r.o(n),r.g.init(s,t,e,n),r}return new aS(s,t,e,n)}function Gv(s){s.g.clear(),s.l=-1,s.h=-1,ih.length<100&&ih.push(s)}function Vv(s){var t=s.g;if(t.g==t.l)return!1;s.m=s.g.g;var e=Is(s.g);if(t=e>>>3,!((e&=7)>=0&&e<=5)||t<1)throw Error();return s.l=t,s.h=e,!0}function qu(s){switch(s.h){case 0:s.h!=0?qu(s):Rg(s.g);break;case 1:Ja(s=s.g,s.g+8);break;case 2:if(s.h!=2)qu(s);else{var t=Is(s.g);Ja(s=s.g,s.g+t)}break;case 5:Ja(s=s.g,s.g+4);break;case 3:for(t=s.l;;){if(!Vv(s))throw Error();if(s.h==4){if(s.l!=t)throw Error();break}qu(s)}break;default:throw Error()}}function uc(s,t,e){const n=s.g.l;var r=Is(s.g);let o=(r=s.g.g+r)-n;if(o<=0&&(s.g.l=r,e(t,s,void 0,void 0,void 0),o=r-s.g.g),o)throw Error();return s.g.g=r,s.g.l=n,t}function Lg(s){var t=Is(s.g),e=Uv(s=s.g,t);if(s=s.h,mw){var n,r=s;(n=dp)||(n=dp=new TextDecoder("utf-8",{fatal:!0})),t=e+t,r=e===0&&t===r.length?r:r.subarray(e,t);try{var o=n.decode(r)}catch(u){if(Lu===void 0){try{n.decode(new Uint8Array([128]))}catch{}try{n.decode(new Uint8Array([97])),Lu=!0}catch{Lu=!1}}throw!Lu&&(dp=void 0),u}}else{t=(o=e)+t,e=[];let u,d=null;for(;o<t;){var c=s[o++];c<128?e.push(c):c<224?o>=t?ja():(u=s[o++],c<194||(192&u)!=128?(o--,ja()):e.push((31&c)<<6|63&u)):c<240?o>=t-1?ja():(u=s[o++],(192&u)!=128||c===224&&u<160||c===237&&u>=160||(192&(n=s[o++]))!=128?(o--,ja()):e.push((15&c)<<12|(63&u)<<6|63&n)):c<=244?o>=t-2?ja():(u=s[o++],(192&u)!=128||u-144+(c<<28)>>30!=0||(192&(n=s[o++]))!=128||(192&(r=s[o++]))!=128?(o--,ja()):(c=(7&c)<<18|(63&u)<<12|(63&n)<<6|63&r,c-=65536,e.push(55296+(c>>10&1023),56320+(1023&c)))):ja(),e.length>=8192&&(d=Oy(d,e),e.length=0)}o=Oy(d,e)}return o}function Xv(s){const t=Is(s.g);return Hv(s.g,t)}function yh(s,t,e){var n=Is(s.g);for(n=s.g.g+n;s.g.g<n;)e.push(t(s.g))}var aS=class{constructor(s,t,e,n){if(Ky.length){const r=Ky.pop();r.init(s,t,e,n),s=r}else s=new class{constructor(r,o,c,u){this.h=null,this.j=!1,this.g=this.l=this.m=0,this.init(r,o,c,u)}init(r,o,c,{Y:u=!1,ea:d=!1}={}){this.Y=u,this.ea=d,r&&(r=Og(r,this.ea),this.h=r.buffer,this.j=r.g,this.m=o||0,this.l=c!==void 0?this.m+c:this.h.length,this.g=this.m)}clear(){this.h=null,this.j=!1,this.g=this.l=this.m=0,this.Y=!1}}(s,t,e,n);this.g=s,this.m=this.g.g,this.h=this.l=-1,this.o(n)}o({ha:s=!1}={}){this.ha=s}},ih=[];function Wy(s){return s?/^\d+$/.test(s)?(dh(s),new Fp(Re,Qe)):null:rS||=new Fp(0,0)}var Fp=class{constructor(s,t){this.h=s>>>0,this.g=t>>>0}};let rS;function Zy(s){return s?/^-?\d+$/.test(s)?(dh(s),new Pp(Re,Qe)):null:oS||=new Pp(0,0)}var Pp=class{constructor(s,t){this.h=s>>>0,this.g=t>>>0}};let oS;function ro(s,t,e){for(;e>0||t>127;)s.g.push(127&t|128),t=(t>>>7|e<<25)>>>0,e>>>=7;s.g.push(t)}function Bo(s,t){for(;t>127;)s.g.push(127&t|128),t>>>=7;s.g.push(t)}function bh(s,t){if(t>=0)Bo(s,t);else{for(let e=0;e<9;e++)s.g.push(127&t|128),t>>=7;s.g.push(1)}}function Ng(s){var t=Re;s.g.push(t>>>0&255),s.g.push(t>>>8&255),s.g.push(t>>>16&255),s.g.push(t>>>24&255)}function wo(s,t){t.length!==0&&(s.l.push(t),s.h+=t.length)}function zn(s,t,e){Bo(s.g,8*t+e)}function Bg(s,t){return zn(s,t,2),t=s.g.end(),wo(s,t),t.push(s.h),t}function zg(s,t){var e=t.pop();for(e=s.h+s.g.length()-e;e>127;)t.push(127&e|128),e>>>=7,s.h++;t.push(e),s.h++}function vh(s,t,e){zn(s,t,2),Bo(s.g,e.length),wo(s,s.g.end()),wo(s,e)}function nh(s,t,e,n){e!=null&&(t=Bg(s,t),n(e,s),zg(s,t))}function cs(){const s=class{constructor(){throw Error()}};return Object.setPrototypeOf(s,s.prototype),s}var Fg=cs(),Yv=cs(),Pg=cs(),Ig=cs(),qv=cs(),Kv=cs(),lS=cs(),_h=cs(),Wv=cs(),Zv=cs();function us(s,t,e){var n=s.v;on&&on in n&&(n=n[on])&&delete n[t.g],t.h?t.j(s,t.h,t.g,e,t.l):t.j(s,t.g,e,t.l)}var kt=class{constructor(s,t){this.v=Ov(s,t,void 0,2048)}toJSON(){return Dv(this)}j(){var s=VS,t=this.v,e=s.g,n=on;if(ko&&n&&t[n]?.[e]!=null&&mo(Cw,3),t=s.g,Fy&&on&&Fy===void 0&&(n=(e=this.v)[on])&&(n=n.da))try{n(e,t,$w)}catch(r){hv(r)}return s.h?s.m(this,s.h,s.g,s.l):s.m(this,s.g,s.defaultValue,s.l)}clone(){const s=this.v,t=0|s[Ct];return Eg(this,s,t)?wg(this,s,!0):new this.constructor(Oo(s,t,!1))}};kt.prototype[yo]=bo,kt.prototype.toString=function(){return this.v.toString()};var zo=class{constructor(s,t,e){this.g=s,this.h=t,s=Fg,this.l=!!s&&e===s||!1}};function Ah(s,t){return new zo(s,t,Fg)}function $v(s,t,e,n,r){nh(s,e,e3(t,n),r)}const cS=Ah((function(s,t,e,n,r){return s.h===2&&(uc(s,Mg(t,n,e),r),!0)}),$v),uS=Ah((function(s,t,e,n,r){return s.h===2&&(uc(s,Mg(t,n,e),r),!0)}),$v);var wh=Symbol(),Sh=Symbol(),Ip=Symbol(),$y=Symbol(),Qy=Symbol();let Qv,Jv;function lr(s,t,e,n){var r=n[s];if(r)return r;(r={}).qa=n,r.T=(function(m){switch(typeof m){case"boolean":return tS||=[0,void 0,!0];case"number":return m>0?void 0:m===0?eS||=[0,void 0]:[-m,void 0];case"string":return[0,m];case"object":return m}})(n[0]);var o=n[1];let c=1;o&&o.constructor===Object&&(r.ba=o,typeof(o=n[++c])=="function"&&(r.ma=!0,Qv??=o,Jv??=n[c+1],o=n[c+=2]));const u={};for(;o&&Array.isArray(o)&&o.length&&typeof o[0]=="number"&&o[0]>0;){for(var d=0;d<o.length;d++)u[o[d]]=o;o=n[++c]}for(d=1;o!==void 0;){let m;typeof o=="number"&&(d+=o,o=n[++c]);var f=void 0;if(o instanceof zo?m=o:(m=cS,c--),m?.l){o=n[++c],f=n;var p=c;typeof o=="function"&&(o=o(),f[p]=o),f=o}for(p=d+1,typeof(o=n[++c])=="number"&&o<0&&(p-=o,o=n[++c]);d<p;d++){const b=u[d];f?e(r,d,m,f,b):t(r,d,m,b)}}return n[s]=r}function t3(s){return Array.isArray(s)?s[0]instanceof zo?s:[uS,s]:[s,void 0]}function e3(s,t){return s instanceof kt?s.v:Array.isArray(s)?Za(s,t):void 0}function Ug(s,t,e,n){const r=e.g;s[t]=n?(o,c,u)=>r(o,c,u,n):r}function Hg(s,t,e,n,r){const o=e.g;let c,u;s[t]=(d,f,p)=>o(d,f,p,u||=lr(Sh,Ug,Hg,n).T,c||=jg(n),r)}function jg(s){let t=s[Ip];if(t!=null)return t;const e=lr(Sh,Ug,Hg,s);return t=e.ma?(n,r)=>Qv(n,r,e):(n,r)=>{for(;Vv(r)&&r.h!=4;){var o=r.l,c=e[o];if(c==null){var u=e.ba;u&&(u=u[o])&&(u=dS(u))!=null&&(c=e[o]=u)}if(c==null||!c(r,n,o)){if(c=(u=r).m,qu(u),u.ha)var d=void 0;else d=u.g.g-c,u.g.g=c,d=Hv(u.g,d);c=void 0,u=n,d&&((c=u[on]??(u[on]=new zp))[o]??(c[o]=[])).push(d)}}return(n=ph(n))&&(n.da=e.qa[Qy]),!0},s[Ip]=t,s[Qy]=hS.bind(s),t}function hS(s,t,e,n){var r=this[Sh];const o=this[Ip],c=Za(void 0,r.T),u=ph(s);if(u){var d=!1,f=r.ba;if(f){if(r=(p,m,b)=>{if(b.length!==0)if(f[m])for(const v of b){p=jv(v);try{d=!0,o(c,p)}finally{Gv(p)}}else n?.(s,m,b)},t==null)Ju(u,r);else if(u!=null){const p=u[t];p&&r(u,t,p)}if(d){let p=0|s[Ct];if(2&p&&2048&p&&!e?.Ka)throw Error();const m=Mo(p),b=(v,A)=>{if(zs(s,v,m)!=null){if(e?.Qa===1)return;throw Error()}A!=null&&(p=ni(s,p,v,A,m)),delete u[v]};t==null?_v(c,0|c[Ct],((v,A)=>{b(v,A)})):b(t,zs(c,t,m))}}}}function dS(s){const t=(s=t3(s))[0].g;if(s=s[1]){const e=jg(s),n=lr(Sh,Ug,Hg,s).T;return(r,o,c)=>t(r,o,c,n,e)}return t}function Eh(s,t,e){s[t]=e.h}function Th(s,t,e,n){let r,o;const c=e.h;s[t]=(u,d,f)=>c(u,d,f,o||=lr(wh,Eh,Th,n).T,r||=i3(n))}function i3(s){let t=s[$y];if(!t){const e=lr(wh,Eh,Th,s);t=(n,r)=>n3(n,r,e),s[$y]=t}return t}function n3(s,t,e){_v(s,0|s[Ct],((n,r)=>{if(r!=null){var o=(function(c,u){var d=c[u];if(d)return d;if((d=c.ba)&&(d=d[u])){var f=(d=t3(d))[0].h;if(d=d[1]){const p=i3(d),m=lr(wh,Eh,Th,d).T;d=c.ma?Jv(m,p):(b,v,A)=>f(b,v,A,m,p)}else d=f;return c[u]=d}})(e,n);o?o(t,r,n):n<500||mo(Lp,3)}})),(s=ph(s))&&Ju(s,((n,r,o)=>{for(wo(t,t.g.end()),n=0;n<o.length;n++)wo(t,pg(o[n])||new Uint8Array(0))}))}const fS=ln(0);function Fo(s,t){if(Array.isArray(t)){var e=0|t[Ct];if(4&e)return t;for(var n=0,r=0;n<t.length;n++){const o=s(t[n]);o!=null&&(t[r++]=o)}return r<n&&(t.length=r),(s=-1537&(5|e))!==e&&ri(t,s),2&s&&Object.freeze(t),t}}function Ri(s,t,e){return new zo(s,t,e)}function Po(s,t,e){return new zo(s,t,e)}function mi(s,t,e){ni(s,0|s[Ct],t,e,Mo(0|s[Ct]))}var pS=Ah((function(s,t,e,n,r){if(s.h!==2)return!1;if(s=jn(s=uc(s,Za([void 0,void 0],n),r)),r=Mo(n=0|t[Ct]),2&n)throw Error();let o=zs(t,e,r);if(o instanceof Bs)(2&o.J)!=0?(o=o.V(),o.push(s),ni(t,n,e,o,r)):o.Ma(s);else if(Array.isArray(o)){var c=0|o[Ct];8192&c||ri(o,c|=8192),2&c&&(o=Nv(o),ni(t,n,e,o,r)),o.push(s)}else ni(t,n,e,Zl([s]),r);return!0}),(function(s,t,e,n,r){if(t instanceof Bs)t.forEach(((o,c)=>{nh(s,e,Za([c,o],n),r)}));else if(Array.isArray(t)){for(let o=0;o<t.length;o++){const c=t[o];Array.isArray(c)&&nh(s,e,Za(c,n),r)}Zl(t)}}));function s3(s,t,e){(t=as(t))!=null&&(zn(s,e,5),s=s.g,mg(t),Ng(s))}function a3(s,t,e){if(t=(function(n){if(n==null)return n;const r=typeof n;if(r==="bigint")return String(oc(64,n));if(lc(n)){if(r==="string")return xv(n);if(r==="number")return _g(n)}})(t),t!=null&&(typeof t=="string"&&Zy(t),t!=null))switch(zn(s,e,0),typeof t){case"number":s=s.g,vo(t),ro(s,Re,Qe);break;case"bigint":e=BigInt.asUintN(64,t),e=new Pp(Number(e&BigInt(4294967295)),Number(e>>BigInt(32))),ro(s.g,e.h,e.g);break;default:e=Zy(t),ro(s.g,e.h,e.g)}}function r3(s,t,e){(t=Do(t))!=null&&t!=null&&(zn(s,e,0),bh(s.g,t))}function o3(s,t,e){(t=Sv(t))!=null&&(zn(s,e,0),s.g.g.push(t?1:0))}function l3(s,t,e){(t=xi(t))!=null&&vh(s,e,uv(t))}function c3(s,t,e,n,r){nh(s,e,e3(t,n),r)}function u3(s,t,e){(t=t==null||typeof t=="string"||t instanceof rs?t:void 0)!=null&&vh(s,e,Og(t,!0).buffer)}function h3(s,t,e){return(s.h===5||s.h===2)&&(t=No(t,0|t[Ct],e),s.h==2?yh(s,eh,t):t.push(eh(s.g)),!0)}var Je=Ri((function(s,t,e){return s.h===5&&(mi(t,e,eh(s.g)),!0)}),s3,_h),gS=Po(h3,(function(s,t,e){if((t=Fo(as,t))!=null)for(let c=0;c<t.length;c++){var n=s,r=e,o=t[c];o!=null&&(zn(n,r,5),n=n.g,mg(o),Ng(n))}}),_h),Gg=Po(h3,(function(s,t,e){if((t=Fo(as,t))!=null&&t.length){zn(s,e,2),Bo(s.g,4*t.length);for(let n=0;n<t.length;n++)e=s.g,mg(t[n]),Ng(e)}}),_h),mS=Ri((function(s,t,e){return s.h===5&&(mi(t,e,(s=eh(s.g))===0?void 0:s),!0)}),s3,_h),va=Ri((function(s,t,e){return hg?(s.h!==0?s=!1:(mi(t,e,Ao(s.g,wv)),s=!0),s):s.h===0&&(mi(t,e,Ao(s.g,yg)),!0)}),a3,Kv),mp=Ri((function(s,t,e){return hg?(s.h!==0?t=!1:(mi(t,e,(s=Ao(s.g,wv))===fS?void 0:s),t=!0),t):s.h===0&&(mi(t,e,(s=Ao(s.g,yg))===0?void 0:s),!0)}),a3,Kv),yS=Ri((function(s,t,e){return hg?(s.h!==0?s=!1:(mi(t,e,Ao(s.g,Iw)),s=!0),s):s.h===0&&(mi(t,e,Ao(s.g,Bp)),!0)}),(function(s,t,e){if(t=(function(n){if(n==null)return n;var r=typeof n;if(r==="bigint")return String(Uw(64,n));if(lc(n)){if(r==="string")return r=_o(Number(n)),nr(r)&&r>=0?n=String(r):((r=n.indexOf("."))!==-1&&(n=n.substring(0,r)),(r=n[0]!=="-"&&((r=n.length)<20||r===20&&n<="18446744073709551615"))||(dh(n),n=$l(Re,Qe))),n;if(r==="number")return(n=_o(n))>=0&&nr(n)||(vo(n),n=Bp(Re,Qe)),n}})(t),t!=null&&(typeof t=="string"&&Wy(t),t!=null))switch(zn(s,e,0),typeof t){case"number":s=s.g,vo(t),ro(s,Re,Qe);break;case"bigint":e=BigInt.asUintN(64,t),e=new Fp(Number(e&BigInt(4294967295)),Number(e>>BigInt(32))),ro(s.g,e.h,e.g);break;default:e=Wy(t),ro(s.g,e.h,e.g)}}),lS),gi=Ri((function(s,t,e){return s.h===0&&(mi(t,e,ba(s.g)),!0)}),r3,Ig),hc=Po((function(s,t,e){return(s.h===0||s.h===2)&&(t=No(t,0|t[Ct],e),s.h==2?yh(s,ba,t):t.push(ba(s.g)),!0)}),(function(s,t,e){if((t=Fo(Do,t))!=null&&t.length){e=Bg(s,e);for(let n=0;n<t.length;n++)bh(s.g,t[n]);zg(s,e)}}),Ig),io=Ri((function(s,t,e){return s.h===0&&(mi(t,e,(s=ba(s.g))===0?void 0:s),!0)}),r3,Ig),Xe=Ri((function(s,t,e){return s.h===0&&(mi(t,e,Rg(s.g)),!0)}),o3,Yv),tr=Ri((function(s,t,e){return s.h===0&&(mi(t,e,(s=Rg(s.g))===!1?void 0:s),!0)}),o3,Yv),ki=Po((function(s,t,e){return s.h===2&&(s=Lg(s),No(t,0|t[Ct],e).push(s),!0)}),(function(s,t,e){if((t=Fo(xi,t))!=null)for(let c=0;c<t.length;c++){var n=s,r=e,o=t[c];o!=null&&vh(n,r,uv(o))}}),Pg),pa=Ri((function(s,t,e){return s.h===2&&(mi(t,e,(s=Lg(s))===""?void 0:s),!0)}),l3,Pg),_e=Ri((function(s,t,e){return s.h===2&&(mi(t,e,Lg(s)),!0)}),l3,Pg),pi=(function(s,t,e=Fg){return new zo(s,t,e)})((function(s,t,e,n,r){return s.h===2&&(n=Za(void 0,n),No(t,0|t[Ct],e).push(n),uc(s,n,r),!0)}),(function(s,t,e,n,r){if(Array.isArray(t)){for(let o=0;o<t.length;o++)c3(s,t[o],e,n,r);1&(s=0|t[Ct])||ri(t,1|s)}})),Ge=Ah((function(s,t,e,n,r,o){if(s.h!==2)return!1;let c=0|t[Ct];return Bv(t,c,o,e,Mo(c)),uc(s,t=Mg(t,n,e),r),!0}),c3),d3=Ri((function(s,t,e){return s.h===2&&(mi(t,e,Xv(s)),!0)}),u3,Wv),bS=Po((function(s,t,e){return(s.h===0||s.h===2)&&(t=No(t,0|t[Ct],e),s.h==2?yh(s,Is,t):t.push(Is(s.g)),!0)}),(function(s,t,e){if((t=Fo(Ev,t))!=null)for(let c=0;c<t.length;c++){var n=s,r=e,o=t[c];o!=null&&(zn(n,r,0),Bo(n.g,o))}}),qv),vS=Ri((function(s,t,e){return s.h===0&&(mi(t,e,(s=Is(s.g))===0?void 0:s),!0)}),(function(s,t,e){(t=Ev(t))!=null&&t!=null&&(zn(s,e,0),Bo(s.g,t))}),qv),hn=Ri((function(s,t,e){return s.h===0&&(mi(t,e,ba(s.g)),!0)}),(function(s,t,e){(t=Do(t))!=null&&(t=parseInt(t,10),zn(s,e,0),bh(s.g,t))}),Zv);class _S{constructor(t,e){var n=fn;this.g=t,this.h=e,this.m=te,this.j=zt,this.defaultValue=void 0,this.l=n.Oa!=null?Av:void 0}register(){ch(this)}}function hs(s,t){return new _S(s,t)}function wa(s,t){return(e,n)=>{{const o={ea:!0};n&&Object.assign(o,n),e=jv(e,void 0,void 0,o);try{const c=new s,u=c.v;jg(t)(u,e);var r=c}finally{Gv(e)}}return r}}function xh(s){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const c=this.g;return this.g=[],c}}}};n3(this.v,t,lr(wh,Eh,Th,s)),wo(t,t.g.end());const e=new Uint8Array(t.h),n=t.l,r=n.length;let o=0;for(let c=0;c<r;c++){const u=n[c];e.set(u,o),o+=u.length}return t.l=[e],e}}var Jy=class extends kt{constructor(s){super(s)}},tb=[0,pa,Ri((function(s,t,e){return s.h===2&&(mi(t,e,(s=Xv(s))===er()?void 0:s),!0)}),(function(s,t,e){if(t!=null){if(t instanceof kt){const n=t.Ra;return void(n?(t=n(t),t!=null&&vh(s,e,Og(t,!0).buffer)):mo(Lp,3))}if(Array.isArray(t))return void mo(Lp,3)}u3(s,t,e)}),Wv)];let yp,eb=globalThis.trustedTypes;function ib(s){var t;return yp===void 0&&(yp=(function(){let e=null;if(!eb)return e;try{const n=r=>r;e=eb.createPolicy("goog#html",{createHTML:n,createScript:n,createScriptURL:n})}catch{}return e})()),s=(t=yp)?t.createScriptURL(s):s,new class{constructor(e){this.g=e}toString(){return this.g+""}}(s)}function AS(s,...t){if(t.length===0)return ib(s[0]);let e=s[0];for(let n=0;n<t.length;n++)e+=encodeURIComponent(t[n])+s[n+1];return ib(e)}var f3=[0,gi,hn,Xe,-1,hc,hn,-1,Xe],wS=class extends kt{constructor(s){super(s)}},p3=[0,Xe,_e,Xe,hn,-1,Po((function(s,t,e){return(s.h===0||s.h===2)&&(t=No(t,0|t[Ct],e),s.h==2?yh(s,sS,t):t.push(ba(s.g)),!0)}),(function(s,t,e){if((t=Fo(Do,t))!=null&&t.length){e=Bg(s,e);for(let n=0;n<t.length;n++)bh(s.g,t[n]);zg(s,e)}}),Zv),_e,-1,[0,Xe,-1],hn,Xe,-1],g3=[0,3,Xe,-1,2,[0,gi],[0,hn,Xe],[0,_e,-1],[0]],m3=[0,_e,-2],nb=class extends kt{constructor(s){super(s)}},y3=[0],b3=[0,gi,Xe,1,Xe,-4],fn=class extends kt{constructor(s){super(s,2)}},si={};si[336783863]=[0,_e,Xe,-1,gi,[0,[1,2,3,4,5,6,7,8,9],Ge,y3,Ge,p3,Ge,m3,Ge,b3,Ge,f3,Ge,[0,_e,-2],Ge,[0,_e,hn],Ge,g3,Ge,[0,hn,-1,Xe]],[0,_e],Xe,[0,[1,3],[2,4],Ge,[0,hc],-1,Ge,[0,ki],-1,pi,[0,_e,-1]],_e];var sb=[0,mp,-1,tr,-3,mp,hc,pa,io,mp,-1,tr,io,tr,-2,pa];function Me(s,t){mh(s,3,t)}function Zt(s,t){mh(s,4,t)}var Yi=class extends kt{constructor(s){super(s,500)}o(s){return zt(this,0,7,s)}},Yl=[-1,{}],ab=[0,_e,1,Yl],rb=[0,_e,ki,Yl];function Fn(s,t){Dg(s,1,Yi,t)}function Le(s,t){mh(s,10,t)}function re(s,t){mh(s,15,t)}var pn=class extends kt{constructor(s){super(s,500)}o(s){return zt(this,0,1001,s)}},v3=[-500,pi,[-500,pa,-1,ki,-3,[-2,si,Xe],pi,tb,io,-1,ab,rb,pi,[0,pa,tr],pa,sb,io,ki,987,ki],4,pi,[-500,_e,-1,[-1,{}],998,_e],pi,[-500,_e,ki,-1,[-2,{},Xe],997,ki,-1],io,pi,[-500,_e,ki,Yl,998,ki],ki,io,ab,rb,pi,[0,pa,-1,Yl],ki,-2,sb,pa,-1,tr,[0,tr,vS],978,Yl,pi,tb];pn.prototype.g=xh(v3);var SS=wa(pn,v3),ES=class extends kt{constructor(s){super(s)}},_3=class extends kt{constructor(s){super(s)}g(){return Fs(this,ES,1)}},A3=[0,pi,[0,gi,Je,_e,-1]],Ch=wa(_3,A3),TS=class extends kt{constructor(s){super(s)}},xS=class extends kt{constructor(s){super(s)}},bp=class extends kt{constructor(s){super(s)}l(){return te(this,TS,2)}g(){return Fs(this,xS,5)}},w3=wa(class extends kt{constructor(s){super(s)}},[0,ki,hc,Gg,[0,hn,[0,gi,-3],[0,Je,-3],[0,gi,-1,[0,pi,[0,gi,-2]]],pi,[0,Je,-1,_e,Je]],_e,-1,va,pi,[0,gi,Je],ki,va]),S3=class extends kt{constructor(s){super(s)}},oo=wa(class extends kt{constructor(s){super(s)}},[0,pi,[0,Je,-4]]),E3=class extends kt{constructor(s){super(s)}},dc=wa(class extends kt{constructor(s){super(s)}},[0,pi,[0,Je,-4]]),CS=class extends kt{constructor(s){super(s)}},kS=[0,gi,-1,Gg,hn],T3=class extends kt{constructor(s){super(s)}};T3.prototype.g=xh([0,Je,-4,va]);var MS=class extends kt{constructor(s){super(s)}},DS=wa(class extends kt{constructor(s){super(s)}},[0,pi,[0,1,gi,_e,A3],va]),ob=class extends kt{constructor(s){super(s)}},OS=class extends kt{constructor(s){super(s)}na(){const s=ke(this,1,void 0,void 0,Lv);return s??er()}},RS=class extends kt{constructor(s){super(s)}},x3=[1,2],LS=wa(class extends kt{constructor(s){super(s)}},[0,pi,[0,x3,Ge,[0,Gg],Ge,[0,d3],gi,_e],va]),Vg=class extends kt{constructor(s){super(s)}},C3=[0,_e,gi,Je,ki,-1],lb=class extends kt{constructor(s){super(s)}},NS=[0,Xe,-1],cb=class extends kt{constructor(s){super(s)}},Ku=[1,2,3,4,5,6],sh=class extends kt{constructor(s){super(s)}g(){return ke(this,1,void 0,void 0,Lv)!=null}l(){return xi(ke(this,2))!=null}},Ie=class extends kt{constructor(s){super(s)}g(){return Sv(ke(this,2))??!1}},k3=[0,d3,_e,[0,gi,va,-1],[0,yS,va]],ti=[0,k3,Xe,[0,Ku,Ge,b3,Ge,p3,Ge,f3,Ge,y3,Ge,m3,Ge,g3],hn],kh=class extends kt{constructor(s){super(s)}},Xg=[0,ti,Je,-1,gi],BS=hs(502141897,kh);si[502141897]=Xg;var zS=wa(class extends kt{constructor(s){super(s)}},[0,[0,hn,-1,gS,bS],kS]),M3=class extends kt{constructor(s){super(s)}},D3=class extends kt{constructor(s){super(s)}},Up=[0,ti,Je,[0,ti],Xe],FS=hs(508968150,D3);si[508968150]=[0,ti,Xg,Up,Je,[0,[0,k3]]],si[508968149]=Up;var $r=class extends kt{constructor(s){super(s)}l(){return te(this,Vg,2)}g(){me(this,2)}},O3=[0,ti,C3];si[478825465]=O3;var PS=class extends kt{constructor(s){super(s)}},R3=class extends kt{constructor(s){super(s)}},Yg=class extends kt{constructor(s){super(s)}},qg=class extends kt{constructor(s){super(s)}},L3=class extends kt{constructor(s){super(s)}},ub=[0,ti,[0,ti],O3,-1],N3=[0,ti,Je,gi],Kg=[0,ti,Je],B3=[0,ti,N3,Kg,Je],IS=hs(479097054,L3);si[479097054]=[0,ti,B3,ub],si[463370452]=ub,si[464864288]=N3;var US=hs(462713202,qg);si[462713202]=B3,si[474472470]=Kg;var HS=class extends kt{constructor(s){super(s)}},z3=class extends kt{constructor(s){super(s)}},F3=class extends kt{constructor(s){super(s)}},P3=class extends kt{constructor(s){super(s)}},Wg=[0,ti,Je,-1,gi],Hp=[0,ti,Je,Xe];P3.prototype.g=xh([0,ti,Kg,[0,ti],Xg,Up,Wg,Hp]);var I3=class extends kt{constructor(s){super(s)}},jS=hs(456383383,I3);si[456383383]=[0,ti,C3];var U3=class extends kt{constructor(s){super(s)}},GS=hs(476348187,U3);si[476348187]=[0,ti,NS];var H3=class extends kt{constructor(s){super(s)}},hb=class extends kt{constructor(s){super(s)}},j3=[0,hn,-1],VS=hs(458105876,class extends kt{constructor(s){super(s)}g(){let s;var t=this.v;const e=0|t[Ct];return s=cn(this,e),t=(function(n,r,o,c){var u=hb;!c&&Ro(n)&&(o=0|(r=n.v)[Ct]);var d=zs(r,2);if(n=!1,d==null){if(c)return Xy();d=[]}else if(d.constructor===Bs){if(!(2&d.J)||c)return d;d=d.V()}else Array.isArray(d)?n=!!(2&(0|d[Ct])):d=[];if(c){if(!d.length)return Xy();n||(n=!0,rc(d))}else n&&(n=!1,Zl(d),d=Nv(d));return!n&&32&o&&ac(d,32),o=ni(r,o,2,c=new Bs(d,u,Vw,void 0)),n||or(r,o),c})(this,t,e,s),!s&&hb&&(t.ra=!0),t}});si[458105876]=[0,j3,pS,[!0,va,[0,_e,-1,ki]],[0,hc,Xe,hn]];var Zg=class extends kt{constructor(s){super(s)}},G3=hs(458105758,Zg);si[458105758]=[0,ti,_e,j3];var vp=class extends kt{constructor(s){super(s)}},db=[0,mS,-1,tr],XS=class extends kt{constructor(s){super(s)}},V3=class extends kt{constructor(s){super(s)}},jp=[1,2];V3.prototype.g=xh([0,jp,Ge,db,Ge,[0,pi,db]]);var X3=class extends kt{constructor(s){super(s)}},YS=hs(443442058,X3);si[443442058]=[0,ti,_e,gi,Je,ki,-1,Xe,Je],si[514774813]=Wg;var Y3=class extends kt{constructor(s){super(s)}},qS=hs(516587230,Y3);function Gp(s,t){return t=t?t.clone():new Vg,s.displayNamesLocale!==void 0?me(t,1,cc(s.displayNamesLocale)):s.displayNamesLocale===void 0&&me(t,1),s.maxResults!==void 0?Ps(t,2,s.maxResults):"maxResults"in s&&me(t,2),s.scoreThreshold!==void 0?Nt(t,3,s.scoreThreshold):"scoreThreshold"in s&&me(t,3),s.categoryAllowlist!==void 0?th(t,4,s.categoryAllowlist):"categoryAllowlist"in s&&me(t,4),s.categoryDenylist!==void 0?th(t,5,s.categoryDenylist):"categoryDenylist"in s&&me(t,5),t}function q3(s){const t=Number(s);return Number.isSafeInteger(t)?t:String(s)}function $g(s,t=-1,e=""){return{categories:s.map((n=>({index:Nn(n,1)??0??-1,score:Ve(n,2)??0,categoryName:xi(ke(n,3))??""??"",displayName:xi(ke(n,4))??""??""}))),headIndex:t,headName:e}}function KS(s){const t={classifications:Fs(s,MS,1).map((e=>$g(te(e,_3,4)?.g()??[],Nn(e,2)??0,xi(ke(e,3))??"")))};return(function(e){return Gw(dg?ke(e,2,void 0,void 0,Qu):ke(e,2))})(s)!=null&&(t.timestampMs=q3(Iv(s))),t}function K3(s){var t=Xa(s,3,as,Va()),e=Xa(s,2,Do,Va()),n=Xa(s,1,xi,Va()),r=Xa(s,9,xi,Va());const o={categories:[],keypoints:[]};for(let c=0;c<t.length;c++)o.categories.push({score:t[c],index:e[c]??-1,categoryName:n[c]??"",displayName:r[c]??""});if((t=te(s,bp,4)?.l())&&(o.boundingBox={originX:Nn(t,1,ha)??0,originY:Nn(t,2,ha)??0,width:Nn(t,3,ha)??0,height:Nn(t,4,ha)??0,angle:0}),te(s,bp,4)?.g().length)for(const c of te(s,bp,4).g())o.keypoints.push({x:ke(c,1,void 0,ha,as)??0,y:ke(c,2,void 0,ha,as)??0,score:ke(c,4,void 0,ha,as)??0,label:xi(ke(c,3,void 0,ha))??""});return o}function Mh(s){const t=[];for(const e of Fs(s,E3,1))t.push({x:Ve(e,1)??0,y:Ve(e,2)??0,z:Ve(e,3)??0,visibility:Ve(e,4)??0});return t}function ql(s){const t=[];for(const e of Fs(s,S3,1))t.push({x:Ve(e,1)??0,y:Ve(e,2)??0,z:Ve(e,3)??0,visibility:Ve(e,4)??0});return t}function fb(s){return Array.from(s,(t=>t>127?t-256:t))}function pb(s,t){if(s.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${s.length} vs. ${t.length}).`);let e=0,n=0,r=0;for(let o=0;o<s.length;o++)e+=s[o]*t[o],n+=s[o]*s[o],r+=t[o]*t[o];if(n<=0||r<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return e/Math.sqrt(n*r)}let Nu;si[516587230]=[0,ti,Wg,Hp,Je],si[518928384]=Hp;const WS=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function W3(){if(Nu===void 0)try{await WebAssembly.instantiate(WS),Nu=!0}catch{Nu=!1}return Nu}async function Ll(s,t=AS``){const e=await W3()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${s}_${e}.js`,wasmBinaryPath:`${t}/${s}_${e}.wasm`}}var Ga=class{};function Z3(){var s=navigator;return typeof OffscreenCanvas<"u"&&(!(function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")})(s)||!!((s=s.userAgent.match(/Version\/([\d]+).*Safari/))&&s.length>=1&&Number(s[1])>=17))}async function gb(s){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=s.toString(),t.crossOrigin="anonymous",new Promise(((e,n)=>{t.addEventListener("load",(()=>{e()}),!1),t.addEventListener("error",(r=>{n(r)}),!1),document.body.appendChild(t)}))}try{importScripts(s.toString())}catch(t){if(!(t instanceof TypeError))throw t;await self.import(s.toString())}}function $3(s){return s.videoWidth!==void 0?[s.videoWidth,s.videoHeight]:s.naturalWidth!==void 0?[s.naturalWidth,s.naturalHeight]:s.displayWidth!==void 0?[s.displayWidth,s.displayHeight]:[s.width,s.height]}function Mt(s,t,e){s.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),e(t=s.i.stringToNewUTF8(t)),s.i._free(t)}function mb(s,t,e){if(!s.i.canvas)throw Error("No OpenGL canvas configured.");if(e?s.i._bindTextureToStream(e):s.i._bindTextureToCanvas(),!(e=s.i.canvas.getContext("webgl2")||s.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");s.i.gpuOriginForWebTexturesIsBottomLeft&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),s.i.gpuOriginForWebTexturesIsBottomLeft&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);const[n,r]=$3(t);return!s.l||n===s.i.canvas.width&&r===s.i.canvas.height||(s.i.canvas.width=n,s.i.canvas.height=r),[n,r]}function yb(s,t,e){s.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const n=new Uint32Array(t.length);for(let r=0;r<t.length;r++)n[r]=s.i.stringToNewUTF8(t[r]);t=s.i._malloc(4*n.length),s.i.HEAPU32.set(n,t>>2),e(t);for(const r of n)s.i._free(r);s.i._free(t)}function Jn(s,t,e){s.i.simpleListeners=s.i.simpleListeners||{},s.i.simpleListeners[t]=e}function da(s,t,e){let n=[];s.i.simpleListeners=s.i.simpleListeners||{},s.i.simpleListeners[t]=(r,o,c)=>{o?(e(n,c),n=[]):n.push(r)}}Ga.forVisionTasks=function(s){return Ll("vision",s)},Ga.forTextTasks=function(s){return Ll("text",s)},Ga.forGenAiExperimentalTasks=function(s){return Ll("genai_experimental",s)},Ga.forGenAiTasks=function(s){return Ll("genai",s)},Ga.forAudioTasks=function(s){return Ll("audio",s)},Ga.isSimdSupported=function(){return W3()};async function ZS(s,t,e,n){return s=await(async(r,o,c,u,d)=>{if(o&&await gb(o),!self.ModuleFactory||c&&(await gb(c),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&d&&((o=self.Module).locateFile=d.locateFile,d.mainScriptUrlOrBlob&&(o.mainScriptUrlOrBlob=d.mainScriptUrlOrBlob)),d=await self.ModuleFactory(self.Module||d),self.ModuleFactory=self.Module=void 0,new r(d,u)})(s,e.wasmLoaderPath,e.assetLoaderPath,t,{locateFile:r=>r.endsWith(".wasm")?e.wasmBinaryPath.toString():e.assetBinaryPath&&r.endsWith(".data")?e.assetBinaryPath.toString():r}),await s.o(n),s}function _p(s,t){const e=te(s.baseOptions,sh,1)||new sh;typeof t=="string"?(me(e,2,cc(t)),me(e,1)):t instanceof Uint8Array&&(me(e,1,gg(t,!1)),me(e,2)),zt(s.baseOptions,0,1,e)}function bb(s){try{const t=s.H.length;if(t===1)throw Error(s.H[0].message);if(t>1)throw Error("Encountered multiple errors: "+s.H.map((e=>e.message)).join(", "))}finally{s.H=[]}}function Et(s,t){s.C=Math.max(s.C,t)}function Dh(s,t){s.B=new Yi,un(s.B,2,"PassThroughCalculator"),Me(s.B,"free_memory"),Zt(s.B,"free_memory_unused_out"),Le(t,"free_memory"),Fn(t,s.B)}function So(s,t){Me(s.B,t),Zt(s.B,t+"_unused_out")}function Oh(s){s.g.addBoolToStream(!0,"free_memory",s.C)}var Vp=class{constructor(s){this.g=s,this.H=[],this.C=0,this.g.setAutoRenderToScreen(!1)}l(s,t=!0){if(t){const e=s.baseOptions||{};if(s.baseOptions?.modelAssetBuffer&&s.baseOptions?.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(te(this.baseOptions,sh,1)?.g()||te(this.baseOptions,sh,1)?.l()||s.baseOptions?.modelAssetBuffer||s.baseOptions?.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if((function(n,r){let o=te(n.baseOptions,cb,3);if(!o){var c=o=new cb,u=new nb;Xl(c,4,Ku,u)}"delegate"in r&&(r.delegate==="GPU"?(r=o,c=new wS,Xl(r,2,Ku,c)):(r=o,c=new nb,Xl(r,4,Ku,c))),zt(n.baseOptions,0,3,o)})(this,e),e.modelAssetPath)return fetch(e.modelAssetPath.toString()).then((n=>{if(n.ok)return n.arrayBuffer();throw Error(`Failed to fetch model: ${e.modelAssetPath} (${n.status})`)})).then((n=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(n),!0,!1,!1),_p(this,"/model.dat"),this.m(),this.L()}));if(e.modelAssetBuffer instanceof Uint8Array)_p(this,e.modelAssetBuffer);else if(e.modelAssetBuffer)return(async function(n){const r=[];for(var o=0;;){const{done:c,value:u}=await n.read();if(c)break;r.push(u),o+=u.length}if(r.length===0)return new Uint8Array(0);if(r.length===1)return r[0];n=new Uint8Array(o),o=0;for(const c of r)n.set(c,o),o+=c.length;return n})(e.modelAssetBuffer).then((n=>{_p(this,n),this.m(),this.L()}))}return this.m(),this.L(),Promise.resolve()}L(){}ca(){let s;if(this.g.ca((t=>{s=SS(t)})),!s)throw Error("Failed to retrieve CalculatorGraphConfig");return s}setGraph(s,t){this.g.attachErrorListener(((e,n)=>{this.H.push(Error(n))})),this.g.Ja(),this.g.setGraph(s,t),this.B=void 0,bb(this)}finishProcessing(){this.g.finishProcessing(),bb(this)}close(){this.B=void 0,this.g.closeGraph()}};function ya(s,t){if(!s)throw Error(`Unable to obtain required WebGL resource: ${t}`);return s}Vp.prototype.close=Vp.prototype.close;class $S{constructor(t,e,n,r){this.g=t,this.h=e,this.m=n,this.l=r}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function vb(s,t,e){const n=s.g;if(e=ya(n.createShader(e),"Failed to create WebGL shader"),n.shaderSource(e,t),n.compileShader(e),!n.getShaderParameter(e,n.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${n.getShaderInfoLog(e)}`);return n.attachShader(s.h,e),e}function _b(s,t){const e=s.g,n=ya(e.createVertexArray(),"Failed to create vertex array");e.bindVertexArray(n);const r=ya(e.createBuffer(),"Failed to create buffer");e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(s.O),e.vertexAttribPointer(s.O,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),e.STATIC_DRAW);const o=ya(e.createBuffer(),"Failed to create buffer");return e.bindBuffer(e.ARRAY_BUFFER,o),e.enableVertexAttribArray(s.L),e.vertexAttribPointer(s.L,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindVertexArray(null),new $S(e,n,r,o)}function Qg(s,t){if(s.g){if(t!==s.g)throw Error("Cannot change GL context once initialized")}else s.g=t}function QS(s,t,e,n){return Qg(s,t),s.h||(s.m(),s.D()),e?(s.u||(s.u=_b(s,!0)),e=s.u):(s.A||(s.A=_b(s,!1)),e=s.A),t.useProgram(s.h),e.bind(),s.l(),s=n(),e.g.bindVertexArray(null),s}function Q3(s,t,e){return Qg(s,t),s=ya(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),s}function J3(s,t,e){Qg(s,t),s.B||(s.B=ya(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,s.B),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}function JS(s){s.g?.bindFramebuffer(s.g.FRAMEBUFFER,null)}var t_=class{H(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const s=this.g;if(this.h=ya(s.createProgram(),"Failed to create WebGL program"),this.X=vb(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,s.VERTEX_SHADER),this.W=vb(this,this.H(),s.FRAGMENT_SHADER),s.linkProgram(this.h),!s.getProgramParameter(this.h,s.LINK_STATUS))throw Error(`Error during program linking: ${s.getProgramInfoLog(this.h)}`);this.O=s.getAttribLocation(this.h,"aVertex"),this.L=s.getAttribLocation(this.h,"aTex")}D(){}l(){}close(){if(this.h){const s=this.g;s.deleteProgram(this.h),s.deleteShader(this.X),s.deleteShader(this.W)}this.B&&this.g.deleteFramebuffer(this.B),this.A&&this.A.close(),this.u&&this.u.close()}};function Ns(s,t){switch(t){case 0:return s.g.find((e=>e instanceof Uint8Array));case 1:return s.g.find((e=>e instanceof Float32Array));case 2:return s.g.find((e=>typeof WebGLTexture<"u"&&e instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function Xp(s){var t=Ns(s,1);if(!t){if(t=Ns(s,0))t=new Float32Array(t).map((n=>n/255));else{t=new Float32Array(s.width*s.height);const n=Eo(s);var e=Jg(s);if(J3(e,n,e_(s)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){e=new Float32Array(s.width*s.height*4),n.readPixels(0,0,s.width,s.height,n.RGBA,n.FLOAT,e);for(let r=0,o=0;r<t.length;++r,o+=4)t[r]=e[o]}else n.readPixels(0,0,s.width,s.height,n.RED,n.FLOAT,t)}s.g.push(t)}return t}function e_(s){let t=Ns(s,2);if(!t){const e=Eo(s);t=n_(s);const n=Xp(s),r=i_(s);e.texImage2D(e.TEXTURE_2D,0,r,s.width,s.height,0,e.RED,e.FLOAT,n),Yp(s)}return t}function Eo(s){if(!s.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return s.h||(s.h=ya(s.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),s.h}function i_(s){if(s=Eo(s),!Bu)if(s.getExtension("EXT_color_buffer_float")&&s.getExtension("OES_texture_float_linear")&&s.getExtension("EXT_float_blend"))Bu=s.R32F;else{if(!s.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");Bu=s.R16F}return Bu}function Jg(s){return s.l||(s.l=new t_),s.l}function n_(s){const t=Eo(s);t.viewport(0,0,s.width,s.height),t.activeTexture(t.TEXTURE0);let e=Ns(s,2);return e||(e=Q3(Jg(s),t,s.m?t.LINEAR:t.NEAREST),s.g.push(e),s.j=!0),t.bindTexture(t.TEXTURE_2D,e),e}function Yp(s){s.h.bindTexture(s.h.TEXTURE_2D,null)}var Bu,hi=class{constructor(s,t,e,n,r,o,c){this.g=s,this.m=t,this.j=e,this.canvas=n,this.l=r,this.width=o,this.height=c,this.j&&--Ab===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!Ns(this,0)}ka(){return!!Ns(this,1)}R(){return!!Ns(this,2)}ja(){return(t=Ns(s=this,0))||(t=Xp(s),t=new Uint8Array(t.map((e=>Math.round(255*e)))),s.g.push(t)),t;var s,t}ia(){return Xp(this)}N(){return e_(this)}clone(){const s=[];for(const t of this.g){let e;if(t instanceof Uint8Array)e=new Uint8Array(t);else if(t instanceof Float32Array)e=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const n=Eo(this),r=Jg(this);n.activeTexture(n.TEXTURE1),e=Q3(r,n,this.m?n.LINEAR:n.NEAREST),n.bindTexture(n.TEXTURE_2D,e);const o=i_(this);n.texImage2D(n.TEXTURE_2D,0,o,this.width,this.height,0,n.RED,n.FLOAT,null),n.bindTexture(n.TEXTURE_2D,null),J3(r,n,e),QS(r,n,!1,(()=>{n_(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),Yp(this)})),JS(r),Yp(this)}}s.push(e)}return new hi(s,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Eo(this).deleteTexture(Ns(this,2)),Ab=-1}};hi.prototype.close=hi.prototype.close,hi.prototype.clone=hi.prototype.clone,hi.prototype.getAsWebGLTexture=hi.prototype.N,hi.prototype.getAsFloat32Array=hi.prototype.ia,hi.prototype.getAsUint8Array=hi.prototype.ja,hi.prototype.hasWebGLTexture=hi.prototype.R,hi.prototype.hasFloat32Array=hi.prototype.ka,hi.prototype.hasUint8Array=hi.prototype.Fa;var Ab=250;function Gn(...s){return s.map((([t,e])=>({start:t,end:e})))}const tE=(function(s){return class extends s{Ja(){this.i._registerModelResourcesGraphService()}}})((wb=class{constructor(s,t){this.l=!0,this.i=s,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:Z3()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(s){const t=await(await fetch(s)).arrayBuffer();s=!(s.endsWith(".pbtxt")||s.endsWith(".textproto")),this.setGraph(new Uint8Array(t),s)}setGraphFromString(s){this.setGraph(new TextEncoder().encode(s),!1)}setGraph(s,t){const e=s.length,n=this.i._malloc(e);this.i.HEAPU8.set(s,n),t?this.i._changeBinaryGraph(e,n):this.i._changeTextGraph(e,n),this.i._free(n)}configureAudio(s,t,e,n,r){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Mt(this,n||"input_audio",(o=>{Mt(this,r=r||"audio_header",(c=>{this.i._configureAudio(o,c,s,t??0,e)}))}))}setAutoResizeCanvas(s){this.l=s}setAutoRenderToScreen(s){this.i._setAutoRenderToScreen(s)}setGpuBufferVerticalFlip(s){this.i.gpuOriginForWebTexturesIsBottomLeft=s}ca(s){Jn(this,"__graph_config__",(t=>{s(t)})),Mt(this,"__graph_config__",(t=>{this.i._getGraphConfig(t,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(s){this.i.errorListener=s}attachEmptyPacketListener(s,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[s]=t}addAudioToStream(s,t,e){this.addAudioToStreamWithShape(s,0,0,t,e)}addAudioToStreamWithShape(s,t,e,n,r){const o=4*s.length;this.h!==o&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(o),this.h=o),this.i.HEAPF32.set(s,this.g/4),Mt(this,n,(c=>{this.i._addAudioToInputStream(this.g,t,e,c,r)}))}addGpuBufferToStream(s,t,e){Mt(this,t,(n=>{const[r,o]=mb(this,s,n);this.i._addBoundTextureToStream(n,r,o,e)}))}addBoolToStream(s,t,e){Mt(this,t,(n=>{this.i._addBoolToInputStream(s,n,e)}))}addDoubleToStream(s,t,e){Mt(this,t,(n=>{this.i._addDoubleToInputStream(s,n,e)}))}addFloatToStream(s,t,e){Mt(this,t,(n=>{this.i._addFloatToInputStream(s,n,e)}))}addIntToStream(s,t,e){Mt(this,t,(n=>{this.i._addIntToInputStream(s,n,e)}))}addUintToStream(s,t,e){Mt(this,t,(n=>{this.i._addUintToInputStream(s,n,e)}))}addStringToStream(s,t,e){Mt(this,t,(n=>{Mt(this,s,(r=>{this.i._addStringToInputStream(r,n,e)}))}))}addStringRecordToStream(s,t,e){Mt(this,t,(n=>{yb(this,Object.keys(s),(r=>{yb(this,Object.values(s),(o=>{this.i._addFlatHashMapToInputStream(r,o,Object.keys(s).length,n,e)}))}))}))}addProtoToStream(s,t,e,n){Mt(this,e,(r=>{Mt(this,t,(o=>{const c=this.i._malloc(s.length);this.i.HEAPU8.set(s,c),this.i._addProtoToInputStream(c,s.length,o,r,n),this.i._free(c)}))}))}addEmptyPacketToStream(s,t){Mt(this,s,(e=>{this.i._addEmptyPacketToInputStream(e,t)}))}addBoolVectorToStream(s,t,e){Mt(this,t,(n=>{const r=this.i._allocateBoolVector(s.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const o of s)this.i._addBoolVectorEntry(r,o);this.i._addBoolVectorToInputStream(r,n,e)}))}addDoubleVectorToStream(s,t,e){Mt(this,t,(n=>{const r=this.i._allocateDoubleVector(s.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const o of s)this.i._addDoubleVectorEntry(r,o);this.i._addDoubleVectorToInputStream(r,n,e)}))}addFloatVectorToStream(s,t,e){Mt(this,t,(n=>{const r=this.i._allocateFloatVector(s.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const o of s)this.i._addFloatVectorEntry(r,o);this.i._addFloatVectorToInputStream(r,n,e)}))}addIntVectorToStream(s,t,e){Mt(this,t,(n=>{const r=this.i._allocateIntVector(s.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const o of s)this.i._addIntVectorEntry(r,o);this.i._addIntVectorToInputStream(r,n,e)}))}addUintVectorToStream(s,t,e){Mt(this,t,(n=>{const r=this.i._allocateUintVector(s.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of s)this.i._addUintVectorEntry(r,o);this.i._addUintVectorToInputStream(r,n,e)}))}addStringVectorToStream(s,t,e){Mt(this,t,(n=>{const r=this.i._allocateStringVector(s.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const o of s)Mt(this,o,(c=>{this.i._addStringVectorEntry(r,c)}));this.i._addStringVectorToInputStream(r,n,e)}))}addBoolToInputSidePacket(s,t){Mt(this,t,(e=>{this.i._addBoolToInputSidePacket(s,e)}))}addDoubleToInputSidePacket(s,t){Mt(this,t,(e=>{this.i._addDoubleToInputSidePacket(s,e)}))}addFloatToInputSidePacket(s,t){Mt(this,t,(e=>{this.i._addFloatToInputSidePacket(s,e)}))}addIntToInputSidePacket(s,t){Mt(this,t,(e=>{this.i._addIntToInputSidePacket(s,e)}))}addUintToInputSidePacket(s,t){Mt(this,t,(e=>{this.i._addUintToInputSidePacket(s,e)}))}addStringToInputSidePacket(s,t){Mt(this,t,(e=>{Mt(this,s,(n=>{this.i._addStringToInputSidePacket(n,e)}))}))}addProtoToInputSidePacket(s,t,e){Mt(this,e,(n=>{Mt(this,t,(r=>{const o=this.i._malloc(s.length);this.i.HEAPU8.set(s,o),this.i._addProtoToInputSidePacket(o,s.length,r,n),this.i._free(o)}))}))}addBoolVectorToInputSidePacket(s,t){Mt(this,t,(e=>{const n=this.i._allocateBoolVector(s.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const r of s)this.i._addBoolVectorEntry(n,r);this.i._addBoolVectorToInputSidePacket(n,e)}))}addDoubleVectorToInputSidePacket(s,t){Mt(this,t,(e=>{const n=this.i._allocateDoubleVector(s.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const r of s)this.i._addDoubleVectorEntry(n,r);this.i._addDoubleVectorToInputSidePacket(n,e)}))}addFloatVectorToInputSidePacket(s,t){Mt(this,t,(e=>{const n=this.i._allocateFloatVector(s.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const r of s)this.i._addFloatVectorEntry(n,r);this.i._addFloatVectorToInputSidePacket(n,e)}))}addIntVectorToInputSidePacket(s,t){Mt(this,t,(e=>{const n=this.i._allocateIntVector(s.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const r of s)this.i._addIntVectorEntry(n,r);this.i._addIntVectorToInputSidePacket(n,e)}))}addUintVectorToInputSidePacket(s,t){Mt(this,t,(e=>{const n=this.i._allocateUintVector(s.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const r of s)this.i._addUintVectorEntry(n,r);this.i._addUintVectorToInputSidePacket(n,e)}))}addStringVectorToInputSidePacket(s,t){Mt(this,t,(e=>{const n=this.i._allocateStringVector(s.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const r of s)Mt(this,r,(o=>{this.i._addStringVectorEntry(n,o)}));this.i._addStringVectorToInputSidePacket(n,e)}))}attachBoolListener(s,t){Jn(this,s,t),Mt(this,s,(e=>{this.i._attachBoolListener(e)}))}attachBoolVectorListener(s,t){da(this,s,t),Mt(this,s,(e=>{this.i._attachBoolVectorListener(e)}))}attachIntListener(s,t){Jn(this,s,t),Mt(this,s,(e=>{this.i._attachIntListener(e)}))}attachIntVectorListener(s,t){da(this,s,t),Mt(this,s,(e=>{this.i._attachIntVectorListener(e)}))}attachUintListener(s,t){Jn(this,s,t),Mt(this,s,(e=>{this.i._attachUintListener(e)}))}attachUintVectorListener(s,t){da(this,s,t),Mt(this,s,(e=>{this.i._attachUintVectorListener(e)}))}attachDoubleListener(s,t){Jn(this,s,t),Mt(this,s,(e=>{this.i._attachDoubleListener(e)}))}attachDoubleVectorListener(s,t){da(this,s,t),Mt(this,s,(e=>{this.i._attachDoubleVectorListener(e)}))}attachFloatListener(s,t){Jn(this,s,t),Mt(this,s,(e=>{this.i._attachFloatListener(e)}))}attachFloatVectorListener(s,t){da(this,s,t),Mt(this,s,(e=>{this.i._attachFloatVectorListener(e)}))}attachStringListener(s,t){Jn(this,s,t),Mt(this,s,(e=>{this.i._attachStringListener(e)}))}attachStringVectorListener(s,t){da(this,s,t),Mt(this,s,(e=>{this.i._attachStringVectorListener(e)}))}attachProtoListener(s,t,e){Jn(this,s,t),Mt(this,s,(n=>{this.i._attachProtoListener(n,e||!1)}))}attachProtoVectorListener(s,t,e){da(this,s,t),Mt(this,s,(n=>{this.i._attachProtoVectorListener(n,e||!1)}))}attachAudioListener(s,t,e){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Jn(this,s,((n,r)=>{n=new Float32Array(n.buffer,n.byteOffset,n.length/4),t(n,r)})),Mt(this,s,(n=>{this.i._attachAudioListener(n,e||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends wb{get ga(){return this.i}pa(s,t,e){Mt(this,t,(n=>{const[r,o]=mb(this,s,n);this.ga._addBoundTextureAsImageToStream(n,r,o,e)}))}Z(s,t){Jn(this,s,t),Mt(this,s,(e=>{this.ga._attachImageListener(e)}))}aa(s,t){da(this,s,t),Mt(this,s,(e=>{this.ga._attachImageVectorListener(e)}))}}));var wb,Vn=class extends tE{};async function $t(s,t,e){return(async function(n,r,o,c){return ZS(n,r,o,c)})(s,e.canvas??(Z3()?void 0:document.createElement("canvas")),t,e)}function s_(s,t,e,n){if(s.U){const o=new T3;if(e?.regionOfInterest){if(!s.oa)throw Error("This task doesn't support region-of-interest.");var r=e.regionOfInterest;if(r.left>=r.right||r.top>=r.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(r.left<0||r.top<0||r.right>1||r.bottom>1)throw Error("Expected RectF values to be in [0,1].");Nt(o,1,(r.left+r.right)/2),Nt(o,2,(r.top+r.bottom)/2),Nt(o,4,r.right-r.left),Nt(o,3,r.bottom-r.top)}else Nt(o,1,.5),Nt(o,2,.5),Nt(o,4,1),Nt(o,3,1);if(e?.rotationDegrees){if(e?.rotationDegrees%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(Nt(o,5,-Math.PI*e.rotationDegrees/180),e?.rotationDegrees%180!=0){const[c,u]=$3(t);e=Ve(o,3)*u/c,r=Ve(o,4)*c/u,Nt(o,4,e),Nt(o,3,r)}}s.g.addProtoToStream(o.g(),"mediapipe.NormalizedRect",s.U,n)}s.g.pa(t,s.X,n??performance.now()),s.finishProcessing()}function Xn(s,t,e){if(s.baseOptions?.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");s_(s,t,e,s.C+1)}function ds(s,t,e,n){if(!s.baseOptions?.g())throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");s_(s,t,e,n)}function To(s,t,e,n){var r=t.data;const o=t.width,c=o*(t=t.height);if((r instanceof Uint8Array||r instanceof Float32Array)&&r.length!==c)throw Error("Unsupported channel count: "+r.length/c);return s=new hi([r],e,!1,s.g.i.canvas,s.P,o,t),n?s.clone():s}var dn=class extends Vp{constructor(s,t,e,n){super(s),this.g=s,this.X=t,this.U=e,this.oa=n,this.P=new t_}l(s,t=!0){if("runningMode"in s&&me(this.baseOptions,2,Ql(!!s.runningMode&&s.runningMode!=="IMAGE")),s.canvas!==void 0&&this.g.i.canvas!==s.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(s,t)}close(){this.P.close(),super.close()}};dn.prototype.close=dn.prototype.close;var kn=class extends dn{constructor(s,t){super(new Vn(s,t),"image_in","norm_rect_in",!1),this.j={detections:[]},zt(s=this.h=new kh,0,1,t=new Ie),Nt(this.h,2,.5),Nt(this.h,3,.3)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){return"minDetectionConfidence"in s&&Nt(this.h,2,s.minDetectionConfidence??.5),"minSuppressionThreshold"in s&&Nt(this.h,3,s.minSuppressionThreshold??.3),this.l(s)}F(s,t){return this.j={detections:[]},Xn(this,s,t),this.j}G(s,t,e){return this.j={detections:[]},ds(this,s,e,t),this.j}m(){var s=new pn;Le(s,"image_in"),Le(s,"norm_rect_in"),re(s,"detections");const t=new fn;us(t,BS,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Me(e,"IMAGE:image_in"),Me(e,"NORM_RECT:norm_rect_in"),Zt(e,"DETECTIONS:detections"),e.o(t),Fn(s,e),this.g.attachProtoVectorListener("detections",((n,r)=>{for(const o of n)n=w3(o),this.j.detections.push(K3(n));Et(this,r)})),this.g.attachEmptyPacketListener("detections",(n=>{Et(this,n)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};kn.prototype.detectForVideo=kn.prototype.G,kn.prototype.detect=kn.prototype.F,kn.prototype.setOptions=kn.prototype.o,kn.createFromModelPath=async function(s,t){return $t(kn,s,{baseOptions:{modelAssetPath:t}})},kn.createFromModelBuffer=function(s,t){return $t(kn,s,{baseOptions:{modelAssetBuffer:t}})},kn.createFromOptions=function(s,t){return $t(kn,s,t)};var tm=Gn([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),em=Gn([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),im=Gn([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),a_=Gn([474,475],[475,476],[476,477],[477,474]),nm=Gn([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),sm=Gn([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),r_=Gn([469,470],[470,471],[471,472],[472,469]),am=Gn([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),o_=[...tm,...em,...im,...nm,...sm,...am],l_=Gn([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function Sb(s){s.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var Fe=class extends dn{constructor(s,t){super(new Vn(s,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,zt(s=this.h=new D3,0,1,t=new Ie),this.A=new M3,zt(this.h,0,3,this.A),this.u=new kh,zt(this.h,0,2,this.u),Ps(this.u,4,1),Nt(this.u,2,.5),Nt(this.A,2,.5),Nt(this.h,4,.5)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){return"numFaces"in s&&Ps(this.u,4,s.numFaces??1),"minFaceDetectionConfidence"in s&&Nt(this.u,2,s.minFaceDetectionConfidence??.5),"minTrackingConfidence"in s&&Nt(this.h,4,s.minTrackingConfidence??.5),"minFacePresenceConfidence"in s&&Nt(this.A,2,s.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in s&&(this.outputFaceBlendshapes=!!s.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in s&&(this.outputFacialTransformationMatrixes=!!s.outputFacialTransformationMatrixes),this.l(s)}F(s,t){return Sb(this),Xn(this,s,t),this.j}G(s,t,e){return Sb(this),ds(this,s,e,t),this.j}m(){var s=new pn;Le(s,"image_in"),Le(s,"norm_rect"),re(s,"face_landmarks");const t=new fn;us(t,FS,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Me(e,"IMAGE:image_in"),Me(e,"NORM_RECT:norm_rect"),Zt(e,"NORM_LANDMARKS:face_landmarks"),e.o(t),Fn(s,e),this.g.attachProtoVectorListener("face_landmarks",((n,r)=>{for(const o of n)n=dc(o),this.j.faceLandmarks.push(Mh(n));Et(this,r)})),this.g.attachEmptyPacketListener("face_landmarks",(n=>{Et(this,n)})),this.outputFaceBlendshapes&&(re(s,"blendshapes"),Zt(e,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",((n,r)=>{if(this.outputFaceBlendshapes)for(const o of n)n=Ch(o),this.j.faceBlendshapes.push($g(n.g()??[]));Et(this,r)})),this.g.attachEmptyPacketListener("blendshapes",(n=>{Et(this,n)}))),this.outputFacialTransformationMatrixes&&(re(s,"face_geometry"),Zt(e,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",((n,r)=>{if(this.outputFacialTransformationMatrixes)for(const o of n)(n=te(n=zS(o),CS,2))&&this.j.facialTransformationMatrixes.push({rows:Nn(n,1)??0??0,columns:Nn(n,2)??0??0,data:Xa(n,3,as,Va()).slice()??[]});Et(this,r)})),this.g.attachEmptyPacketListener("face_geometry",(n=>{Et(this,n)}))),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};Fe.prototype.detectForVideo=Fe.prototype.G,Fe.prototype.detect=Fe.prototype.F,Fe.prototype.setOptions=Fe.prototype.o,Fe.createFromModelPath=function(s,t){return $t(Fe,s,{baseOptions:{modelAssetPath:t}})},Fe.createFromModelBuffer=function(s,t){return $t(Fe,s,{baseOptions:{modelAssetBuffer:t}})},Fe.createFromOptions=function(s,t){return $t(Fe,s,t)},Fe.FACE_LANDMARKS_LIPS=tm,Fe.FACE_LANDMARKS_LEFT_EYE=em,Fe.FACE_LANDMARKS_LEFT_EYEBROW=im,Fe.FACE_LANDMARKS_LEFT_IRIS=a_,Fe.FACE_LANDMARKS_RIGHT_EYE=nm,Fe.FACE_LANDMARKS_RIGHT_EYEBROW=sm,Fe.FACE_LANDMARKS_RIGHT_IRIS=r_,Fe.FACE_LANDMARKS_FACE_OVAL=am,Fe.FACE_LANDMARKS_CONTOURS=o_,Fe.FACE_LANDMARKS_TESSELATION=l_;var rm=Gn([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function Eb(s){s.gestures=[],s.landmarks=[],s.worldLandmarks=[],s.handedness=[]}function Tb(s){return s.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:s.gestures,landmarks:s.landmarks,worldLandmarks:s.worldLandmarks,handedness:s.handedness,handednesses:s.handedness}}function xb(s,t=!0){const e=[];for(const r of s){var n=Ch(r);s=[];for(const o of n.g())n=t&&Nn(o,1)!=null?Nn(o,1)??0:-1,s.push({score:Ve(o,2)??0,index:n,categoryName:xi(ke(o,3))??""??"",displayName:xi(ke(o,4))??""??""});e.push(s)}return e}var Gi=class extends dn{constructor(s,t){super(new Vn(s,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],zt(s=this.j=new L3,0,1,t=new Ie),this.u=new qg,zt(this.j,0,2,this.u),this.D=new Yg,zt(this.u,0,3,this.D),this.A=new R3,zt(this.u,0,2,this.A),this.h=new PS,zt(this.j,0,3,this.h),Nt(this.A,2,.5),Nt(this.u,4,.5),Nt(this.D,2,.5)}get baseOptions(){return te(this.j,Ie,1)}set baseOptions(s){zt(this.j,0,1,s)}o(s){if(Ps(this.A,3,s.numHands??1),"minHandDetectionConfidence"in s&&Nt(this.A,2,s.minHandDetectionConfidence??.5),"minTrackingConfidence"in s&&Nt(this.u,4,s.minTrackingConfidence??.5),"minHandPresenceConfidence"in s&&Nt(this.D,2,s.minHandPresenceConfidence??.5),s.cannedGesturesClassifierOptions){var t=new $r,e=t,n=Gp(s.cannedGesturesClassifierOptions,te(this.h,$r,3)?.l());zt(e,0,2,n),zt(this.h,0,3,t)}else s.cannedGesturesClassifierOptions===void 0&&te(this.h,$r,3)?.g();return s.customGesturesClassifierOptions?(zt(e=t=new $r,0,2,n=Gp(s.customGesturesClassifierOptions,te(this.h,$r,4)?.l())),zt(this.h,0,4,t)):s.customGesturesClassifierOptions===void 0&&te(this.h,$r,4)?.g(),this.l(s)}Ha(s,t){return Eb(this),Xn(this,s,t),Tb(this)}Ia(s,t,e){return Eb(this),ds(this,s,e,t),Tb(this)}m(){var s=new pn;Le(s,"image_in"),Le(s,"norm_rect"),re(s,"hand_gestures"),re(s,"hand_landmarks"),re(s,"world_hand_landmarks"),re(s,"handedness");const t=new fn;us(t,IS,this.j);const e=new Yi;un(e,2,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Me(e,"IMAGE:image_in"),Me(e,"NORM_RECT:norm_rect"),Zt(e,"HAND_GESTURES:hand_gestures"),Zt(e,"LANDMARKS:hand_landmarks"),Zt(e,"WORLD_LANDMARKS:world_hand_landmarks"),Zt(e,"HANDEDNESS:handedness"),e.o(t),Fn(s,e),this.g.attachProtoVectorListener("hand_landmarks",((n,r)=>{for(const o of n){n=dc(o);const c=[];for(const u of Fs(n,E3,1))c.push({x:Ve(u,1)??0,y:Ve(u,2)??0,z:Ve(u,3)??0,visibility:Ve(u,4)??0});this.landmarks.push(c)}Et(this,r)})),this.g.attachEmptyPacketListener("hand_landmarks",(n=>{Et(this,n)})),this.g.attachProtoVectorListener("world_hand_landmarks",((n,r)=>{for(const o of n){n=oo(o);const c=[];for(const u of Fs(n,S3,1))c.push({x:Ve(u,1)??0,y:Ve(u,2)??0,z:Ve(u,3)??0,visibility:Ve(u,4)??0});this.worldLandmarks.push(c)}Et(this,r)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(n=>{Et(this,n)})),this.g.attachProtoVectorListener("hand_gestures",((n,r)=>{this.gestures.push(...xb(n,!1)),Et(this,r)})),this.g.attachEmptyPacketListener("hand_gestures",(n=>{Et(this,n)})),this.g.attachProtoVectorListener("handedness",((n,r)=>{this.handedness.push(...xb(n)),Et(this,r)})),this.g.attachEmptyPacketListener("handedness",(n=>{Et(this,n)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};function Cb(s){return{landmarks:s.landmarks,worldLandmarks:s.worldLandmarks,handednesses:s.handedness,handedness:s.handedness}}Gi.prototype.recognizeForVideo=Gi.prototype.Ia,Gi.prototype.recognize=Gi.prototype.Ha,Gi.prototype.setOptions=Gi.prototype.o,Gi.createFromModelPath=function(s,t){return $t(Gi,s,{baseOptions:{modelAssetPath:t}})},Gi.createFromModelBuffer=function(s,t){return $t(Gi,s,{baseOptions:{modelAssetBuffer:t}})},Gi.createFromOptions=function(s,t){return $t(Gi,s,t)},Gi.HAND_CONNECTIONS=rm;var tn=class extends dn{constructor(s,t){super(new Vn(s,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],zt(s=this.h=new qg,0,1,t=new Ie),this.u=new Yg,zt(this.h,0,3,this.u),this.j=new R3,zt(this.h,0,2,this.j),Ps(this.j,3,1),Nt(this.j,2,.5),Nt(this.u,2,.5),Nt(this.h,4,.5)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){return"numHands"in s&&Ps(this.j,3,s.numHands??1),"minHandDetectionConfidence"in s&&Nt(this.j,2,s.minHandDetectionConfidence??.5),"minTrackingConfidence"in s&&Nt(this.h,4,s.minTrackingConfidence??.5),"minHandPresenceConfidence"in s&&Nt(this.u,2,s.minHandPresenceConfidence??.5),this.l(s)}F(s,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Xn(this,s,t),Cb(this)}G(s,t,e){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],ds(this,s,e,t),Cb(this)}m(){var s=new pn;Le(s,"image_in"),Le(s,"norm_rect"),re(s,"hand_landmarks"),re(s,"world_hand_landmarks"),re(s,"handedness");const t=new fn;us(t,US,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Me(e,"IMAGE:image_in"),Me(e,"NORM_RECT:norm_rect"),Zt(e,"LANDMARKS:hand_landmarks"),Zt(e,"WORLD_LANDMARKS:world_hand_landmarks"),Zt(e,"HANDEDNESS:handedness"),e.o(t),Fn(s,e),this.g.attachProtoVectorListener("hand_landmarks",((n,r)=>{for(const o of n)n=dc(o),this.landmarks.push(Mh(n));Et(this,r)})),this.g.attachEmptyPacketListener("hand_landmarks",(n=>{Et(this,n)})),this.g.attachProtoVectorListener("world_hand_landmarks",((n,r)=>{for(const o of n)n=oo(o),this.worldLandmarks.push(ql(n));Et(this,r)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(n=>{Et(this,n)})),this.g.attachProtoVectorListener("handedness",((n,r)=>{var o=this.handedness,c=o.push;const u=[];for(const d of n){n=Ch(d);const f=[];for(const p of n.g())f.push({score:Ve(p,2)??0,index:Nn(p,1)??0??-1,categoryName:xi(ke(p,3))??""??"",displayName:xi(ke(p,4))??""??""});u.push(f)}c.call(o,...u),Et(this,r)})),this.g.attachEmptyPacketListener("handedness",(n=>{Et(this,n)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};tn.prototype.detectForVideo=tn.prototype.G,tn.prototype.detect=tn.prototype.F,tn.prototype.setOptions=tn.prototype.o,tn.createFromModelPath=function(s,t){return $t(tn,s,{baseOptions:{modelAssetPath:t}})},tn.createFromModelBuffer=function(s,t){return $t(tn,s,{baseOptions:{modelAssetBuffer:t}})},tn.createFromOptions=function(s,t){return $t(tn,s,t)},tn.HAND_CONNECTIONS=rm;var c_=Gn([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function kb(s){s.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function Mb(s){try{if(!s.D)return s.h;s.D(s.h)}finally{Oh(s)}}function zu(s,t){s=dc(s),t.push(Mh(s))}var Te=class extends dn{constructor(s,t){super(new Vn(s,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,zt(s=this.j=new P3,0,1,t=new Ie),this.I=new Yg,zt(this.j,0,2,this.I),this.W=new HS,zt(this.j,0,3,this.W),this.u=new kh,zt(this.j,0,4,this.u),this.O=new M3,zt(this.j,0,5,this.O),this.A=new z3,zt(this.j,0,6,this.A),this.M=new F3,zt(this.j,0,7,this.M),Nt(this.u,2,.5),Nt(this.u,3,.3),Nt(this.O,2,.5),Nt(this.A,2,.5),Nt(this.A,3,.3),Nt(this.M,2,.5),Nt(this.I,2,.5)}get baseOptions(){return te(this.j,Ie,1)}set baseOptions(s){zt(this.j,0,1,s)}o(s){return"minFaceDetectionConfidence"in s&&Nt(this.u,2,s.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in s&&Nt(this.u,3,s.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in s&&Nt(this.O,2,s.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in s&&(this.outputFaceBlendshapes=!!s.outputFaceBlendshapes),"minPoseDetectionConfidence"in s&&Nt(this.A,2,s.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in s&&Nt(this.A,3,s.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in s&&Nt(this.M,2,s.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in s&&(this.outputPoseSegmentationMasks=!!s.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in s&&Nt(this.I,2,s.minHandLandmarksConfidence??.5),this.l(s)}F(s,t,e){const n=typeof t!="function"?t:{};return this.D=typeof t=="function"?t:e,kb(this),Xn(this,s,n),Mb(this)}G(s,t,e,n){const r=typeof e!="function"?e:{};return this.D=typeof e=="function"?e:n,kb(this),ds(this,s,r,t),Mb(this)}m(){var s=new pn;Le(s,"input_frames_image"),re(s,"pose_landmarks"),re(s,"pose_world_landmarks"),re(s,"face_landmarks"),re(s,"left_hand_landmarks"),re(s,"left_hand_world_landmarks"),re(s,"right_hand_landmarks"),re(s,"right_hand_world_landmarks");const t=new fn,e=new Jy;un(e,1,"type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),(function(r,o){if(o!=null)if(Array.isArray(o))me(r,2,gh(o,0,Jl));else{if(!(typeof o=="string"||o instanceof rs||fg(o)))throw Error("invalid value in Any.value field: "+o+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");fa(r,2,gg(o,!1),er())}})(e,this.j.g());const n=new Yi;un(n,2,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),Dg(n,8,Jy,e),Me(n,"IMAGE:input_frames_image"),Zt(n,"POSE_LANDMARKS:pose_landmarks"),Zt(n,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),Zt(n,"FACE_LANDMARKS:face_landmarks"),Zt(n,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),Zt(n,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),Zt(n,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),Zt(n,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),n.o(t),Fn(s,n),Dh(this,s),this.g.attachProtoListener("pose_landmarks",((r,o)=>{zu(r,this.h.poseLandmarks),Et(this,o)})),this.g.attachEmptyPacketListener("pose_landmarks",(r=>{Et(this,r)})),this.g.attachProtoListener("pose_world_landmarks",((r,o)=>{var c=this.h.poseWorldLandmarks;r=oo(r),c.push(ql(r)),Et(this,o)})),this.g.attachEmptyPacketListener("pose_world_landmarks",(r=>{Et(this,r)})),this.outputPoseSegmentationMasks&&(Zt(n,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),So(this,"pose_segmentation_mask"),this.g.Z("pose_segmentation_mask",((r,o)=>{this.h.poseSegmentationMasks=[To(this,r,!0,!this.D)],Et(this,o)})),this.g.attachEmptyPacketListener("pose_segmentation_mask",(r=>{this.h.poseSegmentationMasks=[],Et(this,r)}))),this.g.attachProtoListener("face_landmarks",((r,o)=>{zu(r,this.h.faceLandmarks),Et(this,o)})),this.g.attachEmptyPacketListener("face_landmarks",(r=>{Et(this,r)})),this.outputFaceBlendshapes&&(re(s,"extra_blendshapes"),Zt(n,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",((r,o)=>{var c=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(r=Ch(r),c.push($g(r.g()??[]))),Et(this,o)})),this.g.attachEmptyPacketListener("extra_blendshapes",(r=>{Et(this,r)}))),this.g.attachProtoListener("left_hand_landmarks",((r,o)=>{zu(r,this.h.leftHandLandmarks),Et(this,o)})),this.g.attachEmptyPacketListener("left_hand_landmarks",(r=>{Et(this,r)})),this.g.attachProtoListener("left_hand_world_landmarks",((r,o)=>{var c=this.h.leftHandWorldLandmarks;r=oo(r),c.push(ql(r)),Et(this,o)})),this.g.attachEmptyPacketListener("left_hand_world_landmarks",(r=>{Et(this,r)})),this.g.attachProtoListener("right_hand_landmarks",((r,o)=>{zu(r,this.h.rightHandLandmarks),Et(this,o)})),this.g.attachEmptyPacketListener("right_hand_landmarks",(r=>{Et(this,r)})),this.g.attachProtoListener("right_hand_world_landmarks",((r,o)=>{var c=this.h.rightHandWorldLandmarks;r=oo(r),c.push(ql(r)),Et(this,o)})),this.g.attachEmptyPacketListener("right_hand_world_landmarks",(r=>{Et(this,r)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};Te.prototype.detectForVideo=Te.prototype.G,Te.prototype.detect=Te.prototype.F,Te.prototype.setOptions=Te.prototype.o,Te.createFromModelPath=function(s,t){return $t(Te,s,{baseOptions:{modelAssetPath:t}})},Te.createFromModelBuffer=function(s,t){return $t(Te,s,{baseOptions:{modelAssetBuffer:t}})},Te.createFromOptions=function(s,t){return $t(Te,s,t)},Te.HAND_CONNECTIONS=rm,Te.POSE_CONNECTIONS=c_,Te.FACE_LANDMARKS_LIPS=tm,Te.FACE_LANDMARKS_LEFT_EYE=em,Te.FACE_LANDMARKS_LEFT_EYEBROW=im,Te.FACE_LANDMARKS_LEFT_IRIS=a_,Te.FACE_LANDMARKS_RIGHT_EYE=nm,Te.FACE_LANDMARKS_RIGHT_EYEBROW=sm,Te.FACE_LANDMARKS_RIGHT_IRIS=r_,Te.FACE_LANDMARKS_FACE_OVAL=am,Te.FACE_LANDMARKS_CONTOURS=o_,Te.FACE_LANDMARKS_TESSELATION=l_;var Mn=class extends dn{constructor(s,t){super(new Vn(s,t),"input_image","norm_rect",!0),this.j={classifications:[]},zt(s=this.h=new I3,0,1,t=new Ie)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){return zt(this.h,0,2,Gp(s,te(this.h,Vg,2))),this.l(s)}sa(s,t){return this.j={classifications:[]},Xn(this,s,t),this.j}ta(s,t,e){return this.j={classifications:[]},ds(this,s,e,t),this.j}m(){var s=new pn;Le(s,"input_image"),Le(s,"norm_rect"),re(s,"classifications");const t=new fn;us(t,jS,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),Me(e,"IMAGE:input_image"),Me(e,"NORM_RECT:norm_rect"),Zt(e,"CLASSIFICATIONS:classifications"),e.o(t),Fn(s,e),this.g.attachProtoListener("classifications",((n,r)=>{this.j=KS(DS(n)),Et(this,r)})),this.g.attachEmptyPacketListener("classifications",(n=>{Et(this,n)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};Mn.prototype.classifyForVideo=Mn.prototype.ta,Mn.prototype.classify=Mn.prototype.sa,Mn.prototype.setOptions=Mn.prototype.o,Mn.createFromModelPath=function(s,t){return $t(Mn,s,{baseOptions:{modelAssetPath:t}})},Mn.createFromModelBuffer=function(s,t){return $t(Mn,s,{baseOptions:{modelAssetBuffer:t}})},Mn.createFromOptions=function(s,t){return $t(Mn,s,t)};var en=class extends dn{constructor(s,t){super(new Vn(s,t),"image_in","norm_rect",!0),this.h=new U3,this.embeddings={embeddings:[]},zt(s=this.h,0,1,t=new Ie)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){var t=this.h,e=te(this.h,lb,2);return e=e?e.clone():new lb,s.l2Normalize!==void 0?me(e,1,Ql(s.l2Normalize)):"l2Normalize"in s&&me(e,1),s.quantize!==void 0?me(e,2,Ql(s.quantize)):"quantize"in s&&me(e,2),zt(t,0,2,e),this.l(s)}za(s,t){return Xn(this,s,t),this.embeddings}Aa(s,t,e){return ds(this,s,e,t),this.embeddings}m(){var s=new pn;Le(s,"image_in"),Le(s,"norm_rect"),re(s,"embeddings_out");const t=new fn;us(t,GS,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Me(e,"IMAGE:image_in"),Me(e,"NORM_RECT:norm_rect"),Zt(e,"EMBEDDINGS:embeddings_out"),e.o(t),Fn(s,e),this.g.attachProtoListener("embeddings_out",((n,r)=>{n=LS(n),this.embeddings=(function(o){return{embeddings:Fs(o,RS,1).map((c=>{const u={headIndex:Nn(c,3)??0??-1,headName:xi(ke(c,4))??""??""};var d=c.v;return zv(d,0|d[Ct],ob,gp(c,1))!==void 0?(c=Xa(c=te(c,ob,gp(c,1),void 0),1,as,Va()),u.floatEmbedding=c.slice()):(d=new Uint8Array(0),u.quantizedEmbedding=te(c,OS,gp(c,2),void 0)?.na()?.h()??d),u})),timestampMs:q3(Iv(o))}})(n),Et(this,r)})),this.g.attachEmptyPacketListener("embeddings_out",(n=>{Et(this,n)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};en.cosineSimilarity=function(s,t){if(s.floatEmbedding&&t.floatEmbedding)s=pb(s.floatEmbedding,t.floatEmbedding);else{if(!s.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");s=pb(fb(s.quantizedEmbedding),fb(t.quantizedEmbedding))}return s},en.prototype.embedForVideo=en.prototype.Aa,en.prototype.embed=en.prototype.za,en.prototype.setOptions=en.prototype.o,en.createFromModelPath=function(s,t){return $t(en,s,{baseOptions:{modelAssetPath:t}})},en.createFromModelBuffer=function(s,t){return $t(en,s,{baseOptions:{modelAssetBuffer:t}})},en.createFromOptions=function(s,t){return $t(en,s,t)};var qp=class{constructor(s,t,e){this.confidenceMasks=s,this.categoryMask=t,this.qualityScores=e}close(){this.confidenceMasks?.forEach((s=>{s.close()})),this.categoryMask?.close()}};function eE(s){const t=(function(e){return Fs(e,Yi,1)})(s.ca()).filter((e=>(xi(ke(e,1))??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator")));if(s.u=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(te(t[0],fn,7)?.j()?.g()??new Map).forEach(((e,n)=>{s.u[Number(n)]=xi(ke(e,1))??""}))}function Db(s){s.categoryMask=void 0,s.confidenceMasks=void 0,s.qualityScores=void 0}function Ob(s){try{const t=new qp(s.confidenceMasks,s.categoryMask,s.qualityScores);if(!s.j)return t;s.j(t)}finally{Oh(s)}}qp.prototype.close=qp.prototype.close;var ji=class extends dn{constructor(s,t){super(new Vn(s,t),"image_in","norm_rect",!1),this.u=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Zg,this.A=new H3,zt(this.h,0,3,this.A),zt(s=this.h,0,1,t=new Ie)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){return s.displayNamesLocale!==void 0?me(this.h,2,cc(s.displayNamesLocale)):"displayNamesLocale"in s&&me(this.h,2),"outputCategoryMask"in s&&(this.outputCategoryMask=s.outputCategoryMask??!1),"outputConfidenceMasks"in s&&(this.outputConfidenceMasks=s.outputConfidenceMasks??!0),super.l(s)}L(){eE(this)}segment(s,t,e){const n=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:e,Db(this),Xn(this,s,n),Ob(this)}La(s,t,e,n){const r=typeof e!="function"?e:{};return this.j=typeof e=="function"?e:n,Db(this),ds(this,s,r,t),Ob(this)}Da(){return this.u}m(){var s=new pn;Le(s,"image_in"),Le(s,"norm_rect");const t=new fn;us(t,G3,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),Me(e,"IMAGE:image_in"),Me(e,"NORM_RECT:norm_rect"),e.o(t),Fn(s,e),Dh(this,s),this.outputConfidenceMasks&&(re(s,"confidence_masks"),Zt(e,"CONFIDENCE_MASKS:confidence_masks"),So(this,"confidence_masks"),this.g.aa("confidence_masks",((n,r)=>{this.confidenceMasks=n.map((o=>To(this,o,!0,!this.j))),Et(this,r)})),this.g.attachEmptyPacketListener("confidence_masks",(n=>{this.confidenceMasks=[],Et(this,n)}))),this.outputCategoryMask&&(re(s,"category_mask"),Zt(e,"CATEGORY_MASK:category_mask"),So(this,"category_mask"),this.g.Z("category_mask",((n,r)=>{this.categoryMask=To(this,n,!1,!this.j),Et(this,r)})),this.g.attachEmptyPacketListener("category_mask",(n=>{this.categoryMask=void 0,Et(this,n)}))),re(s,"quality_scores"),Zt(e,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((n,r)=>{this.qualityScores=n,Et(this,r)})),this.g.attachEmptyPacketListener("quality_scores",(n=>{this.categoryMask=void 0,Et(this,n)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};ji.prototype.getLabels=ji.prototype.Da,ji.prototype.segmentForVideo=ji.prototype.La,ji.prototype.segment=ji.prototype.segment,ji.prototype.setOptions=ji.prototype.o,ji.createFromModelPath=function(s,t){return $t(ji,s,{baseOptions:{modelAssetPath:t}})},ji.createFromModelBuffer=function(s,t){return $t(ji,s,{baseOptions:{modelAssetBuffer:t}})},ji.createFromOptions=function(s,t){return $t(ji,s,t)};var Kp=class{constructor(s,t,e){this.confidenceMasks=s,this.categoryMask=t,this.qualityScores=e}close(){this.confidenceMasks?.forEach((s=>{s.close()})),this.categoryMask?.close()}};Kp.prototype.close=Kp.prototype.close;var ts=class extends dn{constructor(s,t){super(new Vn(s,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Zg,this.u=new H3,zt(this.h,0,3,this.u),zt(s=this.h,0,1,t=new Ie)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){return"outputCategoryMask"in s&&(this.outputCategoryMask=s.outputCategoryMask??!1),"outputConfidenceMasks"in s&&(this.outputConfidenceMasks=s.outputConfidenceMasks??!0),super.l(s)}segment(s,t,e,n){const r=typeof e!="function"?e:{};if(this.j=typeof e=="function"?e:n,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,e=this.C+1,n=new V3,t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var o=new vp;fa(o,3,Ql(!0),!1),fa(o,1,Hl(t.keypoint.x),0),fa(o,2,Hl(t.keypoint.y),0),Xl(n,1,jp,o)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");{const u=new XS;for(o of t.scribble)fa(t=new vp,3,Ql(!0),!1),fa(t,1,Hl(o.x),0),fa(t,2,Hl(o.y),0),Dg(u,1,vp,t);Xl(n,2,jp,u)}}this.g.addProtoToStream(n.g(),"mediapipe.tasks.vision.interactive_segmenter.proto.RegionOfInterest","roi_in",e),Xn(this,s,r);t:{try{const u=new Kp(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var c=u;break t}this.j(u)}finally{Oh(this)}c=void 0}return c}m(){var s=new pn;Le(s,"image_in"),Le(s,"roi_in"),Le(s,"norm_rect_in");const t=new fn;us(t,G3,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraphV2"),Me(e,"IMAGE:image_in"),Me(e,"ROI:roi_in"),Me(e,"NORM_RECT:norm_rect_in"),e.o(t),Fn(s,e),Dh(this,s),this.outputConfidenceMasks&&(re(s,"confidence_masks"),Zt(e,"CONFIDENCE_MASKS:confidence_masks"),So(this,"confidence_masks"),this.g.aa("confidence_masks",((n,r)=>{this.confidenceMasks=n.map((o=>To(this,o,!0,!this.j))),Et(this,r)})),this.g.attachEmptyPacketListener("confidence_masks",(n=>{this.confidenceMasks=[],Et(this,n)}))),this.outputCategoryMask&&(re(s,"category_mask"),Zt(e,"CATEGORY_MASK:category_mask"),So(this,"category_mask"),this.g.Z("category_mask",((n,r)=>{this.categoryMask=To(this,n,!1,!this.j),Et(this,r)})),this.g.attachEmptyPacketListener("category_mask",(n=>{this.categoryMask=void 0,Et(this,n)}))),re(s,"quality_scores"),Zt(e,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((n,r)=>{this.qualityScores=n,Et(this,r)})),this.g.attachEmptyPacketListener("quality_scores",(n=>{this.categoryMask=void 0,Et(this,n)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};ts.prototype.segment=ts.prototype.segment,ts.prototype.setOptions=ts.prototype.o,ts.createFromModelPath=function(s,t){return $t(ts,s,{baseOptions:{modelAssetPath:t}})},ts.createFromModelBuffer=function(s,t){return $t(ts,s,{baseOptions:{modelAssetBuffer:t}})},ts.createFromOptions=function(s,t){return $t(ts,s,t)};var Dn=class extends dn{constructor(s,t){super(new Vn(s,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},zt(s=this.h=new X3,0,1,t=new Ie)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){return s.displayNamesLocale!==void 0?me(this.h,2,cc(s.displayNamesLocale)):"displayNamesLocale"in s&&me(this.h,2),s.maxResults!==void 0?Ps(this.h,3,s.maxResults):"maxResults"in s&&me(this.h,3),s.scoreThreshold!==void 0?Nt(this.h,4,s.scoreThreshold):"scoreThreshold"in s&&me(this.h,4),s.categoryAllowlist!==void 0?th(this.h,5,s.categoryAllowlist):"categoryAllowlist"in s&&me(this.h,5),s.categoryDenylist!==void 0?th(this.h,6,s.categoryDenylist):"categoryDenylist"in s&&me(this.h,6),this.l(s)}F(s,t){return this.j={detections:[]},Xn(this,s,t),this.j}G(s,t,e){return this.j={detections:[]},ds(this,s,e,t),this.j}m(){var s=new pn;Le(s,"input_frame_gpu"),Le(s,"norm_rect"),re(s,"detections");const t=new fn;us(t,YS,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.ObjectDetectorGraph"),Me(e,"IMAGE:input_frame_gpu"),Me(e,"NORM_RECT:norm_rect"),Zt(e,"DETECTIONS:detections"),e.o(t),Fn(s,e),this.g.attachProtoVectorListener("detections",((n,r)=>{for(const o of n)n=w3(o),this.j.detections.push(K3(n));Et(this,r)})),this.g.attachEmptyPacketListener("detections",(n=>{Et(this,n)})),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};Dn.prototype.detectForVideo=Dn.prototype.G,Dn.prototype.detect=Dn.prototype.F,Dn.prototype.setOptions=Dn.prototype.o,Dn.createFromModelPath=async function(s,t){return $t(Dn,s,{baseOptions:{modelAssetPath:t}})},Dn.createFromModelBuffer=function(s,t){return $t(Dn,s,{baseOptions:{modelAssetBuffer:t}})},Dn.createFromOptions=function(s,t){return $t(Dn,s,t)};var Wp=class{constructor(s,t,e){this.landmarks=s,this.worldLandmarks=t,this.segmentationMasks=e}close(){this.segmentationMasks?.forEach((s=>{s.close()}))}};function Rb(s){s.landmarks=[],s.worldLandmarks=[],s.segmentationMasks=void 0}function Lb(s){try{const t=new Wp(s.landmarks,s.worldLandmarks,s.segmentationMasks);if(!s.u)return t;s.u(t)}finally{Oh(s)}}Wp.prototype.close=Wp.prototype.close;var nn=class extends dn{constructor(s,t){super(new Vn(s,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,zt(s=this.h=new Y3,0,1,t=new Ie),this.A=new F3,zt(this.h,0,3,this.A),this.j=new z3,zt(this.h,0,2,this.j),Ps(this.j,4,1),Nt(this.j,2,.5),Nt(this.A,2,.5),Nt(this.h,4,.5)}get baseOptions(){return te(this.h,Ie,1)}set baseOptions(s){zt(this.h,0,1,s)}o(s){return"numPoses"in s&&Ps(this.j,4,s.numPoses??1),"minPoseDetectionConfidence"in s&&Nt(this.j,2,s.minPoseDetectionConfidence??.5),"minTrackingConfidence"in s&&Nt(this.h,4,s.minTrackingConfidence??.5),"minPosePresenceConfidence"in s&&Nt(this.A,2,s.minPosePresenceConfidence??.5),"outputSegmentationMasks"in s&&(this.outputSegmentationMasks=s.outputSegmentationMasks??!1),this.l(s)}F(s,t,e){const n=typeof t!="function"?t:{};return this.u=typeof t=="function"?t:e,Rb(this),Xn(this,s,n),Lb(this)}G(s,t,e,n){const r=typeof e!="function"?e:{};return this.u=typeof e=="function"?e:n,Rb(this),ds(this,s,r,t),Lb(this)}m(){var s=new pn;Le(s,"image_in"),Le(s,"norm_rect"),re(s,"normalized_landmarks"),re(s,"world_landmarks"),re(s,"segmentation_masks");const t=new fn;us(t,qS,this.h);const e=new Yi;un(e,2,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Me(e,"IMAGE:image_in"),Me(e,"NORM_RECT:norm_rect"),Zt(e,"NORM_LANDMARKS:normalized_landmarks"),Zt(e,"WORLD_LANDMARKS:world_landmarks"),e.o(t),Fn(s,e),Dh(this,s),this.g.attachProtoVectorListener("normalized_landmarks",((n,r)=>{this.landmarks=[];for(const o of n)n=dc(o),this.landmarks.push(Mh(n));Et(this,r)})),this.g.attachEmptyPacketListener("normalized_landmarks",(n=>{this.landmarks=[],Et(this,n)})),this.g.attachProtoVectorListener("world_landmarks",((n,r)=>{this.worldLandmarks=[];for(const o of n)n=oo(o),this.worldLandmarks.push(ql(n));Et(this,r)})),this.g.attachEmptyPacketListener("world_landmarks",(n=>{this.worldLandmarks=[],Et(this,n)})),this.outputSegmentationMasks&&(Zt(e,"SEGMENTATION_MASK:segmentation_masks"),So(this,"segmentation_masks"),this.g.aa("segmentation_masks",((n,r)=>{this.segmentationMasks=n.map((o=>To(this,o,!0,!this.u))),Et(this,r)})),this.g.attachEmptyPacketListener("segmentation_masks",(n=>{this.segmentationMasks=[],Et(this,n)}))),s=s.g(),this.setGraph(new Uint8Array(s),!0)}};nn.prototype.detectForVideo=nn.prototype.G,nn.prototype.detect=nn.prototype.F,nn.prototype.setOptions=nn.prototype.o,nn.createFromModelPath=function(s,t){return $t(nn,s,{baseOptions:{modelAssetPath:t}})},nn.createFromModelBuffer=function(s,t){return $t(nn,s,{baseOptions:{modelAssetBuffer:t}})},nn.createFromOptions=function(s,t){return $t(nn,s,t)},nn.POSE_CONNECTIONS=c_;function iE(s){const[t,e]=Ce.useState(null),n=Ce.useRef(null),r=Ce.useRef(null);return Ce.useEffect(()=>{let o=!0;async function c(){try{const d=await Ga.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision/wasm");n.current=await Gi.createFromOptions(d,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/gesture_recognizer/gesture_recognizer/float16/1/gesture_recognizer.task"},numHands:1,runningMode:"VIDEO"}),console.log(" MediaPipe GestureRecognizer initialized"),u()}catch(d){console.error(" Failed to initialize gesture recognizer:",d)}}function u(){if(o){if(s.current&&n.current&&s.current.readyState>=2)try{const d=Date.now(),f=n.current.recognizeForVideo(s.current,d);if(f.gestures&&f.gestures[0]&&f.gestures[0][0]){const p=f.gestures[0][0];p.score>.7&&(e(p.categoryName),console.log(` Detected: ${p.categoryName} (${(p.score*100).toFixed(1)}%)`))}else e(null)}catch(d){console.error("Error during gesture detection:",d)}r.current=requestAnimationFrame(u)}}return c(),()=>{o=!1,r.current&&cancelAnimationFrame(r.current),n.current&&n.current.close()}},[s]),t}const om="spatial-presenter-slides";function nE(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Nl(s,t,e="#1a1a2e"){const n=`<svg xmlns="http://www.w3.org/2000/svg" width="1280" height="720" viewBox="0 0 1280 720">
  <rect width="1280" height="720" fill="${e}"/>
  <text x="640" y="80" font-family="system-ui, -apple-system, sans-serif" font-size="48" font-weight="bold" fill="#ffffff" text-anchor="middle">${nE(s)}</text>
  ${t}
</svg>`;return`data:image/svg+xml,${encodeURIComponent(n.trim())}`}function Nb(){return[{id:"demo-welcome",dataUrl:Nl("Welcome to Spatial Presenter",`
        <text x="640" y="200" font-family="system-ui, sans-serif" font-size="28" fill="#a0a0a0" text-anchor="middle">Control your presentations with hand gestures!</text>
        <text x="640" y="320" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff" text-anchor="middle">No clicker needed - just use your hands</text>
        <text x="640" y="380" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff" text-anchor="middle">Open source and free to use</text>
        <text x="640" y="500" font-family="system-ui, sans-serif" font-size="20" fill="#6b7280" text-anchor="middle">Swipe through these slides to learn more</text>
      `),filename:"Welcome",type:"demo"},{id:"demo-upload",dataUrl:Nl("Upload Your Slides",`
        <text x="640" y="180" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff" text-anchor="middle">Click Manage Slides in the sidebar</text>
        <text x="640" y="240" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff" text-anchor="middle">Then drag and drop your files or click to browse</text>
        <rect x="340" y="300" width="600" height="200" rx="12" fill="#2a2a4e" stroke="#4a4a6e" stroke-width="2"/>
        <text x="640" y="380" font-family="system-ui, sans-serif" font-size="20" fill="#a0a0a0" text-anchor="middle">Drop files here</text>
        <text x="640" y="420" font-family="system-ui, sans-serif" font-size="16" fill="#6b7280" text-anchor="middle">or click to browse</text>
        <text x="640" y="560" font-family="system-ui, sans-serif" font-size="18" fill="#6b7280" text-anchor="middle">Your slides are saved locally and persist between sessions</text>
      `),filename:"How to Upload",type:"demo"},{id:"demo-gestures",dataUrl:Nl("Gesture Controls",`
        <rect x="140" y="160" width="450" height="300" rx="16" fill="#2a2a4e"/>
        <text x="365" y="230" font-family="system-ui, sans-serif" font-size="80" text-anchor="middle">Open Hand</text>
        <text x="365" y="300" font-family="system-ui, sans-serif" font-size="28" font-weight="bold" fill="#ffffff" text-anchor="middle">Open Palm</text>
        <text x="365" y="350" font-family="system-ui, sans-serif" font-size="22" fill="#10b981" text-anchor="middle">Next Slide</text>
        <text x="365" y="400" font-family="system-ui, sans-serif" font-size="16" fill="#6b7280" text-anchor="middle">Show your open hand</text>
        
        <rect x="690" y="160" width="450" height="300" rx="16" fill="#2a2a4e"/>
        <text x="915" y="230" font-family="system-ui, sans-serif" font-size="80" text-anchor="middle">Peace Sign</text>
        <text x="915" y="300" font-family="system-ui, sans-serif" font-size="28" font-weight="bold" fill="#ffffff" text-anchor="middle">Victory / Peace</text>
        <text x="915" y="350" font-family="system-ui, sans-serif" font-size="22" fill="#3b82f6" text-anchor="middle">Previous Slide</text>
        <text x="915" y="400" font-family="system-ui, sans-serif" font-size="16" fill="#6b7280" text-anchor="middle">Show two fingers</text>
        
        <text x="640" y="540" font-family="system-ui, sans-serif" font-size="18" fill="#6b7280" text-anchor="middle">Make sure your hand is visible in the webcam preview</text>
        <text x="640" y="580" font-family="system-ui, sans-serif" font-size="18" fill="#6b7280" text-anchor="middle">Hold the gesture briefly - there is a 1 second debounce</text>
      `),filename:"Gestures",type:"demo"},{id:"demo-formats",dataUrl:Nl("Supported File Formats",`
        <rect x="80" y="160" width="240" height="160" rx="12" fill="#2a2a4e"/>
        <text x="200" y="220" font-family="system-ui, sans-serif" font-size="40" text-anchor="middle">Images</text>
        <text x="200" y="270" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">Images</text>
        <text x="200" y="300" font-family="system-ui, sans-serif" font-size="14" fill="#6b7280" text-anchor="middle">PNG, JPG, GIF, SVG</text>
        
        <rect x="360" y="160" width="240" height="160" rx="12" fill="#2a2a4e"/>
        <text x="480" y="220" font-family="system-ui, sans-serif" font-size="40" text-anchor="middle">PDF</text>
        <text x="480" y="270" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">PDF</text>
        <text x="480" y="300" font-family="system-ui, sans-serif" font-size="14" fill="#6b7280" text-anchor="middle">Each page = 1 slide</text>
        
        <rect x="640" y="160" width="240" height="160" rx="12" fill="#2a2a4e"/>
        <text x="760" y="220" font-family="system-ui, sans-serif" font-size="40" text-anchor="middle">PPTX</text>
        <text x="760" y="270" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">PowerPoint</text>
        <text x="760" y="300" font-family="system-ui, sans-serif" font-size="14" fill="#6b7280" text-anchor="middle">Extracts images</text>
        
        <rect x="920" y="160" width="240" height="160" rx="12" fill="#2a2a4e"/>
        <text x="1040" y="220" font-family="system-ui, sans-serif" font-size="40" text-anchor="middle">SVG</text>
        <text x="1040" y="270" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">SVG</text>
        <text x="1040" y="300" font-family="system-ui, sans-serif" font-size="14" fill="#6b7280" text-anchor="middle">Vector graphics</text>
        
        <text x="640" y="400" font-family="system-ui, sans-serif" font-size="20" fill="#ffffff" text-anchor="middle">Pro Tip: Export your Google Slides or Keynote as PDF</text>
        <text x="640" y="450" font-family="system-ui, sans-serif" font-size="18" fill="#6b7280" text-anchor="middle">This preserves all formatting and layouts perfectly!</text>
      `),filename:"File Formats",type:"demo"},{id:"demo-tips",dataUrl:Nl("Tips for Best Results",`
        <text x="200" y="180" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff">Position yourself so the webcam can see your hand clearly</text>
        <text x="200" y="240" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff">Good lighting improves gesture recognition</text>
        <text x="200" y="300" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff">Hold gestures for about 1 second</text>
        <text x="200" y="360" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff">Use New Session to clear all slides and start fresh</text>
        <text x="200" y="420" font-family="system-ui, sans-serif" font-size="24" fill="#ffffff">Slides are saved in your browser - no account needed</text>
        
        <rect x="340" y="480" width="600" height="100" rx="12" fill="#10b98120" stroke="#10b981" stroke-width="2"/>
        <text x="640" y="540" font-family="system-ui, sans-serif" font-size="22" font-weight="bold" fill="#10b981" text-anchor="middle">Ready to present? Upload your slides!</text>
      `),filename:"Tips",type:"demo"}]}function sE(){try{const s=localStorage.getItem(om);return s?JSON.parse(s):Nb()}catch(s){return console.error("Failed to load slides from localStorage:",s),Nb()}}function Ap(s){try{return localStorage.setItem(om,JSON.stringify(s)),!0}catch(t){return t.name==="QuotaExceededError"?(console.error("localStorage quota exceeded"),alert("Storage quota exceeded. Please delete some slides or start a new session."),!1):(console.error("Failed to save slides:",t),!1)}}function aE(){try{return localStorage.removeItem(om),!0}catch(s){return console.error("Failed to clear slides:",s),!1}}function rE(){return`slide-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function oE(){const[s,t]=Ce.useState(()=>sE()),e=Ce.useCallback(c=>{const u=c.map(d=>({...d,id:rE()}));t(d=>{const f=[...d,...u];return Ap(f),f})},[]),n=Ce.useCallback(c=>{t(u=>{const d=u.filter(f=>f.id!==c);return Ap(d),d})},[]),r=Ce.useCallback((c,u)=>{t(d=>{const f=[...d],[p]=f.splice(c,1);return f.splice(u,0,p),Ap(f),f})},[]),o=Ce.useCallback(()=>{aE(),t([])},[]);return{slides:s,isLoading:!1,addSlides:e,removeSlide:n,reorderSlides:r,clearAllSlides:o}}const Di=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Zp=[.001,0,0,.001,0,0],wp=1.35,sn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ga={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},tc="pdfjs_internal_editor_",Ut={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Wt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},lE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},$p={TRIANGLES:1,LATTICE:2},ii={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Wu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$e={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Jr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Rh={ERRORS:0,WARNINGS:1,INFOS:5},ec={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Bl={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},cE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Lh=Rh.WARNINGS;function uE(s){Number.isInteger(s)&&(Lh=s)}function hE(){return Lh}function Nh(s){Lh>=Rh.INFOS&&console.info(`Info: ${s}`)}function Ft(s){Lh>=Rh.WARNINGS&&console.warn(`Warning: ${s}`)}function oe(s){throw new Error(s)}function ae(s,t){s||oe(t)}function dE(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function u_(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=bE(s)}catch{}const n=t?URL.parse(s,t):URL.parse(s);return dE(n)?n:null}function h_(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&u_(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Pt(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const cr=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class Bb extends cr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Sp extends cr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Qp extends cr{constructor(t){super(t,"InvalidPDFException")}}class ah extends cr{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class fE extends cr{constructor(t){super(t,"FormatError")}}class _a extends cr{constructor(t){super(t,"AbortException")}}function pE(s){(typeof s!="object"||s?.length===void 0)&&oe("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),c=s.subarray(r,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function Bh(s){typeof s!="string"&&oe("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function gE(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function mE(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function yE(){try{return new Function(""),!0}catch{return!1}}class ai{static get isLittleEndian(){return Pt(this,"isLittleEndian",mE())}static get isEvalSupported(){return Pt(this,"isEvalSupported",yE())}static get isOffscreenCanvasSupported(){return Pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Pt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Pt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Pt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Pt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Pt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ep=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class vt{static makeHexColor(t,e,n){return`#${Ep[t]}${Ep[e]}${Ep[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const r=t[n],o=t[n+1];t[n]=r*e[0]+o*e[2]+e[4],t[n+1]=r*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],o=e[1],c=e[2],u=e[3],d=e[4],f=e[5];for(let p=0;p<6;p+=2){const m=t[n+p],b=t[n+p+1];t[n+p]=m*r+b*c+d,t[n+p+1]=m*o+b*u+f}}static applyInverseTransform(t,e){const n=t[0],r=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const r=e[0],o=e[1],c=e[2],u=e[3],d=e[4],f=e[5],p=t[0],m=t[1],b=t[2],v=t[3];let A=r*p+d,_=A,S=r*b+d,w=S,x=u*m+f,C=x,R=u*v+f,O=R;if(o!==0||c!==0){const B=o*p,N=o*b,V=c*m,j=c*v;A+=V,w+=V,S+=j,_+=j,x+=B,O+=B,R+=N,C+=N}n[0]=Math.min(n[0],A,S,_,w),n[1]=Math.min(n[1],x,R,C,O),n[2]=Math.max(n[2],A,S,_,w),n[3]=Math.max(n[3],x,R,C,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],o=t[2],c=t[3],u=n**2+r**2,d=n*o+r*c,f=o**2+c**2,p=(u+f)/2,m=Math.sqrt(p**2-(u*f-d**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,r,c]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,r),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,r)}static#t(t,e,n,r,o,c,u,d,f,p){if(f<=0||f>=1)return;const m=1-f,b=f*f,v=b*f,A=m*(m*(m*t+3*f*e)+3*b*n)+v*r,_=m*(m*(m*o+3*f*c)+3*b*u)+v*d;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],_),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],_)}static#e(t,e,n,r,o,c,u,d,f,p,m,b){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,r,o,c,u,d,-m/p,b);return}const v=p**2-4*m*f;if(v<0)return;const A=Math.sqrt(v),_=2*f;this.#t(t,e,n,r,o,c,u,d,(-p+A)/_,b),this.#t(t,e,n,r,o,c,u,d,(-p-A)/_,b)}static bezierBoundingBox(t,e,n,r,o,c,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d),this.#e(t,n,o,u,e,r,c,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),this.#e(t,n,o,u,e,r,c,d,3*(-e+3*(r-c)+d),6*(e-2*r+c),3*(r-e),f)}}function bE(s){return decodeURIComponent(escape(s))}let Tp=null,zb=null;function vE(s){return Tp||(Tp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zb=new Map([["","t"]])),s.replaceAll(Tp,(t,e,n)=>e?e.normalize("NFKC"):zb.get(n))}function d_(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),pE(s)}const no="pdfjs_internal_id_";function _E(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...o]=e;if(!s(n)&&!Number.isInteger(n)||!t(r))return!1;const c=o.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Ei(s,t,e){return Math.min(Math.max(s,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class ic{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(ic.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const d of o.children)r(d)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class f_{static setupStorage(t,e,n,r,o){const c=r.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of n.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:o}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=m}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);c.append(m),u&&ic.shouldBuildText(r.name)&&f.push(m)}return{textDivs:f}}const p=[[r,-1,c]];for(;p.length>0;){const[m,b,v]=p.at(-1);if(b+1===m.children.length){p.pop();continue}const A=m.children[++p.at(-1)[1]];if(A===null)continue;const{name:_}=A;if(_==="#text"){const w=document.createTextNode(A.value);f.push(w),v.append(w);continue}const S=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,_):document.createElement(_);if(v.append(S),A.attributes&&this.setAttributes({html:S,element:A,storage:e,intent:o,linkService:n}),A.children?.length>0)p.push([A,-1,S]);else if(A.value){const w=document.createTextNode(A.value);u&&ic.shouldBuildText(_)&&f.push(w),S.append(w)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Os="http://www.w3.org/2000/svg";class xo{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function fc(s,t="text"){if(jl(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class pc{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=c,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,m,b,v;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,m=0,b=0,v=1;break;case 90:p=0,m=1,b=1,v=0;break;case 270:p=0,m=-1,b=-1,v=0;break;case 0:p=1,m=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let A,_,S,w;p===0?(A=Math.abs(f-t[1])*n+o,_=Math.abs(d-t[0])*n+c,S=(t[3]-t[1])*n,w=(t[2]-t[0])*n):(A=Math.abs(d-t[0])*n+o,_=Math.abs(f-t[1])*n+c,S=(t[2]-t[0])*n,w=(t[3]-t[1])*n),this.transform=[p*n,m*n,b*n,v*n,A-p*n*d-b*n*f,_-m*n*d-v*n*f],this.width=S,this.height=w}get rawDims(){const t=this.viewBox;return Pt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new pc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return vt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];vt.applyTransform(e,this.transform);const n=[t[2],t[3]];return vt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return vt.applyInverseTransform(n,this.transform),n}}class lm extends cr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function zh(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function cm(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function AE(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function wE(s,t="document.pdf"){if(typeof s!="string")return t;if(zh(s))return Ft('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,c=n.pathname.split("/").at(-1);if(o.test(c))return r(c);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const d=Array.from(n.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return r(f)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return r(d[0])}return t}class Fb{started=Object.create(null);times=[];time(t){t in this.started&&Ft(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ft(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-r}ms
`);return t.join("")}}function jl(s,t){const e=t?URL.parse(s,t):URL.parse(s);return e?.protocol==="http:"||e?.protocol==="https:"}function Bn(s){s.preventDefault()}function Pe(s){s.preventDefault(),s.stopPropagation()}function SE(s){console.log("Deprecated API usage: "+s)}class Jp{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(c+=p,u+=m):f==="+"&&(c-=p,u-=m),new Date(Date.UTC(n,r,o,c,u,d))}}function EE(s,{scale:t=1,rotation:e=0}){const{width:n,height:r}=s.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new pc({viewBox:o,userUnit:1,scale:t,rotation:e})}function gc(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ft(`Not a valid color format: "${s}"`),[0,0,0])}function TE(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,gc(n))}t.remove()}function Oe(s){const{a:t,b:e,c:n,d:r,e:o,f:c}=s.getTransform();return[t,e,n,r,o,c]}function es(s){const{a:t,b:e,c:n,d:r,e:o,f:c}=s.getTransform().invertSelf();return[t,e,n,r,o,c]}function sr(s,t,e=!1,n=!0){if(t instanceof pc){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=s,u=ai.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=p,c.height=m):(c.width=m,c.height=p)}n&&s.setAttribute("data-main-rotation",t.rotation)}class os{constructor(){const{pixelRatio:t}=os;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,o=-1){let c=1/0,u=1/0,d=1/0;n=os.capPixels(n,o),n>0&&(c=Math.sqrt(n/(t*e))),r!==-1&&(u=r/t,d=r/e);const f=Math.min(c,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const tg=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class xE{static get isDarkMode(){return Pt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class CE{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Pt(this,"commentForegroundColor",gc(n))}}function kE(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),t=Math.round(t*n+r),e=Math.round(e*n+r),[s,t,e]}function Pb(s,t){const e=s[0]/255,n=s[1]/255,r=s[2]/255,o=Math.max(e,n,r),c=Math.min(e,n,r),u=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const d=o-c;switch(t[1]=u<.5?d/(o+c):d/(2-o-c),o){case e:t[0]=((n-r)/d+(n<r?6:0))*60;break;case n:t[0]=((r-e)/d+2)*60;break;case r:t[0]=((e-n)/d+4)*60;break}}t[2]=u}function eg(s,t){const e=s[0],n=s[1],r=s[2],o=(1-Math.abs(2*r-1))*n,c=o*(1-Math.abs(e/60%2-1)),u=r-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=o+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=c+u;break}}function Ib(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function Ub(s,t,e){eg(s,e),e.map(Ib);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];eg(t,e),e.map(Ib);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const Hb=new Map;function ME(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=Hb.get(e);if(n)return n;const r=new Float32Array(9),o=r.subarray(0,3),c=r.subarray(3,6);Pb(s,c);const u=r.subarray(6,9);Pb(t,u);const d=u[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),Ub(c,u,o)<f){let p,m;d?(p=c[2],m=1):(p=0,m=c[2]);const b=.005;for(;m-p>b;){const v=c[2]=(p+m)/2;d===Ub(c,u,o)<f?p=v:m=v}c[2]=d?m:p}return eg(c,o),n=vt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Hb.set(e,n),n}function p_({html:s,dir:t,className:e},n){const r=document.createDocumentFragment();if(typeof s=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=s.split(/(?:\r\n?|\n)/);for(let u=0,d=c.length;u<d;++u){const f=c[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}r.append(o)}else f_.render({xfaHtml:s,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",e),n.append(r)}function g_(s){const t=new Path2D;if(!s)return t;for(let e=0,n=s.length;e<n;)switch(s[e++]){case Bl.moveTo:t.moveTo(s[e++],s[e++]);break;case Bl.lineTo:t.lineTo(s[e++],s[e++]);break;case Bl.curveTo:t.bezierCurveTo(s[e++],s[e++],s[e++],s[e++],s[e++],s[e++]);break;case Bl.quadraticCurveTo:t.quadraticCurveTo(s[e++],s[e++],s[e++],s[e++]);break;case Bl.closePath:t.closePath();break;default:Ft(`Unrecognized drawing path operator: ${s[e-1]}`);break}return t}class ne{static#t=null;static#e=null;static#n=null;static#i=0;static#a=[];get pagesNumber(){return ne.#i}set pagesNumber(t){ne.#i!==t&&(ne.#i=t,t===0&&(ne.#e=null,ne.#t=null))}addListener(t){ne.#a.push(t)}removeListener(t){const e=ne.#a.indexOf(t);e>=0&&ne.#a.splice(e,1)}#r(){for(const t of ne.#a)t()}#s(t){if(ne.#e)return;const e=ne.#i,n=new Uint32Array(3*e),r=ne.#e=n.subarray(0,e),o=ne.#t=n.subarray(e,2*e);if(t)for(let c=0;c<e;c++)r[c]=o[c]=c+1;ne.#n=n.subarray(2*e)}movePages(t,e,n){this.#s(!0);const r=ne.#e,o=ne.#t;ne.#n.set(o);const c=e.length,u=new Uint32Array(c);let d=0;for(let v=0;v<c;v++){const A=e[v]-1;u[v]=r[A],A<n&&(d+=1)}const f=ne.#i;let p=n-d;const m=f-c;p=Ei(p,0,m);for(let v=0,A=0;v<f;v++)t.has(v+1)||(r[A++]=r[v]);r.copyWithin(p+c,p,m),r.set(u,p);let b=!1;for(let v=0,A=f;v<A;v++){const _=r[v];b||=_!==v+1,o[_-1]=v+1}this.#r(),b||(this.pagesNumber=0)}hasBeenAltered(){return ne.#e!==null}getPageMappingForSaving(){return{pageIndices:ne.#t?ne.#t.map(t=>t-1):null}}getPrevPageNumber(t){return ne.#n[ne.#e[t-1]-1]}getPageNumber(t){return ne.#t?.[t-1]??t}getPageId(t){return ne.#e?.[t-1]??t}static get instance(){return Pt(this,"instance",new ne)}getMapping(){return ne.#e.subarray(0,this.pagesNumber)}}class Kl{#t=null;#e=null;#n;#i=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,Kl.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Bn,{signal:e}),t.addEventListener("pointerdown",Kl.#l,{signal:e}));const n=this.#i=document.createElement("div");n.className="buttons",t.append(n);const r=this.#n.toolbarPosition;if(r){const{style:o}=t,c=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,Pe(t)}#h(t){this.#n._focusEventsAllowed=!0,Pe(t)}#f(t){const e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Bn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Kl.#c[t]),this.#f(n)&&n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#i.append(n)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#i.append(e,this.#m),this.#a=t}addComment(t,e=null){if(this.#r)return;const n=t.renderForToolbar();if(!n)return;this.#f(n);const r=this.#s=this.#m;e?(this.#i.insertBefore(n,e),this.#i.insertBefore(r,e)):this.#i.append(n,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#i.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#n);this.#f(e),this.#i.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const r=this.#i.querySelector(n);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class DE{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Bn,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,e){let n=0,r=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const u=o.x+(e?o.width:0);if(c>n){r=u,n=c;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,n]}show(t,e,n){const[r,o]=this.#a(e,n),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,n,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",n);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",Bn,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function m_(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}class se{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(se.#e||=new Set).add(t)}static setPointer(t,e){se.#t||=e,se.#i??=t}static setTimeStamp(t){se.#n=t}static isSamePointerId(t){return se.#t===t}static isSamePointerIdOrRemove(t){return se.#t===t?!0:(se.#e?.delete(t),!1)}static isSamePointerType(t){return se.#i===t}static isInitializedAndDifferentPointerType(t){return se.#i!==null&&!se.isSamePointerType(t)}static isSameTimeStamp(t){return se.#n===t}static isUsingMultiplePointers(){return se.#e?.size>=1}static clearPointerType(){se.#i=null}static clearPointerIds(){se.#t=NaN,se.#e=null}static clearTimeStamp(){se.#n=NaN}}class OE{#t=0;get id(){return`${tc}${this.#t++}`}}class um{#t=d_();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Pt(this,"_isSVGFittingCanvas",o)}async#i(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(n.url=e,r=await fc(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=um._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},c.onload=async()=>{const m=n.svgUrl=c.result;u.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=c.onerror=p});c.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Ft(r),n=null}return this.#n.set(t,n),n&&this.#n.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:r,type:o}=t;return this.#i(`${e}_${n}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const n=await e;return this.#i(t,n)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,n),this.#n.set(n.id,n),n}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class RE{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:e,post:n,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(c&&this.#t[this.#i].type===o){u&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class mc{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ai.platform;for(const[n,r,o={}]of t)for(const c of n){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=n;u&&!u(t,e)||(r.bind(t,...c,e)(),o||Pe(e))}}class hm{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return TE(t),Pt(this,"_colors",t)}convert(t){const e=gc(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((o,c)=>o===e[c]))return hm._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?vt.makeHexColor(...e):t}}class Aa{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new RE;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#T=null;#S=null;#A=null;#C=null;#_=!1;#E=null;#D=new OE;#k=!1;#M=!1;#F=!1;#R=null;#N=null;#P=null;#B=null;#V=null;#x=Ut.NONE;#w=new Set;#L=null;#I=null;#H=null;#q=null;#Y=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#z=null;#X=null;#Q=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Aa.prototype,e=c=>c.#X.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Pt(this,"_keyboardManager",new mc([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#X.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#X.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,n,r,o,c,u,d,f,p,m,b,v,A,_,S){const w=this._signal=this.#t.signal;this.#X=t,this.#Q=e,this.#J=n,this.#r=r,this.#l=o,this.#I=c,this.#Y=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:w}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),u._on("setpreference",this.onSetPreference.bind(this),{signal:w}),u._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:w}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:w}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:w}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#T=d.filterFactory,this.#H=f,this.#C=p||null,this.#y=m,this.#v=b,this.#b=v,this.#V=A||null,this.viewParameters={realScale:xo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=S!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#E?.hide(),this.#E=null,this.#P?.destroy(),this.#P=null,this.#n=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Pt(this,"hcmFilter",this.#H?this.#T.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Pt(this,"direction",getComputedStyle(this.#X).direction)}get _highlightColors(){return Pt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Pt(this,"highlightColors",null);const e=new Map,n=!!this.#H;for(const[r,o]of t){const c=r.endsWith("_HCM");if(n&&c){e.set(r.replace("_HCM",""),o);continue}!n&&!c&&e.set(r,o)}return Pt(this,"highlightColors",e)}get highlightColorNames(){return Pt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#P=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,r){this.#l?.showDialog(this,t,e,n,r)}selectComment(t,e){this.#a.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},r=()=>{this._editorUndoBar?.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:r,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await n}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPagesEdited({pagesMapper:t}){for(const r of this.#i.values())r.updatePageIndex(t.getPrevPageNumber(r.pageIndex+1)-1);const e=this.#a,n=this.#a=new Map;for(const[r,o]of e){const c=t.getPrevPageNumber(r+1)-1;if(c===-1){o.destroy();continue}n.set(c,o),o.updatePageIndex(c)}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#X.focus()}findParent(t,e){for(const n of this.#a.values()){const{x:r,y:o,width:c,height:u}=n.div.getBoundingClientRect();if(t>=r&&t<=r+c&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*xo.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#$({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#a.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:c,focusOffset:u}=n,d=n.toString(),p=this.#$(n).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;n.empty();const b=this.#tt(p),v=this.#x===Ut.NONE,A=()=>{const _=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:r,anchorOffset:o,focusNode:c,focusOffset:u,text:d});v&&this.showAllEditors("highlight",!0,!0),e&&_?.editComment()};if(v){this.switchToMode(Ut.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#$(t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#E||=new DE(this),this.#E.show(n,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${tc}${t}`,n=this.#s.getRawValue(e);return n&&this.#s.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#L)return;const r=this.#$(t).closest(".textLayer");if(!r){this.#L&&(this.#E?.hide(),this.#L=null,this.#O({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=e,this.#O({hasSelectedText:!0}),!(this.#x!==Ut.HIGHLIGHT&&this.#x!==Ut.NONE)&&(this.#x===Ut.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#_=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#x===Ut.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#M){const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#x===Ut.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#N=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,e]=this.#N;this.#N=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#R)return;this.#R=new AbortController;const t=this.combinedSignal(this.#R);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#R?.abort(),this.#R=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#w){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ft(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of n){const f=await r.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)this.#it(d);this.#nt(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){Ft(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==Ut.NONE&&!this.isEditorHandlingKeyboard&&Aa._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#O(t){Object.entries(t).some(([n,r])=>this.#K[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,t)}),this.#x===Ut.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Wt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#O({isEditing:this.#x!==Ut.NONE,isEmpty:this.#Z(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#k?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,o=!1,c=!1){if(this.#x!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#x===Ut.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#x=t,t===Ut.NONE){this.setEditingState(!1),this.#pt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===Ut.SIGNATURE&&await this.#I?.loadSignatures(),n&&se.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#a.values())u.updateMode(t);if(t===Ut.POPUP){this.#n||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,d=[];for(const f of this.#i.values()){const{annotationElementId:p,hasComment:m,deleted:b}=f;p&&u.add(p),m&&!b&&d.push(f.getData())}for(const f of this.#n){const{id:p,popupRef:m,contentsObj:b}=f;m&&b?.str&&!u.has(p)&&!this.#m.has(p)&&d.push(f)}this.#l?.showSidebar(d)}if(!e){r&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const u of this.#i.values())u.uid===e?(this.setSelected(u),c?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Wt.CREATE:this.currentLayer.addNewEditor(e);return;case Wt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(t,e);else for(const n of this.#u)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const o of this.#i.values())o.editorType===t&&o.show(e);(this.#q?.get(Wt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Wt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#F!==t){this.#F=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#k){this.#k=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#pt(){if(this.unselectAll(),this.#k){this.#k=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const e of this.#i.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#O({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Z()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Z()})}addCommands(t){this.#c.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Z()})}cleanUndoStack(t){this.#c.cleanType(t)}#Z(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],n=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},r=()=>{for(const o of e)this.#it(o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#x!==Ut.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;const[r,o]=this.#j,c=[...this.#w],u=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#w)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:r,y:o,pageIndex:c},u]of t)u.newX=r,u.newY=o,u.newPageIndex=c,e||=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!e)return!1;const n=(r,o,c,u)=>{if(this.#i.has(r.id)){const d=this.#a.get(u);d?r._setParentAndPosition(d,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of t)n(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of t)n(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const n of this.#g.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#x}isEditingMode(){return this.#x!==Ut.NONE}get imageManager(){return Pt(this,"imageManager",new um)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,m,b)=>({x:(p-r)/c,y:1-(f+m-n)/o,width:b/c,height:m/o});break;case"180":u=(f,p,m,b)=>({x:1-(f+m-n)/o,y:1-(p+b-r)/c,width:m/o,height:b/c});break;case"270":u=(f,p,m,b)=>({x:1-(p+b-r)/c,y:(f-n)/o,width:b/c,height:m/o});break;default:u=(f,p,m,b)=>({x:(f-n)/o,y:(p-r)/c,width:m/o,height:b/c});break}const d=[];for(let f=0,p=e.rangeCount;f<p;f++){const m=e.getRangeAt(f);if(!m.collapsed)for(const{x:b,y:v,width:A,height:_}of m.getClientRects())A===0||_===0||d.push(u(b,v,A,_))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#x===Ut.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const r=this.#B?.get(t);r&&(r.setCanvas(e,n),this.#B.delete(t))}addMissingCanvas(t,e){(this.#B||=new Map).set(t,e)}}class ss{#t=null;#e=!1;#n=null;#i=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,ss.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ss._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",ss.#f.missing),e.setAttribute("data-l10n-id",ss.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",Bn,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:n}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await ss._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(this.#l=n,this.#d=r),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",ss.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",ss.#f[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Fu{#t=null;#e=null;#n=!1;#i=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#i.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(n.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:r,y:o,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/c,(e+n-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=this.#i._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Bn,{signal:n}),e&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,Pe(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,Pe(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,r(o))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,r;if(e)[n,r]=e;else{[n,r]=this.#i.commentButtonPosition;const{width:p,height:m,x:b,y:v}=this.#i;n=b+n*p,r=v+r*m}const o=this.#i.parent.boundingClientRect,{x:c,y:u,width:d,height:f}=o;this.#i._uiManager.editComment(this.#i,c+n*d,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#r=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:e,date:n}){this.#s=t,this.#r=e,this.#o=n,this.#c=!1}setInitialText(t,e=null){this.#a=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class Fh{#t;#e=!1;#n=null;#i;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=n,this.#i=e,this.#a=r,this.#r=o,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/os.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Pe(f),d(f))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,c={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#g.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",Pe,c),o.addEventListener("pointermove",Pe,c),o.addEventListener("pointercancel",Pe,c),o.addEventListener("pointerup",Pe,c),this.#a?.()}if(Pe(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;Pe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:o}=e,{screenX:c,screenY:u}=n,d=this.#l,{touch0X:f,touch0Y:p,touch1X:m,touch1Y:b}=d,v=m-f,A=b-p,_=c-r,S=u-o,w=Math.hypot(_,S)||1,x=Math.hypot(v,A)||1;if(!this.#e&&Math.abs(x-w)<=Fh.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=c,d.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(r+c)/2,(o+u)/2];this.#r?.(C,x,w)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(Pe(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class Lt{#t=null;#e=null;#n=null;#i=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#T=0;#S=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#_=!1;#E=Lt._zIndex++;static _borderLineWidth=-1;static _colorManager=new hm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Lt.prototype._resizeWithKeyboard,e=Aa.TRANSLATE_SMALL,n=Aa.TRANSLATE_BIG;return Pt(this,"_resizerKeyboardManager",new mc([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Lt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Pt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new LE({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Lt._l10n??=t,Lt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Lt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Lt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){oe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#_}set _isDraggable(t){this.#_=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#z(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[o,c]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(e+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}#D([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,f]=this.getBaseTranslation();c+=d,u+=f;const{style:p}=n;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Lt,r=n/t,o=n/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:o,y:c,width:u,height:d}=this;if(u*=n,d*=r,o*=n,c*=r,this._mustFixPosition)switch(t){case 0:o=Ei(o,0,n-u),c=Ei(c,0,r-d);break;case 90:o=Ei(o,0,n-d),c=Ei(c,u,r);break;case 180:o=Ei(o,u,n),c=Ei(c,d,r);break;case 270:o=Ei(o,d,n),c=Ei(c,0,r-u);break}this.x=o/=n,this.y=c/=r;const[f,p]=this.getBaseTranslation();o+=f,c+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#k(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Lt.#k(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Lt.#k(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#R.bind(this,n),{signal:e}),r.addEventListener("contextmenu",Bn,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#R(t,e){e.preventDefault();const{isMac:n}=ai.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",Pe,{passive:!1,signal:c}),window.addEventListener("contextmenu",Bn,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#P()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#N(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#P(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=this.#d;this.#d=null;const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===e&&u===n&&d===r||this.addCommands({cmd:this.#N.bind(this,o,c,u,d),undo:this.#N.bind(this,t,e,n,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,e){const[n,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=Lt.MIN_SIZE/n,p=Lt.MIN_SIZE/r,m=this.#M(this.rotation),b=(U,H)=>[m[0]*U+m[2]*H,m[1]*U+m[3]*H],v=this.#M(360-this.rotation),A=(U,H)=>[v[0]*U+v[2]*H,v[1]*U+v[3]*H];let _,S,w=!1,x=!1;switch(t){case"topLeft":w=!0,_=(U,H)=>[0,0],S=(U,H)=>[U,H];break;case"topMiddle":_=(U,H)=>[U/2,0],S=(U,H)=>[U/2,H];break;case"topRight":w=!0,_=(U,H)=>[U,0],S=(U,H)=>[0,H];break;case"middleRight":x=!0,_=(U,H)=>[U,H/2],S=(U,H)=>[0,H/2];break;case"bottomRight":w=!0,_=(U,H)=>[U,H],S=(U,H)=>[0,0];break;case"bottomMiddle":_=(U,H)=>[U/2,H],S=(U,H)=>[U/2,0];break;case"bottomLeft":w=!0,_=(U,H)=>[0,H],S=(U,H)=>[U,0];break;case"middleLeft":x=!0,_=(U,H)=>[0,H/2],S=(U,H)=>[U,H/2];break}const C=_(u,d),R=S(u,d);let O=b(...R);const B=Lt._round(o+O[0]),N=Lt._round(c+O[1]);let V=1,j=1,Z,at;if(e.fromKeyboard)({deltaX:Z,deltaY:at}=e);else{const{screenX:U,screenY:H}=e,[ct,st]=this.#l;[Z,at]=this.screenToPageTranslation(U-ct,H-st),this.#l[0]=U,this.#l[1]=H}if([Z,at]=A(Z/n,at/r),w){const U=Math.hypot(u,d);V=j=Math.max(Math.min(Math.hypot(R[0]-C[0]-Z,R[1]-C[1]-at)/U,1/u,1/d),f/u,p/d)}else x?V=Ei(Math.abs(R[0]-C[0]-Z),f,1)/u:j=Ei(Math.abs(R[1]-C[1]-at),p,1)/d;const F=Lt._round(u*V),$=Lt._round(d*j);O=b(...S(F,$));const k=B-O[0],tt=N-O[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=F,this.height=$,this.x=k,this.y=tt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Kl(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(ss.initialize(Lt._l10n),this.#n=new ss(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Fu(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){if(!this.#i)return null;const{data:{richText:t,text:e,date:n,deleted:r}}=this.#i;return{text:e,richText:t,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Fu(this),typeof t=="object"&&t!==null?this.#i.restoreData(t):this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#i||=new Fu(this),this.#i.setInitialText(t,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Fu(this),this.#i.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,d=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#i.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),m_(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Fh({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#x.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#x(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const c=this.#M(this.rotation),u=(B,N)=>[c[0]*B+c[2]*N,c[1]*B+c[3]*N],[d,f]=this.parentDimensions,p=this.x,m=this.y,b=this.width,v=this.height,A=Lt.MIN_SIZE/d,_=Lt.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/v),A/b,_/v);const S=Lt._round(b*o),w=Lt._round(v*o);if(S===b&&w===v)return;this.#u||=[p,m,b,v];const x=u(b/2,v/2),C=Lt._round(p+x[0]),R=Lt._round(m+x[1]),O=u(S/2,w/2);this.x=C-O[0],this.y=R-O[1],this.width=S,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#P()}pointerdown(t){const{isMac:e}=ai.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#I(t);return}this.#L(t)}#L(t){const{isMac:e}=ai.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#L(f),n&&this._onStopDragging()};e&&(this.#T=t.clientX,this.#S=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:b}=f;if(b!==this.#s){Pe(f);return}const[v,A]=this.screenToPageTranslation(p-this.#T,m-this.#S);this.#T=p,this.#S=m,this._uiManager.dragSelectedEditors(v,A)},c),window.addEventListener("touchmove",Pe,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),Pe(f)},c));const d=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}Pe(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/r,p=e/r,m=this.x*o,b=this.y*c,v=this.width*o,A=this.height*c;switch(n){case 0:return[m+f+u,c-b-p-A+d,m+f+v+u,c-b-p+d];case 90:return[m+p+u,c-b+f+d,m+p+A+u,c-b+f+v+d];case 180:return[m-f-v+u,c-b+p+d,m-f+u,c-b+p+A+d];case 270:return[m-p-A+u,c-b-f-v+d,m-p+u,c-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,o,c]=t,u=o-n,d=c-r;switch(this.rotation){case 0:return[n,e-c,u,d];case 90:return[n,e-r,d,u];case 180:return[o,e-r,u,d];case 270:return[o,e-c,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:r,deleted:o,richText:c},uid:u,pageIndex:d,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!o,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return e<c&&r>0&&t<o&&n>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,c]=r.pageDimensions,[u,d,f,p]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/o,r.y=d/c,r.width=f/o,r.height=p/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#z(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,r,o,c]=this.getPDFRect();return[Lt._round(n+(o-n)*t),Lt._round(r+(c-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const c=this.#q.bind(this),u=this.#Y.bind(this),d=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#K.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",Lt._l10nResizer[p])}}const n=this.#e[0];let r=0;for(const c of e){if(c===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of e){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Lt._l10nResizer[f])}}this.#j(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){Lt._resizerKeyboardManager.exec(this,t)}#Y(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#z()}#K(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#z(){this.#v=!1,this.#j(-1),this.#P()}_stopResizingWithKeyboard(){this.#z(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:n}=t;let r=this.#A.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(n),this.#A.size===0&&(this.#A=null)},Lt._telemetryTimeout),this.#A.set(n,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class LE extends Lt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const jb=3285377520,On=4294901760,is=65535;class y_{constructor(t){this.h1=t?t&4294967295:jb,this.h2=t?t&4294967295:jb}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let _=0,S=t.length;_<S;_++){const w=t.charCodeAt(_);w<=255?e[n++]=w:(e[n++]=w>>>8,e[n++]=w&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,c=new Uint32Array(e.buffer,0,r);let u=0,d=0,f=this.h1,p=this.h2;const m=3432918353,b=461845907,v=m&is,A=b&is;for(let _=0;_<r;_++)_&1?(u=c[_],u=u*m&On|u*v&is,u=u<<15|u>>>17,u=u*b&On|u*A&is,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[_],d=d*m&On|d*v&is,d=d<<15|d>>>17,d=d*b&On|d*A&is,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*m&On|u*v&is,u=u<<15|u>>>17,u=u*b&On|u*A&is,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&On|t*36045&is,e=e*4283543511&On|((e<<16|t>>>16)*2950163797&On)>>>16,t^=e>>>1,t=t*444984403&On|t*60499&is,e=e*3301882366&On|((e<<16|t>>>16)*3120437893&On)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const ig=Object.freeze({map:null,hash:"",transfer:void 0});class dm{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#i.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#i.get(t)}remove(t){const e=this.#i.get(t);if(e!==void 0&&(e instanceof Lt&&this.#n.delete(e.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#i.values())if(n instanceof Lt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#i.get(t);let r=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(r=!0,n[o]=c);else r=!0,this.#i.set(t,e);r&&this.#a(),e instanceof Lt&&((this.#n||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b_(this)}get serializable(){if(this.#i.size===0)return ig;const t=new Map,e=new y_,n=[],r=Object.create(null);let o=!1;for(const[c,u]of this.#i){const d=u instanceof Lt?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:ig}get editorStats(){let t=null;const e=new Map;let n=0,r=0;for(const o of this.#i.values()){if(!(o instanceof Lt)){o.popup&&(o.popup.deleted?r+=1:n+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(n+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,p]of Object.entries(c)){if(f==="type")continue;let m=d.get(f);m||(m=new Map,d.set(f,m));const b=m.get(p)??0;m.set(p,b+1)}}if((r>0||n>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:n}),!t)return null;for(const[o,c]of e)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#n?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const e of this.#n.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class b_ extends dm{#t;constructor(t){super();const{map:e,hash:n,transfer:r}=t.serializable,o=structuredClone(e,r?{transfer:r}:null);this.#t={map:o,hash:n,transfer:r}}get print(){oe("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Pt(this,"modifiedIds",{ids:new Set,hash:""})}}class NE{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(ae(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:c}=t,u=new FontFace(r,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),n?.(t)}catch{Ft(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}oe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ft(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Pt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Pt(this,"isSyncFontLoadingSupported",Di||ai.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ae(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Pt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,O){return R.charCodeAt(O)<<24|R.charCodeAt(O+1)<<16|R.charCodeAt(O+2)<<8|R.charCodeAt(O+3)&255}function r(R,O,B,N){const V=R.substring(0,O),j=R.substring(O+B);return V+N+j}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function p(R,O){if(++f>30){Ft("Load test font never loaded."),O();return}if(d.font="30px "+R,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(p.bind(null,R,O))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,m.length,m);const A=16,_=1482184792;let S=n(b,A);for(o=0,c=m.length-3;o<c;o+=4)S=S-_+n(m,o)|0;o<m.length&&(S=S-_+n(m+"XXX",o)|0),b=r(b,A,4,gE(S));const w=`url(data:font/opentype;base64,${btoa(b)});`,x=`@font-face {font-family:"${m}";src:${w}}`;this.insertRule(x);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const R of[t.loadedName,m]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=R,C.append(O)}this._document.body.append(C),p(m,()=>{C.remove(),e.complete()})}}class BE{#t;constructor(t,e=null,n,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(c){Ft(`getPathGenerator - ignoring character: "${c}".`)}const o=g_(r?.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){Pt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){Pt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class lo{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let r=0;for(const f of lo.strings){const p=e.encode(t[f]);n[f]=p,r+=4+p.length}const o=new ArrayBuffer(r),c=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of lo.strings){const p=n[f],m=p.length;u.setUint32(d,m),c.set(p,d+4),d+=4+m}return ae(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){ae(t<lo.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class co{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let r=0;for(const b of co.strings){const v=e.encode(t[b]);n[b]=v,r+=4+v.length}r+=4;let o,c,u=1+r;t.style&&(o=e.encode(t.style.style),c=e.encode(t.style.weight),u+=4+o.length+4+c.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let m=0;p.setUint8(m++,t.guessFallback?1:0),p.setUint32(m,0),m+=4,r=0;for(const b of co.strings){const v=n[b],A=v.length;r+=4+A,p.setUint32(m,A),f.set(v,m+4),m+=4+A}return p.setUint32(m-r-4,r),t.style&&(p.setUint32(m,o.length),f.set(o,m+4),m+=4+o.length,p.setUint32(m,c.length),f.set(c,m+4),m+=4+c.length),ae(m<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(m)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){ae(t<co.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#n.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const r=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:n,weight:o}}}class ge{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#a=this.#i+1+6;#r;#s;#o;constructor({data:t,extra:e}){this.#r=t,this.#s=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){ae(t<ge.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,r=this.#o.getUint8(e)>>n&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return ae(t<ge.numbers.length,"Invalid number index"),this.#o.getFloat64(ge.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=ge.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<4;r++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=ge.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<6;r++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=ge.#i;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<3;r++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#d(t){ae(t<ge.strings.length,"Invalid string index");let e=ge.#a+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),r=new Uint8Array(n);return r.set(new Uint8Array(this.#r,e+4,n)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=ge.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#r,t+4,o)}clearData(){let t=ge.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=ge.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#r,t+4,r)),new lo(o.buffer)}get systemFontInfo(){let t=ge.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(this.#r,t+4,n)),new co(r.buffer)}static write(t){const e=t.systemFontInfo?co.write(t.systemFontInfo):null,n=t.cssFontInfo?lo.write(t.cssFontInfo):null,r=new TextEncoder,o={};let c=0;for(const _ of ge.strings)o[_]=r.encode(t[_]),c+=4+o[_].length;const u=ge.#a+4+c+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let m=0;const b=ge.bools.length;let v=0,A=0;for(let _=0;_<b;_++){const S=t[ge.bools[_]];v|=(S===void 0?0:S?2:1)<<A,A+=2,(A===8||_===b-1)&&(p.setUint8(m++,v),v=0,A=0)}ae(m===ge.#t,"FontInfo.write: Boolean properties offset mismatch");for(const _ of ge.numbers)p.setFloat64(m,t[_]),m+=8;if(ae(m===ge.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(m++,4);for(const _ of t.bbox)p.setInt16(m,_,!0),m+=2}else p.setUint8(m++,0),m+=8;if(ae(m===ge.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(m++,6);for(const _ of t.fontMatrix)p.setFloat64(m,_,!0),m+=8}else p.setUint8(m++,0),m+=48;if(ae(m===ge.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(m++,1);for(const _ of t.defaultVMetrics)p.setInt16(m,_,!0),m+=2}else p.setUint8(m++,0),m+=6;ae(m===ge.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(ge.#a,0),m+=4;for(const _ of ge.strings){const S=o[_],w=S.length;p.setUint32(m,w),f.set(S,m+4),m+=4+w}if(p.setUint32(ge.#a,m-ge.#a-4),!e)p.setUint32(m,0),m+=4;else{const _=e.byteLength;p.setUint32(m,_),ae(m+4+_<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),m+4),m+=4+_}if(!n)p.setUint32(m,0),m+=4;else{const _=n.byteLength;p.setUint32(m,_),ae(m+4+_<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),m+4),m+=4+_}return t.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,t.data.length),f.set(t.data,m+4),m+=4+t.data.length),ae(m<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(m)}}class di{static#t=0;static#e=1;static#n=2;static#i=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,r=[],o=[],c=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],c=t[3],e===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],r=t[2],o=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(r.length/2),m=Math.floor(o.length/3),b=c.length,v=u.length;let A=0;for(const O of u)A+=1,A=Math.ceil(A/4)*4,A+=4+O.coords.length*4,A+=4+O.colors.length*4,O.verticesPerRow!==void 0&&(A+=4);const _=20+p*8+m*3+b*8+(n?16:0)+(f?3:0)+A,S=new ArrayBuffer(_),w=new DataView(S),x=new Uint8Array(S);w.setUint8(di.#t,e),w.setUint8(di.#e,n?1:0),w.setUint8(di.#n,f?1:0),w.setUint8(di.#i,d),w.setUint32(di.#a,p,!0),w.setUint32(di.#r,m,!0),w.setUint32(di.#s,b,!0),w.setUint32(di.#o,v,!0);let C=20;new Float32Array(S,C,p*2).set(r),C+=p*8,x.set(o,C),C+=m*3;for(const[O,B]of c)w.setFloat32(C,O,!0),C+=4,w.setUint32(C,parseInt(B.slice(1),16),!0),C+=4;if(n)for(const O of n)w.setFloat32(C,O,!0),C+=4;f&&(x.set(f,C),C+=3);for(let O=0;O<u.length;O++){const B=u[O];w.setUint8(C,B.type),C+=1,C=Math.ceil(C/4)*4,w.setUint32(C,B.coords.length,!0),C+=4,new Int32Array(S,C,B.coords.length).set(B.coords),C+=B.coords.length*4,w.setUint32(C,B.colors.length,!0),C+=4,new Int32Array(S,C,B.colors.length).set(B.colors),C+=B.colors.length*4,B.verticesPerRow!==void 0&&(w.setUint32(C,B.verticesPerRow,!0),C+=4)}return S}getIR(){const t=this.view,e=this.data[di.#t],n=!!this.data[di.#e],r=!!this.data[di.#n],o=t.getUint32(di.#a,!0),c=t.getUint32(di.#r,!0),u=t.getUint32(di.#s,!0),d=t.getUint32(di.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const m=new Uint8Array(this.buffer,f,c*3);f+=c*3;const b=[];for(let S=0;S<u;++S){const w=t.getFloat32(f,!0);f+=4;const x=t.getUint32(f,!0);f+=4,b.push([w,`#${x.toString(16).padStart(6,"0")}`])}let v=null;if(n){v=[];for(let S=0;S<4;++S)v.push(t.getFloat32(f,!0)),f+=4}let A=null;r&&(A=new Uint8Array(this.buffer,f,3),f+=3);const _=[];for(let S=0;S<d;++S){const w=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const x=t.getUint32(f,!0);f+=4;const C=new Int32Array(this.buffer,f,x);f+=x*4;const R=t.getUint32(f,!0);f+=4;const O=new Int32Array(this.buffer,f,R);f+=R*4;const B={type:w,coords:C,colors:O};w===$p.LATTICE&&(B.verticesPerRow=t.getUint32(f,!0),f+=4),_.push(B)}if(e===1)return["RadialAxial","axial",v,b,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",v,b,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const S=this.data[di.#i];let w=null;if(p.length>0){let x=p[0],C=p[0],R=p[1],O=p[1];for(let B=0;B<p.length;B+=2){const N=p[B],V=p[B+1];x=x>N?N:x,R=R>V?V:R,C=C<N?N:C,O=O<V?V:O}w=[x,R,C,O]}return["Mesh",S,p,m,_,w,v,A]}throw new Error(`Unsupported pattern kind: ${e}`)}}class zE{static write(t){let e,n;return ai.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}#t;constructor(t){this.#t=t}get path(){return ai.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function FE(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(Di)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function PE(s){if(Di&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Bh(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Pu(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const ng=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,IE=s=>typeof s=="object"&&typeof s?.name=="string",UE=_E.bind(null,ng,IE);class HE{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ft("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Iu={DATA:1,ERROR:2},Ze={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Gb(){}function Vi(s){if(s instanceof _a||s instanceof Qp||s instanceof Bb||s instanceof ah||s instanceof Sp)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||oe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new _a(s.message);case"InvalidPDFException":return new Qp(s.message);case"PasswordException":return new Bb(s.message,s.code);case"ResponseException":return new ah(s.message,s.status,s.missing);case"UnknownErrorException":return new Sp(s.message,s.details)}return new Sp(s.message,s.toString())}class Gl{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Iu.DATA)r.resolve(t.data);else if(t.callback===Iu.ERROR)r.reject(Vi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(c){o.postMessage({sourceName:n,targetName:r,callback:Iu.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:n,targetName:r,callback:Iu.ERROR,callbackId:t.callbackId,reason:Vi(c)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:c,targetName:u,stream:Ze.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{ae(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:Ze.CANCEL,streamId:o,reason:Vi(f)}),p.promise}},n)}#n(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,p=1,m){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=p,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:Ze.ENQUEUE,streamId:e,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Ze.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){ae(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Ze.ERROR,streamId:e,reason:Vi(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ze.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:Ze.START_COMPLETE,streamId:e,reason:Vi(f)})})}#i(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case Ze.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Vi(t.reason));break;case Ze.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Vi(t.reason));break;case Ze.PULL:if(!u){o.postMessage({sourceName:n,targetName:r,stream:Ze.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Gb).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ze.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:Ze.PULL_COMPLETE,streamId:e,reason:Vi(f)})});break;case Ze.ENQUEUE:if(ae(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Ze.CLOSE:if(ae(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,e);break;case Ze.ERROR:ae(c,"error should have stream controller"),c.controller.error(Vi(t.reason)),this.#a(c,e);break;case Ze.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Vi(t.reason)),this.#a(c,e);break;case Ze.CANCEL:if(!u)break;const d=Vi(t.reason);Promise.try(u.onCancel||Gb,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ze.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:Ze.CANCEL_COMPLETE,streamId:e,reason:Vi(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class v_{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){oe("Abstract method `_createCanvas` called.")}}class jE extends v_{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class __{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){oe("Abstract method `_fetch` called.")}}class Vb extends __{async _fetch(t){const e=await fc(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Bh(e)}}class A_{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,o){return"none"}destroy(t=!1){}}class GE extends A_{#t;#e;#n;#i;#a;#r;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#a=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#a.createElementNS(Os,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#a.createElementNS(Os,"defs"),t.append(n),n.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=d[m]/255;const p=f.join(",");return[p,p,p]}const[e,n,r]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,c[d]=n[d]/255,u[d]=r[d]/255;return[o.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(zh(e)?Ft('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=h_(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,r,o]=this.#d(t),c=t.length===1?n:`${n}${r}${o}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const u=`g_${this.#i}_transfer_map_${this.#s++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(c,d);const f=this.#g(u);return this.#p(n,r,o,f),d}addHCMFilter(t,e){const n=`${t}-${e}`,r="base";let o=this.#c.get(r);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(r,o)),!t||!e))return o.url;const c=this.#v(t);t=vt.makeHexColor(...c);const u=this.#v(e);if(e=vt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let v=0;v<=255;v++){const A=v/255;d[v]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#i}_hcm_filter`,m=o.filter=this.#g(p);this.#p(f,f,f,m),this.#m(m);const b=(v,A)=>{const _=c[v]/255,S=u[v]/255,w=new Array(A+1);for(let x=0;x<=A;x++)w[x]=_+x/A*(S-_);return w.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),m),o.url=this.#h(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#d([t]),r=`alpha_${n}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const o=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(r,c);const u=this.#g(o);return this.#y(n,u),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,r;if(t?([n]=this.#d([t]),r=`luminosity_${n}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(r,c);const u=this.#g(o);return this.#f(u),t&&this.#y(n,u),c}addHighlightHCMFilter(t,e,n,r,o){const c=`${e}-${n}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!e||!n))return u.url;const[d,f]=[e,n].map(this.#v.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,v]=[r,o].map(this.#v.bind(this));m<p&&([p,m,b,v]=[m,p,v,b]),this.#l.style.color="";const A=(w,x,C)=>{const R=new Array(256),O=(m-p)/C,B=w/255,N=(x-w)/(255*C);let V=0;for(let j=0;j<=C;j++){const Z=Math.round(p+j*O),at=B+j*N;for(let F=V;F<=Z;F++)R[F]=at;V=Z+1}for(let j=V;j<256;j++)R[j]=R[V-1];return R.join(",")},_=`g_${this.#i}_hcm_${t}_filter`,S=u.filter=this.#g(_);return this.#m(S),this.#p(A(b[0],v[0],5),A(b[1],v[1],5),A(b[2],v[2],5),S),u.url=this.#h(_),u.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(t){const e=this.#a.createElementNS(Os,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#a.createElementNS(Os,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(Os,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const r=this.#a.createElementNS(Os,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)}#p(t,e,n,r){const o=this.#a.createElementNS(Os,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",n)}#y(t,e){const n=this.#a.createElementNS(Os,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#v(t){return this.#l.style.color=t,gc(getComputedStyle(this.#l).getPropertyValue("color"))}}class w_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){oe("Abstract method `_fetch` called.")}}class Xb extends w_{async _fetch(t){const e=await fc(t,"arraybuffer");return new Uint8Array(e)}}class S_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){oe("Abstract method `_fetch` called.")}}class Yb extends S_{async _fetch(t){const e=await fc(t,"arraybuffer");return new Uint8Array(e)}}Di&&Ft("Please use the `legacy` build in Node.js environments.");async function fm(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class VE extends A_{}class XE extends v_{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class YE extends __{async _fetch(t){return fm(t)}}class qE extends w_{async _fetch(t){return fm(t)}}class KE extends S_{async _fetch(t){return fm(t)}}const Qr="__forcedDependency",{floor:qb,ceil:Kb}=Math;function Uu(s,t,e,n,r,o){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],r),s[t*4+3]=Math.max(s[t*4+3],o)}const sg=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class WE{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===sg}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Hu=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};class ZE{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Qr]:[]};#n=new Map;#i=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,e,n=!1){this.#f=t.width,this.#m=t.height,this.#y(e),n&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const n=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),e&&e.length>0?(this.#u.set(e),this.#u.fill(sg,e.length)):this.#u.fill(sg)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Qr]:{__proto__:this.#e[Qr]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const n=this.#i.pop();return n!==void 0&&(Hu(this.#p,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const e=this.#i.pop();return e!==void 0&&(Hu(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(Hu(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(vt.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#n.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Qr,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Qr,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,r,o,c){const u=vt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];vt.axialAlignedBoundingBox([n,o,r,c],u,d);const f=vt.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,n,r,o,c){const u=this.#s;if(u[0]===1/0)return this;const d=vt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(u[0]===-1/0)return vt.axialAlignedBoundingBox([n,o,r,c],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return vt.axialAlignedBoundingBox([n,o,r,c],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,r=1,o=0,c=0,u){const d=n.bbox;let f,p;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(n),f!==!1&&(p=[0,0,0,0],vt.axialAlignedBoundingBox(d,n.fontMatrix,p),(r!==1||o!==0||c!==0)&&vt.scaleMinMax([r,0,0,-r,o,c],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const m=u();return d&&p&&f===void 0&&(f=p[0]<=o-m.actualBoundingBoxLeft&&p[2]>=o+m.actualBoundingBoxRight&&p[1]<=c-m.actualBoundingBoxAscent&&p[3]>=c+m.actualBoundingBoxDescent,this.#h.set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,c-m.actualBoundingBoxAscent,c+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,r=this.#t,o=this.#e;for(const c of e)c in this.#t?n.add(r[c]):c in o&&o[c].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#l.add(this.#n.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Qr]),this.#p){const n=Hu(this.#p,t),{dependencies:r}=n;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=qb(this.#o[0]*256/this.#f),r=qb(this.#o[1]*256/this.#m),o=Kb(this.#o[2]*256/this.#f),c=Kb(this.#o[3]*256/this.#m);Uu(this.#g,t,n,r,o,c);for(const u of this.#l)u!==t&&Uu(this.#g,u,n,r,o,c);for(const u of this.#i)u!==t&&Uu(this.#g,u,n,r,o,c);for(const u of this.#a)u!==t&&Uu(this.#g,u,n,r,o,c);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new WE(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class rh{#t;#e;#n;#i=0;#a=0;constructor(t,e,n){if(t instanceof rh&&t.#n===!!n)return t;this.#t=t,this.#e=e,this.#n=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,r,o,c){return this.#n||this.#t.recordClipBox(this.#e,e,n,r,o,c),this}recordBBox(t,e,n,r,o,c){return this.#n||this.#t.recordBBox(this.#e,e,n,r,o,c),this}recordCharacterBBox(t,e,n,r,o,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,e,n,r,o,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Rn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ti={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ag(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),s.clip(r)}class pm{isModifyingCurrentTransform(){return!1}getPattern(){oe("Abstract method `getPattern` called.")}}class $E extends pm{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,r=this._p0,o=this._p1;if(e&&(r=r.slice(),o=o.slice(),vt.applyTransform(r,e),vt.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(e){const d=new Float32Array(2);vt.singularValueDecompose2dScale(e,d),c*=d[0],u*=d[0]}n=t.createRadialGradient(r[0],r[1],c,o[0],o[1],u)}for(const c of this._colorStops)n.addColorStop(c[0],c[1]);return n}getPattern(t,e,n,r){let o;if(r===Ti.STROKE||r===Ti.FILL){if(this.isOriginBased()){let b=vt.transform(n,e.baseTransform);this.matrix&&(b=vt.transform(b,this.matrix));const v=.001,A=Math.hypot(b[0],b[1]),_=Math.hypot(b[2],b[3]),S=(b[0]*b[2]+b[1]*b[3])/(A*_);if(Math.abs(S)<v)if(this.isRadial()){if(Math.abs(A-_)<v)return this._createGradient(t,b)}else return this._createGradient(t,b)}const c=e.current.getClippedPathBoundingBox(r,Oe(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),n=vt.transform(n,[1,0,0,1,c[0],c[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),ag(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(n);o.setTransform(m)}else ag(t,this._bbox),o=this._createGradient(t);return o}}function xp(s,t,e,n,r,o,c,u){const d=t.coords,f=t.colors,p=s.data,m=s.width*4;let b;d[e+1]>d[n+1]&&(b=e,e=n,n=b,b=o,o=c,c=b),d[n+1]>d[r+1]&&(b=n,n=r,r=b,b=c,c=u,u=b),d[e+1]>d[n+1]&&(b=e,e=n,n=b,b=o,o=c,c=b);const v=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,_=(d[n]+t.offsetX)*t.scaleX,S=(d[n+1]+t.offsetY)*t.scaleY,w=(d[r]+t.offsetX)*t.scaleX,x=(d[r+1]+t.offsetY)*t.scaleY;if(A>=x)return;const C=f[o],R=f[o+1],O=f[o+2],B=f[c],N=f[c+1],V=f[c+2],j=f[u],Z=f[u+1],at=f[u+2],F=Math.round(A),$=Math.round(x);let k,tt,U,H,ct,st,mt,M;for(let L=F;L<=$;L++){if(L<S){const At=L<A?0:(A-L)/(A-S);k=v-(v-_)*At,tt=C-(C-B)*At,U=R-(R-N)*At,H=O-(O-V)*At}else{let At;L>x?At=1:S===x?At=0:At=(S-L)/(S-x),k=_-(_-w)*At,tt=B-(B-j)*At,U=N-(N-Z)*At,H=V-(V-at)*At}let J;L<A?J=0:L>x?J=1:J=(A-L)/(A-x),ct=v-(v-w)*J,st=C-(C-j)*J,mt=R-(R-Z)*J,M=O-(O-at)*J;const it=Math.round(Math.min(k,ct)),rt=Math.round(Math.max(k,ct));let _t=m*L+it*4;for(let At=it;At<=rt;At++)J=(k-At)/(k-ct),J<0?J=0:J>1&&(J=1),p[_t++]=tt-(tt-st)*J|0,p[_t++]=U-(U-mt)*J|0,p[_t++]=H-(H-M)*J|0,p[_t++]=255}}function QE(s,t,e){const n=t.coords,r=t.colors;let o,c;switch(t.type){case $p.LATTICE:const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<d;o++){let p=o*u;for(let m=0;m<f;m++,p++)xp(s,e,n[p],n[p+1],n[p+u],r[p],r[p+1],r[p+u]),xp(s,e,n[p+u+1],n[p+1],n[p+u],r[p+u+1],r[p+1],r[p+u])}break;case $p.TRIANGLES:for(o=0,c=n.length;o<c;o+=3)xp(s,e,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class JE extends pm{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),v=f/m,A=p/b,_={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/v,scaleY:1/A},S=m+4,w=b+4,x=n.getCanvas("mesh",S,w),C=x.context,R=C.createImageData(m,b);if(e){const B=R.data;for(let N=0,V=B.length;N<V;N+=4)B[N]=e[0],B[N+1]=e[1],B[N+2]=e[2],B[N+3]=255}for(const B of this._figures)QE(R,B,_);return C.putImageData(R,2,2),{canvas:x.canvas,offsetX:u-2*v,offsetY:d-2*A,scaleX:v,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){ag(t,this._bbox);const o=new Float32Array(2);if(r===Ti.SHADING)vt.singularValueDecompose2dScale(Oe(t),o);else if(this.matrix){vt.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;vt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=d}else vt.singularValueDecompose2dScale(e.baseTransform,o);const c=this._createMeshCanvas(o,r===Ti.SHADING?null:this._background,e.cachedCanvases);return r!==Ti.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class tT extends pm{getPattern(){return"hotpink"}}function eT(s){switch(s[0]){case"RadialAxial":return new $E(s);case"Mesh":return new JE(s);case"Dummy":return new tT}throw new Error(`Unknown IR type: ${s[0]}`)}const Wb={COLORED:1,UNCOLORED:2};class gm{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t,e){const{bbox:n,operatorList:r,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Nh("TilingType: "+c);const m=n[0],b=n[1],v=n[2],A=n[3],_=v-m,S=A-b,w=new Float32Array(2);vt.singularValueDecompose2dScale(this.matrix,w);const[x,C]=w;vt.singularValueDecompose2dScale(this.baseTransform,w);const R=x*w[0],O=C*w[1];let B=_,N=S,V=!1,j=!1;const Z=Math.ceil(f*R),at=Math.ceil(p*O),F=Math.ceil(_*R),$=Math.ceil(S*O);Z>=F?B=f:V=!0,at>=$?N=p:j=!0;const k=this.getSizeAndScale(B,this.ctx.canvas.width,R),tt=this.getSizeAndScale(N,this.ctx.canvas.height,O),U=t.cachedCanvases.getCanvas("pattern",k.size,tt.size),H=U.context,ct=d.createCanvasGraphics(H,e);if(ct.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(ct,o,u),H.translate(-k.scale*m,-tt.scale*b),ct.transform(0,k.scale,0,0,tt.scale,0,0),H.save(),ct.dependencyTracker?.save(),this.clipBbox(ct,m,b,v,A),ct.baseTransform=Oe(ct.ctx),ct.executeOperatorList(r),ct.endDrawing(),ct.dependencyTracker?.restore(),H.restore(),V||j){const st=U.canvas;V&&(B=f),j&&(N=p);const mt=this.getSizeAndScale(B,this.ctx.canvas.width,R),M=this.getSizeAndScale(N,this.ctx.canvas.height,O),L=mt.size,J=M.size,it=t.cachedCanvases.getCanvas("pattern-workaround",L,J),rt=it.context,_t=V?Math.floor(_/f):0,At=j?Math.floor(S/p):0;for(let Dt=0;Dt<=_t;Dt++)for(let xt=0;xt<=At;xt++)rt.drawImage(st,L*Dt,J*xt,L,J,0,0,L,J);return{canvas:it.canvas,scaleX:mt.scale,scaleY:M.scale,offsetX:m,offsetY:b}}return{canvas:U.canvas,scaleX:k.scale,scaleY:tt.scale,offsetX:m,offsetY:b}}getSizeAndScale(t,e,n){const r=Math.max(gm.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,r,o){const c=r-e,u=o-n;t.ctx.rect(e,n,c,u),vt.axialAlignedBoundingBox([e,n,r,o],Oe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,o=t.current;switch(e){case Wb.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=c,r.strokeStyle=o.strokeColor=u;break;case Wb.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new fE(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r,o){let c=n;r!==Ti.SHADING&&(c=vt.transform(c,e.baseTransform),this.matrix&&(c=vt.transform(c,this.matrix)));const u=this.createPatternCanvas(e,o);let d=new DOMMatrix(c);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function iT({src:s,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=ai.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],p=n>>3,m=n&7,b=s.length;e=new Uint32Array(e.buffer);let v=0;for(let A=0;A<r;A++){for(const S=t+p;t<S;t++){const w=t<b?s[t]:255;e[v++]=w&128?f:d,e[v++]=w&64?f:d,e[v++]=w&32?f:d,e[v++]=w&16?f:d,e[v++]=w&8?f:d,e[v++]=w&4?f:d,e[v++]=w&2?f:d,e[v++]=w&1?f:d}if(m===0)continue;const _=t<b?s[t++]:255;for(let S=0;S<m;S++)e[v++]=_&1<<7-S?f:d}return{srcPos:t,destPos:v}}const Zb=16,$b=100,nT=15,Qb=10,Xi=16,Cp=new DOMMatrix,rn=new Float32Array(2),so=new Float32Array([1/0,1/0,-1/0,-1/0]);function sT(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,r,o,c,u){t.transform(e,n,r,o,c,u),this.__originalTransform(e,n,r,o,c,u)},s.setTransform=function(e,n,r,o,c,u){t.setTransform(e,n,r,o,c,u),this.__originalSetTransform(e,n,r,o,c,u)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,r,o,c,u){t.bezierCurveTo(e,n,r,o,c,u),this.__originalBezierCurveTo(e,n,r,o,c,u)},s.rect=function(e,n,r,o){t.rect(e,n,r,o),this.__originalRect(e,n,r,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class aT{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ju(s,t,e,n,r,o,c,u,d,f){const[p,m,b,v,A,_]=Oe(s);if(m===0&&b===0){const x=c*p+A,C=Math.round(x),R=u*v+_,O=Math.round(R),B=(c+d)*p+A,N=Math.abs(Math.round(B)-C)||1,V=(u+f)*v+_,j=Math.abs(Math.round(V)-O)||1;return s.setTransform(Math.sign(p),0,0,Math.sign(v),C,O),s.drawImage(t,e,n,r,o,0,0,N,j),s.setTransform(p,m,b,v,A,_),[N,j]}if(p===0&&v===0){const x=u*b+A,C=Math.round(x),R=c*m+_,O=Math.round(R),B=(u+f)*b+A,N=Math.abs(Math.round(B)-C)||1,V=(c+d)*m+_,j=Math.abs(Math.round(V)-O)||1;return s.setTransform(0,Math.sign(m),Math.sign(b),0,C,O),s.drawImage(t,e,n,r,o,0,0,j,N),s.setTransform(p,m,b,v,A,_),[j,N]}s.drawImage(t,e,n,r,o,c,u,d,f);const S=Math.hypot(p,m),w=Math.hypot(b,v);return[S*d,w*f]}class Jb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Zp;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ii.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=so.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ti.FILL,e=null){const n=this.minMax.slice();if(t===Ti.STROKE){e||oe("Stroke bounding box must include transform."),vt.singularValueDecompose2dScale(e,rn);const r=rn[0]*this.lineWidth/2,o=rn[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=vt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(so,0)}getClippedPathBoundingBox(t=Ti.FILL,e=null){return vt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function tv(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%Xi,o=(e-r)/Xi,c=r===0?o:o+1,u=s.createImageData(n,Xi);let d=0,f;const p=t.data,m=u.data;let b,v,A,_;if(t.kind===Wu.GRAYSCALE_1BPP){const S=p.byteLength,w=new Uint32Array(m.buffer,0,m.byteLength>>2),x=w.length,C=n+7>>3,R=4294967295,O=ai.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(A=b<o?Xi:r,f=0,v=0;v<A;v++){const B=S-d;let N=0;const V=B>C?n:B*8-7,j=V&-8;let Z=0,at=0;for(;N<j;N+=8)at=p[d++],w[f++]=at&128?R:O,w[f++]=at&64?R:O,w[f++]=at&32?R:O,w[f++]=at&16?R:O,w[f++]=at&8?R:O,w[f++]=at&4?R:O,w[f++]=at&2?R:O,w[f++]=at&1?R:O;for(;N<V;N++)Z===0&&(at=p[d++],Z=128),w[f++]=at&Z?R:O,Z>>=1}for(;f<x;)w[f++]=0;s.putImageData(u,0,b*Xi)}}else if(t.kind===Wu.RGBA_32BPP){for(v=0,_=n*Xi*4,b=0;b<o;b++)m.set(p.subarray(d,d+_)),d+=_,s.putImageData(u,0,v),v+=Xi;b<c&&(_=n*r*4,m.set(p.subarray(d,d+_)),s.putImageData(u,0,v))}else if(t.kind===Wu.RGB_24BPP)for(A=Xi,_=n*A,b=0;b<c;b++){for(b>=o&&(A=r,_=n*A),f=0,v=_;v--;)m[f++]=p[d++],m[f++]=p[d++],m[f++]=p[d++],m[f++]=255;s.putImageData(u,0,b*Xi)}else throw new Error(`bad image kind: ${t.kind}`)}function ev(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%Xi,o=(e-r)/Xi,c=r===0?o:o+1,u=s.createImageData(n,Xi);let d=0;const f=t.data,p=u.data;for(let m=0;m<c;m++){const b=m<o?Xi:r;({srcPos:d}=iT({src:f,srcPos:d,dest:p,width:n,height:b,nonBlackColor:0})),s.putImageData(u,0,m*Xi)}}function zl(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function Gu(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function iv(s,t){if(t)return!0;vt.singularValueDecompose2dScale(s,rn);const e=Math.fround(os.pixelRatio*xo.PDF_TO_CSS_UNITS);return rn[0]<=e&&rn[1]<=e}const rT=["butt","round","square"],oT=["miter","round","bevel"],lT={},nv={};class uo{constructor(t,e,n,r,o,{optionalContentConfig:c,markedContentStack:u=null},d,f,p){this.ctx=t,this.current=new Jb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new aT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Oe(this.compositeCtx))}this.ctx.save(),Gu(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Oe(this.ctx)}executeOperatorList(t,e,n,r,o){const c=t.argsArray,u=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const p=f-d>Qb&&typeof n=="function",m=p?Date.now()+nT:0;let b=0;const v=this.commonObjs,A=this.objs;let _,S;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,n),d;if(!o||o(d))if(_=u[d],S=c[d]??null,_!==ec.dependency)S===null?this[_](d):this[_](d,...S);else for(const w of S){this.dependencyTracker?.recordNamedData(w,d);const x=w.startsWith("g_")?v:A;if(!x.has(w))return x.get(w,n),d}if(d++,d===f)return d;if(p&&++b>Qb){if(Date.now()>m)return n(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=r,f="prescale1",p,m;for(;o>2&&u>1||c>2&&d>1;){let b=u,v=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),c>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/v),p=this.cachedCanvases.getCanvas(f,b,v),m=p.context,m.clearRect(0,0,b,v),m.drawImage(t,0,0,u,d,0,0,b,v),t=p.canvas,u=b,d=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){const n=this.ctx,{width:r,height:o}=e,c=this.current.fillColor,u=this.current.patternFill,d=Oe(n);let f,p,m,b;if((e.bitmap||e.data)&&e.count>1){const Z=e.bitmap||e.data.buffer;p=JSON.stringify(u?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(Z),f||(f=new Map,this._cachedBitmapsMap.set(Z,f));const at=f.get(p);if(at&&!u){const F=Math.round(Math.min(d[0],d[2])+d[4]),$=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Rn.transformAndFill),{canvas:at,offsetX:F,offsetY:$}}m=at}m||(b=this.cachedCanvases.getCanvas("maskCanvas",r,o),ev(b.context,e));let v=vt.transform(d,[1/r,0,0,-1/o,0,0]);v=vt.transform(v,[1,0,0,1,0,-o]);const A=so.slice();vt.axialAlignedBoundingBox([0,0,r,o],v,A);const[_,S,w,x]=A,C=Math.round(w-_)||1,R=Math.round(x-S)||1,O=this.cachedCanvases.getCanvas("fillCanvas",C,R),B=O.context,N=_,V=S;B.translate(-N,-V),B.transform(...v),m||(m=this._scaleImage(b.canvas,es(B)),m=m.img,f&&u&&f.set(p,m)),B.imageSmoothingEnabled=iv(Oe(B),e.interpolate),ju(B,m,0,0,m.width,m.height,0,0,r,o),B.globalCompositeOperation="source-in";const j=vt.transform(es(B),[1,0,0,1,-N,-V]);return B.fillStyle=u?c.getPattern(n,this,j,Ti.FILL,t):c,B.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,O.canvas)),this.dependencyTracker?.recordDependencies(t,Rn.transformAndFill),{canvas:O.canvas,offsetX:Math.round(N),offsetY:Math.round(V)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=rT[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=oT[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,r]of e)switch(n){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),zl(this.suspendedCtx,c),sT(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const o=r[0],c=r[1],u=r[2]-o,d=r[3]-c;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,o,c,u,d,f,p,m){let b=t.canvas,v=d-p,A=f-m;if(c)if(v<0||A<0||v+n>b.width||A+r>b.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,r),w=S.context;w.drawImage(b,-v,-A),w.globalCompositeOperation="destination-atop",w.fillStyle=c,w.fillRect(0,0,n,r),w.globalCompositeOperation="source-over",b=S.canvas,v=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(v,A,n,r),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(v,A,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const _=new Path2D;_.rect(d,f,n,r),e.clip(_),e.globalCompositeOperation="destination-in",e.drawImage(b,v,A,n,r,d,f,n,r),e.restore()}save(t){this.inSMaskMode&&zl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&zl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,r,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,r){let[o]=n;if(!r){o||=n[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const c=e===ec.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-c,r[2]+c,r[1]-c,r[3]+c).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=g_(o)),vt.axialAlignedBoundingBox(r,Oe(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,es(r),Ti.STROKE,t),c){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(c)),e=u}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Rn.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ti.STROKE,Oe(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const r=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,es(r),Ti.FILL,t),f){const p=new Path2D;p.addPath(e,r.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,Rn.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Rn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=lT}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=nv}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,o=n.getTransform().invertSelf();for(const{transform:c,x:u,y:d,fontSize:f,path:p}of e)p&&r.addPath(p,new DOMMatrix(c).preMultiplySelf(o).translate(u,d).scale(f,-f));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||Zp,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Ft("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const c=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const f=r.italic?"italic":"normal";let p=n;n<Zb?p=Zb:n>$b&&(p=$b),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${d} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r}paintChar(t,e,n,r,o,c){const u=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,b=p&ii.FILL_STROKE_MASK,v=!!(p&ii.ADD_TO_PATH_FLAG),A=d.patternFill&&!f.missingFile,_=d.patternStroke&&!f.missingFile;let S;if((f.disableFontFace||v||A||_)&&!f.missingFile&&(S=f.getPathGenerator(this.commonObjs,e)),S&&(f.disableFontFace||A||_)){u.save(),u.translate(n,r),u.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,u,f);let w;if(b===ii.FILL||b===ii.FILL_STROKE)if(o){w=u.getTransform(),u.setTransform(...o);const x=this.#n(S,w,o);u.fill(x)}else u.fill(S);if(b===ii.STROKE||b===ii.FILL_STROKE)if(c){w||=u.getTransform(),u.setTransform(...c);const{a:x,b:C,c:R,d:O}=w,B=vt.inverseTransform(c),N=vt.transform([x,C,R,O,0,0],B);vt.singularValueDecompose2dScale(N,rn),u.lineWidth*=Math.max(rn[0],rn[1])/m,u.stroke(this.#n(S,w,c))}else u.lineWidth/=m,u.stroke(S);u.restore()}else(b===ii.FILL||b===ii.FILL_STROKE)&&(u.fillText(e,n,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,r,()=>u.measureText(e))),(b===ii.STROKE||b===ii.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,r,()=>u.measureText(e)).recordDependencies(t,Rn.stroke),u.strokeText(e,n,r));v&&((this.pendingTextPaths||=[]).push({transform:Oe(u),x:n,y:r,fontSize:m,path:S}),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return Pt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Rn.showText).resetBBox(t),this.current.textRenderingMode&ii.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=n.fontSizeScale,d=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,m=n.textHScale*p,b=e.length,v=r.vertical,A=v?1:-1,_=r.defaultVMetrics,S=o*n.fontMatrix[0],w=n.textRenderingMode===ii.FILL&&!r.disableFontFace&&!n.patternFill;c.save(),n.textMatrix&&c.transform(...n.textMatrix),c.translate(n.x,n.y+n.textRise),p>0?c.scale(m,-1):c.scale(m,1);let x,C;const R=n.textRenderingMode&ii.FILL_STROKE_MASK,O=R===ii.FILL||R===ii.FILL_STROKE,B=R===ii.STROKE||R===ii.FILL_STROKE;if(O&&n.patternFill){c.save();const at=n.fillColor.getPattern(c,this,es(c),Ti.FILL,t);x=Oe(c),c.restore(),c.fillStyle=at}if(B&&n.patternStroke){c.save();const at=n.strokeColor.getPattern(c,this,es(c),Ti.STROKE,t);C=Oe(c),c.restore(),c.strokeStyle=at}let N=n.lineWidth;const V=n.textMatrixScale;if(V===0||N===0?B&&(N=this.getSinglePixelWidth()):N/=V,u!==1&&(c.scale(u,u),N/=u),c.lineWidth=N,r.isInvalidPDFjsFont){const at=[];let F=0;for(const k of e)at.push(k.unicode),F+=k.width;const $=at.join("");if(c.fillText($,0,0),this.dependencyTracker!==null){const k=c.measureText($);this.dependencyTracker.recordBBox(t,this.ctx,-k.actualBoundingBoxLeft,k.actualBoundingBoxRight,-k.actualBoundingBoxAscent,k.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=F*S*m,c.restore(),this.compose();return}let j=0,Z;for(Z=0;Z<b;++Z){const at=e[Z];if(typeof at=="number"){j+=A*at*o/1e3;continue}let F=!1;const $=(at.isSpace?f:0)+d,k=at.fontChar,tt=at.accent;let U,H,ct=at.width;if(v){const M=at.vmetric||_,L=-(at.vmetric?M[1]:ct*.5)*S,J=M[2]*S;ct=M?-M[0]:ct,U=L/u,H=(j+J)/u}else U=j/u,H=0;let st;if(r.remeasure&&ct>0){st=c.measureText(k);const M=st.width*1e3/o*u;if(ct<M&&this.isFontSubpixelAAEnabled){const L=ct/M;F=!0,c.save(),c.scale(L,1),U/=L}else ct!==M&&(U+=(ct-M)/2e3*o/u)}if(this.contentVisible&&(at.isInFont||r.missingFile)){if(w&&!tt)c.fillText(k,U,H),this.dependencyTracker?.recordCharacterBBox(t,c,st?{bbox:null}:r,o/u,U,H,()=>st??c.measureText(k));else if(this.paintChar(t,k,U,H,x,C),tt){const M=U+o*tt.offset.x/u,L=H-o*tt.offset.y/u;this.paintChar(t,tt.fontChar,M,L,x,C)}}const mt=v?ct*S-$*p:ct*S+$*p;j+=mt,F&&c.restore()}v?n.y-=j:n.x+=j*m,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,r=this.current,o=r.font,c=r.fontSize,u=r.fontDirection,d=o.vertical?1:-1,f=r.charSpacing,p=r.wordSpacing,m=r.textHScale*u,b=r.fontMatrix||Zp,v=e.length,A=r.textRenderingMode===ii.INVISIBLE;let _,S,w,x;if(A||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(m,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new rh(C,t):null,_=0;_<v;++_){if(S=e[_],typeof S=="number"){x=d*S*c/1e3,this.ctx.translate(x,0),r.x+=x*m;continue}const R=(S.isSpace?p:0)+f,O=o.charProcOperatorList[S.operatorListId];O?this.contentVisible&&(this.save(),n.scale(c,c),n.transform(...b),this.executeOperatorList(O),this.restore()):Ft(`Type3 character "${S.operatorListId}" is not available.`);const B=[S.width,0];vt.applyTransform(B,b),w=B[0]*c+R,n.translate(w,0),r.x+=w*m}n.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,r,o,c,u){const d=new Path2D;d.rect(r,o,c-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,r,c,o,u).recordClipBox(t,this.ctx,r,c,o,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||Oe(this.ctx),o={createCanvasGraphics:(c,u)=>new uo(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new rh(this.dependencyTracker,u,!0):null)};n=new gm(e,this.ctx,o,r)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=eT(this.getObject(t,e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const r=this._getPattern(t,e);n.fillStyle=r.getPattern(n,this,es(n),Ti.SHADING,t);const o=es(n);if(o){const{width:c,height:u}=n.canvas,d=so.slice();vt.axialAlignedBoundingBox([0,0,c,u],o,d);const[f,p,m,b]=d;this.ctx.fillRect(f,p,m-f,b-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Rn.transform).recordDependencies(t,Rn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){oe("Should not call beginInlineImage")}beginImageData(){oe("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Oe(this.ctx),n)){vt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,o,c,u]=n,d=new Path2D;d.rect(r,o,c-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,r,c,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Nh("TODO: Support non-isolated groups."),e.knockout&&Ft("Knockout groups not supported.");const r=Oe(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=so.slice();vt.axialAlignedBoundingBox(e.bbox,Oe(n),o);const c=[0,0,n.canvas.width,n.canvas.height];o=vt.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(m,f,p),v=b.context;v.translate(-u,-d),v.transform(...r);let A=new Path2D;const[_,S,w,x]=e.bbox;if(A.rect(_,S,w-_,x-S),e.matrix){const C=new Path2D;C.addPath(A,new DOMMatrix(e.matrix)),A=C}v.clip(A),e.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,d),n.save()),zl(n,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Oe(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const c=so.slice();vt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,c),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,n,r,o,c){if(this.#t(),Gu(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],d=n[3]-n[1];if(c&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=d,vt.singularValueDecompose2dScale(Oe(this.ctx),rn);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),m=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(rn[0],0,0,-rn[1],0,d*rn[1]),Gu(this.ctx)}else{Gu(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,d),this.ctx.clip(f)}}this.current=new Jb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const r=this.ctx,o=this._createMaskCanvas(t,e),c=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,r=0,o=0,c,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=Oe(d);d.transform(n,r,o,c,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,b=u.length;m<b;m+=2){const v=vt.transform(f,[n,r,o,c,u[m],u[m+1]]);d.drawImage(p.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+p.canvas.width,v[5],v[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Rn.transformAndFill);for(const c of e){const{data:u,width:d,height:f,transform:p}=c,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=m.context;b.save();const v=this.getObject(t,u,c);ev(b,v),b.globalCompositeOperation="source-in",b.fillStyle=o?r.getPattern(b,this,es(n),Ti.FILL,t):r,b.fillRect(0,0,d,f),b.restore(),n.save(),n.transform(...p),n.scale(1,-1),ju(n,m.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,d,0,f),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Ft("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,r,o){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){Ft("Dependent image isn't ready yet");return}const u=c.width,d=c.height,f=[];for(let p=0,m=o.length;p<m;p+=2)f.push({transform:[n,0,0,r,o[p],o[p+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,r=e.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/n,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,r).context;tv(p,e),u=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(u,es(o));o.imageSmoothingEnabled=iv(Oe(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,n,-r,0).recordDependencies(t,Rn.imageXObject).recordOperation(t),ju(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,n,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const c=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;tv(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of n)r.save(),r.transform(...c.transform),r.scale(1,-1),ju(r,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Rn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===nv?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Oe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:o}=this.ctx.getTransform();let c,u;if(n===0&&r===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const p=d*t;c=u=p<1?1/p:1}else if(t===0)c=1/d,u=1/f;else{const p=d*t,m=f*t;c=p<1?1/p:1,u=m<1?1/m:1}}else{const d=Math.abs(e*o-n*r),f=Math.hypot(e,n),p=Math.hypot(r,o);if(t===0)c=p/d,u=f/d;else{const m=t*d;c=p>m?p/m:1,u=f>m?f/m:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[o,c]=this.getScaleForStroking();if(o===c){n.lineWidth=(r||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,c),Cp.a=1/o,Cp.d=1/c;const d=new Path2D;if(d.addPath(t,Cp),u.length>0){const f=Math.max(o,c);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=r||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const s in ec)uo.prototype[s]!==void 0&&(uo.prototype[ec[s]]=uo.prototype[s]);class ho{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class cT{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const to=Symbol("INTERNAL");class uT{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:n,usage:r,rbGroups:o}){this.#t=!!(t&sn.DISPLAY),this.#e=!!(t&sn.PRINT),this.name=e,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==to&&oe("Internal method `_setVisible` called."),this.#n=n,this.#i=e}}class hT{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=sn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const n of t.groups)this.#e.set(n.id,new uT(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(to,!1);for(const n of t.on)this.#e.get(n)._setVisible(to,!0);for(const n of t.off)this.#e.get(n)._setVisible(to,!1);this.#n=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#a(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return Ft(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Nh("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Ft(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Ft(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Ft(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Ft(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Ft(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Ft(`Unknown optional content policy ${t.policy}.`),!0}return Ft(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const r=this.#e.get(t);if(!r){Ft(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(to,!1,!0);r._setVisible(to,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=this.#e.get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new y_;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Ph{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,e,n){this._source=t,this.#t=e,this.#e=n}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return ae(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new this.#e(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){this._fullReader?.cancel(t);for(const e of new Set(this._rangeReaders))e.cancel(t)}}class Ih{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){oe("Abstract method `read` called")}cancel(t){oe("Abstract method `cancel` called")}}class Uh{_stream=null;constructor(t,e,n){this._stream=t}async read(){oe("Abstract method `read` called")}cancel(t){oe("Abstract method `cancel` called")}}function sv(s){return s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}class dT extends Ph{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,fT,pT);const{pdfDataRangeTransport:e}=t,{initialData:n,progressiveDone:r}=e;if(n?.length>0){const o=sv(n);this._queuedChunks.push(o)}this._progressiveDone=r,e.addRangeListener((o,c)=>{this.#t(o,c)}),e.addProgressListener((o,c)=>{c!==void 0&&this._fullReader?.onProgress?.({loaded:o,total:c})}),e.addProgressiveReadListener(o=>{this.#t(void 0,o)}),e.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),e.transportReady()}#t(t,e){const n=sv(e);if(t===void 0)this._fullReader?this._fullReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.keys().find(o=>o._begin===t);ae(r,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),r._enqueue(n)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onDone=()=>this._rangeReaders.delete(n),this._source.pdfDataRangeTransport.requestDataRange(t,e)),n}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class fT extends Ih{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:e,disableRange:n,disableStream:r}=t._source,{length:o,contentDispositionFilename:c}=e;this._queuedChunks=t._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=t._progressiveDone,this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!n,cm(c)&&(this._filename=c),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class pT extends Uh{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,e,n){super(t,e,n),this._begin=e}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function gT(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let p=u(e);return p=unescape(p),p=d(p),p=f(p),o(p)}if(e=c(s),e){const p=f(e);return o(p)}if(e=n("filename","i").exec(s),e){e=e[1];let p=u(e);return p=f(p),o(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const b=new TextDecoder(p,{fatal:!0}),v=Bh(m);m=b.decode(v),t=!1}catch{}}return m}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function c(p){const m=[];let b;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(p))!==null;){let[,_,S,w]=b;if(_=parseInt(_,10),_ in m){if(_===0)break;continue}m[_]=[S,w]}const A=[];for(let _=0;_<m.length&&_ in m;++_){let[S,w]=m[_];w=u(w),S&&(w=unescape(w),_===0&&(w=d(w))),A.push(w)}return A.join("")}function u(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let b=0;b<m.length;++b){const v=m[b].indexOf('"');v!==-1&&(m[b]=m[b].slice(0,v),m.length=b+1),m[b]=m[b].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function d(p){const m=p.indexOf("'");if(m===-1)return p;const b=p.slice(0,m),A=p.slice(m+1).replace(/^[^']*'/,"");return r(b,A)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,b,v,A){if(v==="q"||v==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,S){return String.fromCharCode(parseInt(S,16))}),r(b,A);try{A=atob(A)}catch{}return r(b,A)})}return""}function E_(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function Hh(s){return URL.parse(s)?.origin??null}function T_({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function x_(s){const t=s.get("Content-Disposition");if(t){let e=gT(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(cm(e))return e}return null}function jh(s,t){return new ah(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function C_(s,t){if(s!==t)throw new Error(`Expected range response-origin "${s}" to match "${t}".`)}function k_(s,t,e,n){return fetch(s,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function M_(s,t){if(s!==200&&s!==206)throw jh(s,t)}function D_(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ft(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class mT extends Ph{_responseOrigin=null;constructor(t){super(t,yT,bT),this.isHttp=/^https?:/i.test(t.url),this.headers=E_(this.isHttp,t.httpHeaders)}}class yT extends Ih{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:r,rangeChunkSize:o,url:c,withCredentials:u}=t._source;this._contentLength=r,this._isStreamingSupported=!n,this._isRangeSupported=!e;const d=new Headers(t.headers);k_(c,d,u,this._abortController).then(f=>{t._responseOrigin=Hh(f.url),M_(f.status,c),this._reader=f.body.getReader();const p=f.headers,{allowRangeRequests:m,suggestedLength:b}=T_({responseHeaders:p,isHttp:t.isHttp,rangeChunkSize:o,disableRange:e});this._isRangeSupported=m,this._contentLength=b||this._contentLength,this._filename=x_(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _a("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:D_(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class bT extends Uh{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const{url:r,withCredentials:o}=t._source,c=new Headers(t.headers);c.append("Range",`bytes=${e}-${n-1}`),k_(r,c,o,this._abortController).then(u=>{const d=Hh(u.url);C_(d,t._responseOrigin),M_(u.status,r),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:D_(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const kp=200,av=206;function vT(s){return typeof s!="string"?s:Bh(s).buffer}class _T extends Ph{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,AT,wT),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=E_(this.isHttp,t.httpHeaders)}_request(t){const e=new XMLHttpRequest,n={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(e,n),e.open("GET",this.url),e.withCredentials=this._source.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.validateStatus=r=>r===av||r===kp):n.validateStatus=r=>r===kp,e.responseType="arraybuffer",ae(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>t.onError(e.status),e.onreadystatechange=this.#n.bind(this,e),e.onprogress=this.#e.bind(this,e),e.send(null),e}#e(t,e){this.#t.get(t)?.onProgress?.(e)}#n(t,e){const n=this.#t.get(t);if(!n||(t.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){n.onError(t.status);return}const r=t.status||kp;if(!n.validateStatus(r)){n.onError(t.status);return}const o=vT(t.response);if(r===av){const c=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(c)?n.onDone(o):(Ft('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone(o):n.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onClosed=()=>this._rangeReaders.delete(n)),n}}class AT extends Ih{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:e}=t._source;this._contentLength=e,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:this.#i.bind(this)})}#t(){const t=this._stream,{disableRange:e,rangeChunkSize:n}=t._source,r=this._fullRequestXhr;t._responseOrigin=Hh(r.responseURL);const o=r.getAllResponseHeaders(),c=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[p,...m]=f.split(": ");return[p,m.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:d}=T_({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:n,disableRange:e});u&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=x_(c),this._isRangeSupported&&t._abortRequest(r),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}#n(t){this._storedError=jh(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#i(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class wT extends Uh{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,e,n){super(t,e,n),this._requestXhr=t._request({begin:e,end:n,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:null})}#t(){const t=Hh(this._requestXhr?.responseURL);try{C_(t,this._stream._responseOrigin)}catch(e){this._storedError=e,this.#n(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#n(t){this._storedError??=jh(t,this._stream.url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const ST=/^[a-z][a-z0-9\-+.]+:/i;function ET(s){if(ST.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}function O_(s){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(s):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(s)}function R_(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ft(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class TT extends Ph{constructor(t){super(t,xT,CT),this.url=ET(t.url),ae(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class xT extends Ih{_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:r,rangeChunkSize:o}=t._source;this._contentLength=r,this._isStreamingSupported=!n,this._isRangeSupported=!e;const c=t.url,u=process.getBuiltinModule("fs");u.promises.lstat(c).then(d=>{const f=u.createReadStream(c),p=O_(f);this._reader=p.getReader();const{size:m}=d;m<=2*o&&(this._isRangeSupported=!1),this._contentLength=m,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _a("Streaming is disabled.")),this._headersCapability.resolve()}).catch(d=>{d.code==="ENOENT"&&(d=jh(0,c.href)),this._headersCapability.reject(d)})}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:R_(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class CT extends Uh{_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const r=t.url,o=process.getBuiltinModule("fs");try{const c=o.createReadStream(r,{start:e,end:n-1}),u=O_(c);this._reader=u.getReader(),this._readCapability.resolve()}catch(c){this._readCapability.reject(c)}}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:R_(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const Fl=Symbol("INITIAL_DATA");class L_{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Fl}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const n=this.#t[t];if(!n||n.data===Fl)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==Fl}delete(t){const e=this.#t[t];return!e||e.data===Fl?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Fl&&(yield[t,e])}}}const kT=1e5,rv=30;class an{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#T=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=n.scale*os.pixelRatio,this.#d=n.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=n.rawDims;this.#y=[1,0,0,-1,-c,u+o],this.#o=r,this.#s=o,an.#M(),e.style.setProperty("--min-font-size",an.#S),sr(e,n),this.#t.promise.finally(()=>{an.#A.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ai.platform;return Pt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),an.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*os.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,sr(this.#l,{rotation:r})),n!==this.#h){e?.(),this.#h=n;const o={div:null,properties:null,ctx:an.#D(this.#a)};for(const c of this.#u)o.properties=this.#p.get(c),o.div=c,this.#E(o)}}cancel(){const t=new _a("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#n)return;this.#r.ctx??=an.#D(this.#a);const e=this.#u,n=this.#m;for(const r of t){if(e.length>kT){Ft("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),r.tag==="Artifact"&&(this.#e.ariaHidden=!0),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(r.str),this.#_(r)}}#_(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=vt.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=an.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),f=d*an.#F(u,c,this.#a);let p,m;o===0?(p=r[4],m=r[5]-f):(p=r[4]+f*Math.sin(o),m=r[5]-f*Math.cos(o));const b=e.style;b.left=`${(100*p/this.#o).toFixed(2)}%`,b.top=`${(100*m/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${d.toFixed(2)}px`),b.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);A!==_&&Math.max(A,_)/Math.min(A,_)>1.5&&(v=!0)}if(v&&(n.canvasWidth=c.vertical?t.height:t.width),this.#p.set(e,n),this.#r.div=e,this.#r.properties=n,this.#E(this.#r),n.hasText&&this.#e.append(e),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#e.append(A)}}#E(t){const{div:e,properties:n,ctx:r}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:d}=n;an.#k(r,d*this.#h,c);const{width:f}=r.measureText(e.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let e=this.#b.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#T.set(e,{size:0,family:""})}return e}static#k(t,e,n){const r=this.#T.get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)}static#M(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#F(t,e,n){const r=this.#v.get(t);if(r)return r;const o=this.#D(n);o.canvas.width=o.canvas.height=rv,this.#k(o,rv,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(ai.platform.isFirefox&&Ft("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const MT=100;function N_(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new mm,{docId:e}=t,n=s.url?FE(s.url):null,r=s.data?PE(s.data):null,o=s.httpHeaders||null,c=s.withCredentials===!0,u=s.password??null,d=s.range instanceof B_?s.range:null,f=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let p=s.worker instanceof nc?s.worker:null;const m=s.verbosity,b=typeof s.docBaseUrl=="string"&&!zh(s.docBaseUrl)?s.docBaseUrl:null,v=Pu(s.cMapUrl),A=s.cMapPacked!==!1,_=s.CMapReaderFactory||(Di?YE:Vb),S=Pu(s.iccUrl),w=Pu(s.standardFontDataUrl),x=s.StandardFontDataFactory||(Di?qE:Xb),C=Pu(s.wasmUrl),R=s.WasmFactory||(Di?KE:Yb),O=s.stopAtErrors!==!0,B=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,N=s.isEvalSupported!==!1,V=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Di,j=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Di&&(ai.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,at=typeof s.disableFontFace=="boolean"?s.disableFontFace:Di,F=s.fontExtraProperties===!0,$=s.enableXfa===!0,k=s.ownerDocument||globalThis.document,tt=s.disableRange===!0,U=s.disableStream===!0,H=s.disableAutoFetch===!0,ct=s.pdfBug===!0,st=s.CanvasFactory||(Di?XE:jE),mt=s.FilterFactory||(Di?VE:GE),M=s.enableHWA===!0,L=s.useWasm!==!1,J=d?d.length:s.length??NaN,it=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Di&&!at,rt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(_===Vb&&x===Xb&&R===Yb&&v&&w&&C&&jl(v,document.baseURI)&&jl(w,document.baseURI)&&jl(C,document.baseURI)),_t=null;uE(m);const At={canvasFactory:new st({ownerDocument:k,enableHWA:M}),filterFactory:new mt({docId:e,ownerDocument:k}),cMapReaderFactory:rt?null:new _({baseUrl:v,isCompressed:A}),standardFontDataFactory:rt?null:new x({baseUrl:w}),wasmFactory:rt?null:new R({baseUrl:C})};p||(p=nc.create({verbosity:m,port:ho.workerPort}),t._worker=p);const Dt={docId:e,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:H,rangeChunkSize:f,length:J,docBaseUrl:b,enableXfa:$,evaluatorOptions:{maxImageSize:B,disableFontFace:at,ignoreErrors:O,isEvalSupported:N,isOffscreenCanvasSupported:V,isImageDecoderSupported:j,canvasMaxAreaInBytes:Z,fontExtraProperties:F,useSystemFonts:it,useWasm:L,useWorkerFetch:rt,cMapUrl:v,iccUrl:S,standardFontDataUrl:w,wasmUrl:C}},xt={ownerDocument:k,pdfBug:ct,styleElement:_t,enableHWA:M,loadingParams:{disableAutoFetch:H,enableXfa:$}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const ve=p.messageHandler.sendWithPromise("GetDocRequest",Dt,r?[r.buffer]:null);let le;if(d)le=new dT({pdfDataRangeTransport:d,disableRange:tt,disableStream:U});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const oi=jl(n)?mT:Di?TT:_T;le=new oi({url:n,length:J,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:tt,disableStream:U})}return ve.then(oi=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const yi=new Gl(e,oi,p.port),T=new RT(yi,t,le,xt,At);t._transport=T,yi.send("Ready",null)})}).catch(t._capability.reject),t}class mm{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${mm.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class B_{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,e,n=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#a)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#i)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){oe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class DT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Pt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class OT{#t=!1;#e=ne.instance;constructor(t,e,n,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new Fb:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new L_,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new pc({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Pt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:o=ga.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:b=!1,recordOperations:v=!1,operationsFilter:A=null}){this._stats?.time("Overall");const _=this._transport.getRenderingIntent(r,o,m,b),{renderingIntent:S,cacheKey:w}=_;this.#t=!1,d||=this._transport.getOptionalContentConfig(S);let x=this._intentStates.get(w);x||(x=Object.create(null),this._intentStates.set(w,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const C=!!(S&sn.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(_));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(v||R),B=j=>{if(x.renderTasks.delete(N),O){const Z=N.gfx?.dependencyTracker.take();Z&&(N.stepper&&N.stepper.setOperatorBBoxes(Z,N.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=Z))}C&&(this.#t=!0),this.#n(),j?(N.capability.reject(j),this._abortOperatorList({intentState:x,reason:j instanceof Error?j:new Error(j)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new ao({callback:B,params:{canvas:e,canvasContext:t,dependencyTracker:O?new ZE(e,x.operatorList.length,R):null,viewport:n,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:A});(x.renderTasks||=new Set).add(N);const V=N.task;return Promise.all([x.displayReadyCapability.promise,d]).then(([j,Z])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(Z.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:j,optionalContentConfig:Z}),N.operatorListChanged()}).catch(B),V}getOperatorList({intent:t="display",annotationMode:e=ga.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,n,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ic.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function o(){c.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#n();return t&&e&&(this._stats&&=new Fb),e}#n(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#n()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:c}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const p=()=>{d.read().then(({value:m,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),p())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#n()}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof lm){let r=MT;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new _a(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var ma,Hn,Ls,qa,lh,Ka,Wa,Oi,Zu,z_,F_,Vl,fo,$u;const xe=class xe{constructor({name:t=null,port:e=null,verbosity:n=hE()}={}){$n(this,Oi);$n(this,ma,Promise.withResolvers());$n(this,Hn,null);$n(this,Ls,null);$n(this,qa,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(Ee(xe,Wa).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Ee(xe,Wa).set(e,this),Qn(this,Oi,z_).call(this,e)}else Qn(this,Oi,F_).call(this)}get promise(){return Ee(this,ma).promise}get port(){return Ee(this,Ls)}get messageHandler(){return Ee(this,Hn)}destroy(){this.destroyed=!0,Ee(this,qa)?.terminate(),Hi(this,qa,null),Ee(xe,Wa).delete(Ee(this,Ls)),Hi(this,Ls,null),Ee(this,Hn)?.destroy(),Hi(this,Hn,null)}static create(t){const e=Ee(this,Wa).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new xe(t)}static get workerSrc(){if(ho.workerSrc)return ho.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Pt(this,"_setupFakeWorkerGlobal",(async()=>Ee(this,fo,$u)?Ee(this,fo,$u):(await import(this.workerSrc)).WorkerMessageHandler)())}};ma=new WeakMap,Hn=new WeakMap,Ls=new WeakMap,qa=new WeakMap,lh=new WeakMap,Ka=new WeakMap,Wa=new WeakMap,Oi=new WeakSet,Zu=function(){Ee(this,ma).resolve(),Ee(this,Hn).send("configure",{verbosity:this.verbosity})},z_=function(t){Hi(this,Ls,t),Hi(this,Hn,new Gl("main","worker",t)),Ee(this,Hn).on("ready",()=>{}),Qn(this,Oi,Zu).call(this)},F_=function(){if(Ee(xe,Ka)||Ee(xe,fo,$u)){Qn(this,Oi,Vl).call(this);return}let{workerSrc:t}=xe;try{xe._isSameOrigin(window.location,t)||(t=xe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Gl("main","worker",e),r=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?Ee(this,ma).reject(new Error("Worker was destroyed")):Qn(this,Oi,Vl).call(this)},o=new AbortController;e.addEventListener("error",()=>{Ee(this,qa)||r()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}Hi(this,Hn,n),Hi(this,Ls,e),Hi(this,qa,e),Qn(this,Oi,Zu).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{Qn(this,Oi,Vl).call(this)}});const c=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};c();return}catch{Nh("The worker has been disabled.")}Qn(this,Oi,Vl).call(this)},Vl=function(){Ee(xe,Ka)||(Ft("Setting up fake worker."),Hi(xe,Ka,!0)),xe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Ee(this,ma).reject(new Error("Worker was destroyed"));return}const e=new HE;Hi(this,Ls,e);const n=`fake${_y(xe,lh)._++}`,r=new Gl(n+"_worker",n,e);t.setup(r,e),Hi(this,Hn,new Gl(n,n+"_worker",e)),Qn(this,Oi,Zu).call(this)}).catch(t=>{Ee(this,ma).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},fo=new WeakSet,$u=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},$n(xe,fo),$n(xe,lh,0),$n(xe,Ka,!1),$n(xe,Wa,new WeakMap),Di&&(Hi(xe,Ka,!0),ho.workerSrc||="./pdf.worker.mjs"),xe._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},xe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},xe.fromPort=t=>{if(SE("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return xe.create(t)};let nc=xe;class RT{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#n=null;#i=new Map;#a=new Map;#r=new Map;#s=null;#o=ne.instance;constructor(t,e,n,r,o){this.messageHandler=t,this.loadingTask=e,this.#n=n,this.commonObjs=new L_,this.fontLoader=new NE({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,e=new Map;for(let n=0,r=this.#o.pagesNumber;n<r;n++){const o=this.#o.getPrevPageNumber(n+1)-1,c=this.#i.get(o);c&&t.set(n,c);const u=this.#a.get(o);u&&e.set(n,u)}this.#i=t,this.#a=e}#l(t,e=null){const n=this.#e.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,r),r}#d({loaded:t,total:e}){this.loadingTask.onProgress?.({loaded:t,total:e,percent:Ei(Math.round(t/e*100),0,100)})}get annotationStorage(){return Pt(this,"annotationStorage",new dm)}getRenderingIntent(t,e=ga.ENABLE,n=null,r=!1,o=!1){let c=sn.DISPLAY,u=ig;switch(t){case"any":c=sn.ANY;break;case"display":break;case"print":c=sn.PRINT;break;default:Ft(`getRenderingIntent - invalid intent: ${t}`)}const d=c&sn.PRINT&&n instanceof b_?n:this.annotationStorage;switch(e){case ga.DISABLE:c+=sn.ANNOTATIONS_DISABLE;break;case ga.ENABLE:break;case ga.ENABLE_FORMS:c+=sn.ANNOTATIONS_FORMS;break;case ga.ENABLE_STORAGE:c+=sn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Ft(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(c+=sn.IS_EDITING),o&&(c+=sn.OPLIST);const{ids:f,hash:p}=d.modifiedIds,m=[c,u.hash,p];return{renderingIntent:c,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#i.values())t.push(n._destroy());this.#i.clear(),this.#a.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),an.cleanup(),this.#n?.cancelAllRequests(new _a("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{ae(this.#n,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#n.getFullReader(),this.#t.onProgress=o=>this.#d(o),r.onPull=()=>{this.#t.read().then(function({value:o,done:c}){if(c){r.close();return}ae(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this.#t.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async n=>{await this.#t.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this.#t;return r&&o&&(this.#t.onProgress=null),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(n,r)=>{ae(this.#n,"GetRangeReader - no `BasePDFStream` instance available.");const o=this.#n.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}ae(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this.#o.pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new DT(n,this))}),t.on("DocException",n=>{e._capability.reject(Vi(n))}),t.on("PasswordRequest",n=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw Vi(n);const r=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};e.onPassword(r,n.code)}catch(r){this.#s.reject(r)}return this.#s.promise}),t.on("DataLoaded",n=>{this.#d({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#i.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const m=o.error;Ft(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const c=new ge(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,b)=>globalThis.FontInspector.fontAdded(m,b):null,d=new BE(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=o;ae(f,"The imageRef must be defined.");for(const m of this.#i.values())for(const[,b]of m.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new zE(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const p=new di(o);this.commonObjs.resolve(n,p.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,c])=>{if(this.destroyed)return;const u=this.#i.get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||this.#d(n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ft("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#o.getPageId(t)-1,r=this.#a.get(e);if(r)return r;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&this.#r.set(c.refStr,n);const u=new OT(e,c,this,this._params.pdfBug);return this.#i.set(e,u),u});return this.#a.set(e,o),o}async getPageIndex(t){if(!ng(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:e})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(e=>new hT(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#e.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new cT(r[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:r[2]}));return this.#e.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#i.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),an.cleanup()}}cachedPageNumber(t){if(!ng(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=this.#r.get(e);return n>=0?this.#o.getPageNumber(n+1):null}}class LT{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&e?.size>0}}class ao{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:b=null,enableHWA:v=!1,operationsFilter:A=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=m,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new LT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ao.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ao.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new uo(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ao.#e.delete(this._canvas),t||=new lm(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ao.#e.delete(this._canvas),this.callback())))}}const P_="5.4.624",NT="384c6208b";class Ln{#t=null;#e=null;#n;#i=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Pt(this,"_keyboardManager",new mc([[["Escape","mac+Escape"],Ln.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ln.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ln.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ln.prototype._moveToPrevious],[["Home","mac+Home"],Ln.prototype._moveToBeginning],[["End","mac+End"],Ln.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#s=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Ln.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#n,t.append(n),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Bn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[n,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",Ln.#d[n]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.ariaSelected=r===this.#n,o.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Wt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastElementChild?.focus()}#m(t){Ln._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#h();this.#t.append(e)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const n of this.#i.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class sc{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,sc.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:n}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",sc.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(e,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function ov(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Pl(s){return Math.max(0,Math.min(255,255*s))}class lv{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Pl(t),[t,t,t]}static G_HTML([t]){const e=ov(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Pl)}static RGB_HTML(t){return`#${t.map(ov).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[Pl(1-Math.min(1,t+r)),Pl(1-Math.min(1,n+r)),Pl(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,o=1-e,c=1-n,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class BT{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){oe("Abstract method `_createSVG` called.")}}class oh extends BT{_createSVG(t){return document.createElementNS(Os,t)}}const zT=9,ar=new WeakSet,FT=new Date().getTimezoneOffset()*60*1e3;class Mp{static create(t){switch(t.data.annotationType){case $e.LINK:return new ym(t);case $e.TEXT:return new IT(t);case $e.WIDGET:switch(t.data.fieldType){case"Tx":return new UT(t);case"Btn":return t.data.radioButton?new I_(t):t.data.checkBox?new jT(t):new GT(t);case"Ch":return new VT(t);case"Sig":return new HT(t)}return new ur(t);case $e.POPUP:return new rg(t);case $e.FREETEXT:return new U_(t);case $e.LINE:return new YT(t);case $e.SQUARE:return new qT(t);case $e.CIRCLE:return new KT(t);case $e.POLYLINE:return new H_(t);case $e.CARET:return new ZT(t);case $e.INK:return new bm(t);case $e.POLYGON:return new WT(t);case $e.HIGHLIGHT:return new j_(t);case $e.UNDERLINE:return new $T(t);case $e.SQUIGGLY:return new QT(t);case $e.STRIKEOUT:return new JT(t);case $e.STAMP:return new G_(t);case $e.FILEATTACHMENT:return new tx(t);default:return new Ne(t)}}}class Ne{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ne._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:r}=this.data;let o=-1/0,c=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>c?(c=e[u+1],o=e[u+2]):e[u+1]===c&&(o=Math.max(o,e[u+2]));return[o,c]}if(n?.length>=1){for(const u of n)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>c?(c=u[d+1],o=u[d]):u[d+1]===c&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,c]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-c)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${tc}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${tc}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#i(e);let r=this.#n?.popup||this.popup;!r&&n?.text&&(this._createPopup(n),r=this.#n.popup),r&&(r.updateEdited(t),n?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(c-t[3]+d)/c}%`,r===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof ur)&&!(this instanceof ym)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof rg){const{rotation:_}=e;return!e.hasOwnCanvas&&_!==0&&this.setRotation(_,o),o}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const _=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(_>0||S>0){const x=`calc(${_}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;c.borderRadius=x}else if(this instanceof I_){const x=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=x}switch(e.borderStyle.style){case Jr.SOLID:c.borderStyle="solid";break;case Jr.DASHED:c.borderStyle="dashed";break;case Jr.BEVELED:Ft("Unimplemented border style: beveled");break;case Jr.INSET:Ft("Unimplemented border style: inset");break;case Jr.UNDERLINE:c.borderBottomStyle="solid";break}const w=e.borderColor||null;w?(this.#e=!0,c.borderColor=vt.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):c.borderWidth=0}const f=vt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:b,pageY:v}=r.rawDims;c.left=`${100*(f[0]-b)/p}%`,c.top=`${100*(f[1]-v)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(c.width=`${100*u/p}%`,c.height=`${100*d/m}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*c/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const o=r.detail[e],c=o[0],u=o.slice(1);r.target.style[n]=lv[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:lv[`${c}_rgb`](u)})};return Pt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||n[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,o]of Object.entries(e)){const c=n[r];if(c){const u={detail:{[r]:o},target:t};c(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,o]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,S,w,x]=t.subarray(2,6);if(r===_&&o===S&&e===w&&n===x)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:_,borderWidth:S}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const d=r-e,f=o-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const b=p.createElement("defs");m.append(b);const v=p.createElement("clipPath"),A=`clippath_${this.data.id}`;v.setAttribute("id",A),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let _=2,S=t.length;_<S;_+=8){const w=t[_],x=t[_+1],C=t[_+2],R=t[_+3],O=p.createElement("rect"),B=(C-e)/d,N=(o-x)/f,V=(w-C)/d,j=(x-R)/f;O.setAttribute("x",B),O.setAttribute("y",N),O.setAttribute("width",V),O.setAttribute("height",j),v.append(O),u?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${N}" width="${V}" height="${j}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate),this.#n=new rg({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){oe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!ar.has(f)){Ft(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:f})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==e&&ar.has(r)&&n.push({id:c,exportValue:o,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class PT extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class ym extends Ne{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(n,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=n,this.container.append(n)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#n(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const o=n.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Ft('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:r,refs:o,include:c}=e,u=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const m of r){const b=this._fieldObjects[m]||[];for(const{id:v}of b)p.add(v)}for(const m of Object.values(this._fieldObjects))for(const b of m)p.has(b.id)===c&&u.push(b)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const d=this.annotationStorage,f=[];for(const p of u){const{id:m}=p;switch(f.push(m),p.type){case"text":{const v=p.defaultValue||"";d.setValue(m,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;d.setValue(m,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";d.setValue(m,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${m}"]`);if(b){if(!ar.has(b)){Ft(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class IT extends Ne{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class ur extends Ne{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ai.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,o){n.includes("mouse")?t.addEventListener(n,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,e,n,r){for(const[o,c]of n)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":vt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||zT,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(wp*r))||1,m=f/p;c=Math.min(r,d(m/wp))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,d(f/wp))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=vt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class UT extends ur{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[r]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ar.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,b=!!p&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",A=>{const _=this.data.defaultFieldValue??"";n.value=d.userValue=_,d.formattedValue=null});let v=A=>{const{formattedValue:_}=d;_!=null&&(A.target.value=_),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{if(d.focused)return;const{target:S}=_;if(b&&(S.type=p,m&&(S.step=m)),d.userValue){const w=d.userValue;if(b)if(p==="time"){const x=new Date(w),C=[x.getHours(),x.getMinutes(),x.getSeconds()];S.value=C.map(R=>R.toString().padStart(2,"0")).join(":")}else S.value=new Date(w-FT).toISOString().split(p==="date"?"T":".",1)[0];else S.value=w}d.lastCommittedValue=S.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const S={value(w){d.userValue=w.detail.value??"",b||t.setValue(e,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:x}=w.detail;d.formattedValue=x,x!=null&&w.target!==document.activeElement&&(w.target.value=x);const C={formattedValue:x};b&&(C.value=x),t.setValue(e,C)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:x}=w.detail,{target:C}=w;if(x===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",x);let R=d.userValue;!R||R.length<=x||(R=R.slice(0,x),C.value=d.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(S,_)}),n.addEventListener("keydown",_=>{d.commitKey=1;let S=-1;if(_.key==="Escape"?S=0:_.key==="Enter"&&!this.data.multiLine?S=2:_.key==="Tab"&&(d.commitKey=3),S===-1)return;const{value:w}=_.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:S,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const A=v;v=null,n.addEventListener("blur",_=>{if(!d.focused||!_.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:S}=_;let{value:w}=S;if(b){if(w&&p==="time"){const x=w.split(":").map(C=>parseInt(C,10));w=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),S.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();S.type="text"}d.userValue=w,d.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}),A(_)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",_=>{d.lastCommittedValue=null;const{data:S,target:w}=_,{value:x,selectionStart:C,selectionEnd:R}=w;let O=C,B=R;switch(_.inputType){case"deleteWordBackward":{const N=x.substring(0,C).match(/\w*[^\w]*$/);N&&(O-=N[0].length);break}case"deleteWordForward":{const N=x.substring(C).match(/^[^\w]*\w*/);N&&(B+=N[0].length);break}case"deleteContentBackward":C===R&&(O-=1);break;case"deleteContentForward":C===R&&(B+=1);break}_.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:S||"",willCommit:!1,selStart:O,selEnd:B}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class HT extends ur{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class jT extends ur{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ar.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n)){const p=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class I_ extends ur{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(ar.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const p=c===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const b=p&&m.id===n;m.domElement&&(m.domElement.checked=b),t.setValue(m.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class GT extends ym{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class VT extends ur{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");ar.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),o=!1),r.append(m)}let c=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),c=()=>{p.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=p=>{const m=p?"value":"textContent",{options:b,multiple:v}=r;return v?Array.prototype.filter.call(b,A=>A.selected).map(A=>A[m]):b.selectedIndex===-1?null:b[b.selectedIndex][m]};let d=u(!1);const f=p=>{const m=p.target.options;return Array.prototype.map.call(m,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const m={value(b){c?.();const v=b.detail.value,A=new Set(Array.isArray(v)?v:[v]);for(const _ of r.options)_.selected=A.has(_.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const v=r.options,A=b.detail.remove;v[A].selected=!1,r.remove(A),v.length>0&&Array.prototype.findIndex.call(v,S=>S.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(b){const{index:v,displayValue:A,exportValue:_}=b.detail.insert,S=r.children[v],w=document.createElement("option");w.textContent=A,w.value=_,S?S.before(w):r.append(w),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},items(b){const{items:v}=b.detail;for(;r.length!==0;)r.remove(0);for(const A of v){const{displayValue:_,exportValue:S}=A,w=document.createElement("option");w.textContent=_,w.value=S,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const A of b.target.options)A.selected=v.has(A.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(m,p)}),r.addEventListener("input",p=>{const m=u(!0),b=u(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class rg extends Ne{constructor(t){const{data:e,elements:n,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&Ne._hasPopupData(e)}),this.elements=n,o&&Ne._hasPopupData(e)){const c=this.popup=this.#t();for(const u of n)u.popup=c}else this.popup=null}#t(){return new XT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${no}${r}`).join(",")),this.container}}class XT{#t=null;#e=this.#V.bind(this);#n=this.#I.bind(this);#i=this.#L.bind(this);#a=this.#w.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#T=null;#S=null;#A=null;#C=!1;#_=null;#E=null;constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:p,open:m,commentManager:b=null}){this.#s=t,this.#S=r,this.#o=c,this.#T=u,this.#d=d,this.#r=e,this.#b=f,this.#h=p,this.#l=n,this.#t=b,this.#_=n[0],this.#c=Jp.toDateObject(o),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup()),b||(this.#D(),this.#s.hidden=!0,m&&this.#w())}#D(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#a,{signal:t}),e.addEventListener("pointerenter",this.#i,{signal:t}),e.addEventListener("pointerleave",this.#n,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#k(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#_.container.after(this.#p);return}if(this.#y||this.#k(),!this.#y)return;const{signal:t}=this.#g=new AbortController,e=this.#_.hasOwnCommentButton,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#_.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#_.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#M(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),u.after(c)}}#M(){if(this.#_.extraPopupElement&&!this.#_.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#y,{style:n}=this.#p;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#F(){this.#_.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#_.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}=this.#_.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#_.commentText,this.#E}set comment(t){t!==this.comment&&(this.#_.commentText=this.#E=t)}focus(){this.#_.container?.focus()}get parentBoundingClientRect(){return this.#_.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:n}=this.#p.getBoundingClientRect(),{x:r,y:o,width:c,height:u}=this.#_.layer.getBoundingClientRect();return[(t-r)/c,(e+n-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:c,width:u,height:d}=r;this.#t.showDialog(null,this,o+e*u,c+n*d,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#r){const n=t.style.outlineColor=vt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#S?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#S}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}p_({html:this.#R||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#R(){const t=this.#T,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#T.html||null}get#N(){return this.#R?.attributes?.style?.fontSize||0}get#P(){return this.#R?.attributes?.style?.color||null}#B(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#P,fontSize:this.#N?`calc(${this.#N}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return n}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#F(),this.#E=e.text)),t&&(this.#y=null,this.#k(),this.#M());return}if(n||e?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),e&&e.text&&(this.#T=this.#B(e.text),this.#c=Jp.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#T}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#x(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:o}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#b;for(const A of this.#l)if(!u||vt.intersect(A.data.rect,u)!==null){u=A.data.rect,c=!0;break}const d=vt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=c?u[2]-u[0]+5:0,m=d[0]+p,b=d[1];this.#u=[100*(m-r)/e,100*(b-o)/n];const{style:v}=this.#s;v.left=`${this.#u[0]}%`,v.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#I(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#x(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#I(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#m||this.#L(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class U_ extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ut.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class YT extends Ne{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class qT extends Ne{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",e-o),c.setAttribute("height",n-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class KT extends Ne{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",n/2),c.setAttribute("rx",e/2-o/2),c.setAttribute("ry",n/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class H_ extends Ne{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:r},width:o,height:c}=this;if(!e)return this.container;const u=this.svgFactory.create(o,c,!0);let d=[];for(let p=0,m=e.length;p<m;p+=2){const b=e[p]-t[0],v=t[3]-e[p+1];d.push(`${b},${v}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class WT extends H_{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ZT extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class bm extends Ne{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ut.HIGHLIGHT:Ut.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:c,width:u,height:d}=this.#n(e,t),f=this.svgFactory.create(u,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let m=0,b=n.length;m<b;m++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",n[m].join(",")),p.append(v)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:r}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),n)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",n[c].join(","));if(r){const{transform:c,width:u,height:d}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class j_ extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ut.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class $T extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class QT extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class JT extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class G_ extends Ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ut.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class tx extends Ne{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:r}=ai.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class vm{#t=null;#e=null;#n=null;#i=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=n,this.#a=u||null,this.#r=f||null,this.#n=p||new dm,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:e}=t,n=this.div;sr(n,this.viewport);const r=new Map,o=[],c={data:null,layer:n,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new oh,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===$e.POPUP;if(d){const m=r.get(u.id);if(!m)continue;if(!this._commentManager){o.push(u);continue}c.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=Mp.create(c);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),u.popupRef)){const m=r.get(u.popupRef);m?m.push(f):r.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const d=c.elements=r.get(u.id);c.data=u;const f=Mp.create(c);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${no}${u.id}`,u.hidden&&(p.style.visibility="hidden"),d.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:n,data:{id:r}}of this.#s){const o=n.id=`${no}${r}`;t.push(this.#a?.getAriaAttributes(o).then(c=>{if(c)for(const[u,d]of c)n.setAttribute(u,d)}))}}this.#s.sort(({data:{rect:[n,r,o,c]}},{data:{rect:[u,d,f,p]}})=>{if(n===o&&r===c)return 1;if(u===f&&d===p)return-1;const m=c,b=r,v=(r+c)/2,A=p,_=d,S=(d+p)/2;if(v>=A&&S<=b)return-1;if(S>=m&&v<=_)return 1;const w=(n+o)/2,x=(u+f)/2;return w-x});const e=document.createDocumentFragment();for(const n of this.#s)e.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&e.append(n.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const n of this.#s)this.#t.addPointerInTextLayer(n.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new oh,parent:this};for(const n of t){n.borderStyle||=vm._defaultBorderStyle,e.data=n;const r=Mp.create(e);r.isRenderable&&(r.render(),r.contentElement.id=`${no}${n.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,sr(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const c=this.#i.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,n),c._hasNoCanvas=!1):c.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:r}=t,o=new PT({data:{id:n,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${no}${n}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const e=this.#s.findIndex(r=>r.data.id===t);if(e<0)return;const[n]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Pt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Jr.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Vu=/\r\n?|\n/g;class fi extends Lt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=fi.prototype,e=o=>o.isEmpty(),n=Aa.TRANSLATE_SMALL,r=Aa.TRANSLATE_BIG;return Pt(this,"_keyboardManager",new mc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=Ut.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||fi._defaultColor||Lt._defaultLineColor,this.#i=t.fontSize||fi._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){Lt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Wt.FREETEXT_SIZE:fi._defaultFontSize=e;break;case Wt.FREETEXT_COLOR:fi._defaultColor=e;break}}updateParams(t,e){switch(t){case Wt.FREETEXT_SIZE:this.#a(e);break;case Wt.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[Wt.FREETEXT_SIZE,fi._defaultFontSize],[Wt.FREETEXT_COLOR,fi._defaultColor||Lt._defaultLineColor]]}get propertiesToUpdate(){return[[Wt.FREETEXT_SIZE,this.#i],[Wt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new sc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Wt.FREETEXT_COLOR}#a(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},n=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=r=>{this.color=r,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-fi._internalPadding*t,-(fi._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(fi.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const n=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){fi._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,p]=this.pageDimensions,[m,b]=this.pageTranslation;let v,A;switch(this.rotation){case 0:v=t+(c[0]-m)/f,A=e+this.height-(c[1]-b)/p;break;case 90:v=t+(c[0]-m)/f,A=e-(c[1]-b)/p,[u,d]=[d,-u];break;case 180:v=t-this.width+(c[0]-m)/f,A=e-(c[1]-b)/p,[u,d]=[-u,-d];break;case 270:v=t+(c[0]-m-this.height*p)/f,A=e+(c[1]-b-this.width*f)/p,[u,d]=[-d,u];break}this.setAt(v*r,A*o,u,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Vu,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=fi.#h(e.getData("text")||"").replaceAll(Vu,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(p.push(u.nodeValue.slice(d).replaceAll(Vu,"")),v!==this.editorDiv){let A=f;for(const _ of this.editorDiv.childNodes){if(_===v){A=p;continue}A.push(fi.#c(_))}}f.push(u.nodeValue.slice(0,d).replaceAll(Vu,""))}else if(u===this.editorDiv){let v=f,A=0;for(const _ of this.editorDiv.childNodes)A++===d&&(v=p),v.push(fi.#c(_))}this.#t=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#l();const m=new Range;let b=Math.sumPrecise(f.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const A=v.nodeValue.length;if(b<=A){m.setStart(v,b),m.setEnd(v,b);break}b-=A}o.removeAllRanges(),o.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=fi._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let r=null;if(t instanceof U_){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:f,id:p,popupRef:m,richText:b,contentsObj:v,creationDate:A,modificationDate:_},textContent:S,textPosition:w,parent:{page:{pageNumber:x}}}=t;if(!S||S.length===0)return null;r=t={annotationType:Ut.FREETEXT,color:Array.from(u),fontSize:c,value:S.join(`
`),position:w,pageIndex:x-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:v?.str||null,richText:b,creationDate:A,modificationDate:_}}const o=await super.deserialize(t,e,n);return o.#i=t.fontSize,o.color=vt.makeHexColor(...t.color),o.#t=fi.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#i,value:this.#d()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(t){const{value:e,fontSize:n,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class wt{static PRECISION=1e-4;toSVGPath(){oe("Abstract method `toSVGPath` must be implemented.")}get box(){oe("Abstract getter `box` must be implemented.")}serialize(t,e){oe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u]*r,c[u+1]=n+t[u+1]*o;return c}static _rescaleAndSwap(t,e,n,r,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u+1]*r,c[u+1]=n+t[u]*o;return c}static _translate(t,e,n,r){r||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)r[o]=e+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,o){switch(o){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,o,c){return[(t+5*n)/6,(e+5*r)/6,(5*n+o)/6,(5*r+c)/6,(n+o)/2,(r+c)/2]}}class Ya{#t;#e=[];#n;#i;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=Ya.#m+Ya.#g;constructor({x:t,y:e},n,r,o,c,u=0){this.#t=n,this.#h=o*r,this.#i=c,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=u,this.#l=Ya.#m*r,this.#c=Ya.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[n,r,o,c]=this.#t;return[(this.#s+(t[0]-e[0])/2-n)/o,(this.#o+(t[1]-e[1])/2-r)/c,(this.#s+(e[0]-t[0])/2-n)/o,(this.#o+(e[1]-t[1])/2-r)/c]}add({x:t,y:e}){this.#s=t,this.#o=e;const[n,r,o,c]=this.#t;let[u,d,f,p]=this.#r.subarray(8,12);const m=t-f,b=e-p,v=Math.hypot(m,b);if(v<this.#c)return!1;const A=v-this.#l,_=A/v,S=_*m,w=_*b;let x=u,C=d;u=f,d=p,f+=S,p+=w,this.#f?.push(t,e);const R=-w/A,O=S/A,B=R*this.#h,N=O*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+B,p+N],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-B,p-N],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+B,d+N],2),this.#a.push(NaN,NaN,NaN,NaN,(u+B-n)/o,(d+N-r)/c),this.#r.set([u-B,d-N],14),this.#e.push(NaN,NaN,NaN,NaN,(u-B-n)/o,(d-N-r)/c)),this.#r.set([x,C,u,d,f,p],6),!this.isEmpty()):(this.#r.set([x,C,u,d,f,p],6),Math.abs(Math.atan2(C-d,x-u)-Math.atan2(w,S))<Math.PI/2?([u,d,f,p]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((d+p)/2-r)/c),[u,d,x,C]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+u)/2-n)/o,((C+d)/2-r)/c),!0):([x,C,u,d,f,p]=this.#r.subarray(0,6),this.#a.push(((x+5*u)/6-n)/o,((C+5*d)/6-r)/c,((5*u+f)/6-n)/o,((5*d+p)/6-r)/c,((u+f)/2-n)/o,((d+p)/2-r)/c),[f,p,u,d,x,C]=this.#r.subarray(12,18),this.#e.push(((x+5*u)/6-n)/o,((C+5*d)/6-r)/c,((5*u+f)/6-n)/o,((5*d+p)/6-r)/c,((u+f)/2-n)/o,((d+p)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#v(n),n.join(" ")}#y(){const[t,e,n,r]=this.#t,[o,c,u,d]=this.#p();return`M${(this.#r[2]-t)/n} ${(this.#r[3]-e)/r} L${(this.#r[4]-t)/n} ${(this.#r[5]-e)/r} L${o} ${c} L${u} ${d} L${(this.#r[16]-t)/n} ${(this.#r[17]-e)/r} L${(this.#r[14]-t)/n} ${(this.#r[15]-e)/r} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,n,r,o]=this.#t,c=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[d,f,p,m]=this.#p();t.push(`L${(c[0]-e)/r} ${(c[1]-n)/o} L${d} ${f} L${p} ${m} L${(u[0]-e)/r} ${(u[1]-n)/o}`)}newFreeDrawOutline(t,e,n,r,o,c){return new V_(t,e,n,r,o,c)}getOutlines(){const t=this.#a,e=this.#e,n=this.#r,[r,o,c,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,b=d.length-2;m<b;m+=2)d[m]=(this.#f[m]-r)/c,d[m+1]=(this.#f[m+1]-o)/u;if(d[d.length-2]=(this.#s-r)/c,d[d.length-1]=(this.#o-o)/u,isNaN(n[6])&&!this.isEmpty())return this.#T(d);const f=new Float32Array(this.#a.length+24+this.#e.length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}p=this.#A(f,p);for(let m=e.length-6;m>=6;m-=6)for(let b=0;b<6;b+=2){if(isNaN(e[m+b])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[m+b],f[p+1]=e[m+b+1],p+=2}return this.#S(f,p),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#n,this.#i)}#T(t){const e=this.#r,[n,r,o,c]=this.#t,[u,d,f,p]=this.#p(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-r)/c,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-r)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-r)/c,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-r)/c],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#n,this.#i)}#S(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#A(t,e){const n=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[o,c,u,d]=this.#t,[f,p,m,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-c)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,b,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/d],e),e+=24}}class V_ extends wt{#t;#e=new Float32Array(4);#n;#i;#a;#r;#s;constructor(t,e,n,r,o,c){super(),this.#s=t,this.#a=e,this.#t=n,this.#r=r,this.#n=o,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,d,f,p]=this.#e;for(let m=0,b=t.length;m<b;m+=2)t[m]=(t[m]-u)/f,t[m+1]=(t[m+1]-d)/p;for(let m=0,b=e.length;m<b;m+=2)e[m]=(e[m]-u)/f,e[m+1]=(e[m+1]-d)/p}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,n=this.#s.length;e<n;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,r],o){const c=n-t,u=r-e;let d,f;switch(o){case 0:d=wt._rescale(this.#s,t,r,c,-u),f=wt._rescale(this.#a,t,r,c,-u);break;case 90:d=wt._rescaleAndSwap(this.#s,t,e,c,u),f=wt._rescaleAndSwap(this.#a,t,e,c,u);break;case 180:d=wt._rescale(this.#s,n,e,-c,u),f=wt._rescale(this.#a,n,e,-c,u);break;case 270:d=wt._rescaleAndSwap(this.#s,n,r,-c,-u),f=wt._rescaleAndSwap(this.#a,n,r,-c,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#s;let n=e[4],r=e[5];const o=[n,r,n,r];let c=n,u=r,d=n,f=r;const p=t?Math.max:Math.min,m=new Float32Array(4);for(let v=6,A=e.length;v<A;v+=6){const _=e[v+4],S=e[v+5];isNaN(e[v])?(vt.pointBoundingBox(_,S,o),u>S?(c=_,u=S):u===S&&(c=p(c,_)),f<S?(d=_,f=S):f===S&&(d=p(d,_))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,vt.bezierBoundingBox(n,r,...e.slice(v,v+6),m),vt.rectBoundingBox(m[0],m[1],m[2],m[3],o),u>m[1]?(c=m[0],u=m[1]):u===m[1]&&(c=p(c,m[0])),f<m[3]?(d=m[2],f=m[3]):f===m[3]&&(d=p(d,m[2]))),n=_,r=S}const b=this.#e;b[0]=o[0]-this.#n,b[1]=o[1]-this.#n,b[2]=o[2]-o[0]+2*this.#n,b[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,n,r,o,c=0){return new Ya(t,e,n,r,o,c)}getNewOutline(t,e){const[n,r,o,c]=this.#e,[u,d,f,p]=this.#t,m=o*f,b=c*p,v=n*f+u,A=r*p+d,_=this.newOutliner({x:this.#a[0]*m+v,y:this.#a[1]*b+A},this.#t,this.#r,t,this.#i,e??this.#n);for(let S=2;S<this.#a.length;S+=2)_.add({x:this.#a[S]*m+v,y:this.#a[S+1]*b+A});return _.getOutlines()}}class og{#t;#e;#n;#i=[];#a=[];constructor(t,e=0,n=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:_,y:S,width:w,height:x}of t){const C=Math.floor((_-e)/c)*c,R=Math.ceil((_+w+e)/c)*c,O=Math.floor((S-e)/c)*c,B=Math.ceil((S+x+e)/c)*c,N=[C,O,B,!0],V=[R,O,B,!1];this.#i.push(N,V),vt.rectBoundingBox(C,O,R,B,o)}const u=o[2]-o[0]+2*n,d=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n;let m=r?-1/0:1/0,b=1/0;const v=this.#i.at(r?-1:-2),A=[v[0],v[2]];for(const _ of this.#i){const[S,w,x,C]=_;!C&&r?w<b?(b=w,m=S):w===b&&(m=Math.max(m,S)):C&&!r&&(w<b?(b=w,m=S):w===b&&(m=Math.min(m,S))),_[0]=(S-f)/u,_[1]=(w-p)/d,_[2]=(x-p)/d}this.#t=new Float32Array([f,p,u,d]),this.#e=[m,b],this.#n=A}getOutlines(){this.#i.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#i)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],n=new Set;for(const c of t){const[u,d,f]=c;e.push([u,d,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const r=[];let o;for(;n.size>0;){const c=n.values().next().value;let[u,d,f,p,m]=c;n.delete(c);let b=u,v=d;for(o=[u,f],r.push(o);;){let A;if(n.has(p))A=p;else if(n.has(m))A=m;else break;n.delete(A),[u,d,f,p,m]=A,b!==u&&(o.push(b,v,u,v===d?d:f),b=u),v=v===d?f:d}o.push(b,v)}return new ex(r,this.#t,this.#e,this.#n)}#s(t){const e=this.#a;let n=0,r=e.length-1;for(;n<=r;){const o=n+r>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:r=o-1}return r+1}#o([,t,e]){const n=this.#s(t);this.#a.splice(n,0,[t,e])}#c([,t,e]){const n=this.#s(t);for(let r=n;r<this.#a.length;r++){const[o,c]=this.#a[r];if(o!==t)break;if(o===t&&c===e){this.#a.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,c]=this.#a[r];if(o!==t)break;if(o===t&&c===e){this.#a.splice(r,1);return}}}#l(t){const[e,n,r]=t,o=[[e,n,r]],c=this.#s(r);for(let u=0;u<c;u++){const[d,f]=this.#a[u];for(let p=0,m=o.length;p<m;p++){const[,b,v]=o[p];if(!(f<=b||v<=d)){if(b>=d){if(v>f)o[p][1]=f;else{if(m===1)return[];o.splice(p,1),p--,m--}continue}o[p][2]=d,v>f&&o.push([e,f,v])}}}return o}}class ex extends wt{#t;#e;constructor(t,e,n,r){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[n,r]=e;t.push(`M${n} ${r}`);for(let o=2;o<e.length;o+=2){const c=e[o],u=e[o+1];c===n?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),n=c)}t.push("Z")}return t.join(" ")}serialize([t,e,n,r],o){const c=[],u=n-t,d=r-e;for(const f of this.#e){const p=new Array(f.length);for(let m=0;m<f.length;m+=2)p[m]=t+f[m]*u,p[m+1]=r-f[m+1]*d;c.push(p)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class lg extends Ya{newFreeDrawOutline(t,e,n,r,o,c){return new ix(t,e,n,r,o,c)}}class ix extends V_{newOutliner(t,e,n,r,o,c=0){return new lg(t,e,n,r,o,c)}}class je extends Lt{#t=null;#e=0;#n;#i=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ut.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=je.prototype;return Pt(this,"_keyboardManager",new mc([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||je._defaultColor,this.#p=t.thickness||je._defaultThickness,this.opacity=t.opacity||je._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#_()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#_(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new og(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new og(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#p/2+r,.0025),e>=0)this.#d=e,this.#i=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:je.#E(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:je.#E(this.#r.box,m),path:{d:this.#r.toSVGPath()}})}const[o,c,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[m,b]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*b/m,this.height=d*m/b;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[m,b]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*b/m,this.height=d*m/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-c)/d];const{lastPoint:p}=this.#r;this.#m=[(p[0]-o)/u,(p[1]-c)/d]}static initialize(t,e){Lt.initialize(t,e),je._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Wt.HIGHLIGHT_COLOR:je._defaultColor=e;break;case Wt.HIGHLIGHT_THICKNESS:je._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Wt.HIGHLIGHT_COLOR:this.#T(e);break;case Wt.HIGHLIGHT_THICKNESS:this.#S(e);break}}static get defaultPropertiesToUpdate(){return[[Wt.HIGHLIGHT_COLOR,je._defaultColor],[Wt.HIGHLIGHT_THICKNESS,je._defaultThickness]]}get propertiesToUpdate(){return[[Wt.HIGHLIGHT_COLOR,this.color||je._defaultColor],[Wt.HIGHLIGHT_THICKNESS,this.#p||je._defaultThickness],[Wt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#T(t){const e=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},n=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,je._defaultOpacity),undo:e.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#S(t){const e=this.#p,n=r=>{this.#p=r,this.#A(r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Ln({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#_(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#_(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#_(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#E([t,e,n,r],o){switch(o){case 90:return[1-e-r,t,r,n];case 180:return[1-t-n,1-e-r,n,r];case 270:return[e,1-t-n,r,n]}return[t,e,n,r]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=je.#E(this.#l.box,t)):n=je.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:je.#E(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i,this.setDims(),m_(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#D(t){je._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#k(!0);break;case 1:case 3:this.#k(!1);break}}#k(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#k(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#F(){if(this.#h)return null;const[t,e]=this.pageDimensions,[n,r]=this.pageTranslation,o=this.#n,c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:p,height:m}of o){const b=d*t+n,v=(1-f)*e+r;c[u]=c[u+4]=b,c[u+1]=c[u+3]=v,c[u+2]=c[u+6]=b+p*t,c[u+5]=c[u+7]=v-m*e,u+=8}return c}#R(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:n,x:r,y:o}){const{x:c,y:u,width:d,height:f}=n.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),b=v=>{p.abort(),this.#P(t,v)};window.addEventListener("blur",b,{signal:m}),window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("pointerdown",Pe,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Bn,{signal:m}),n.addEventListener("pointermove",this.#N.bind(this,t),{signal:m}),this._freeHighlight=new lg({x:r,y:o},[c,u,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#N(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#P(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let r=null;if(t instanceof j_){const{data:{quadPoints:A,rect:_,rotation:S,id:w,color:x,opacity:C,popupRef:R,richText:O,contentsObj:B,creationDate:N,modificationDate:V},parent:{page:{pageNumber:j}}}=t;r=t={annotationType:Ut.HIGHLIGHT,color:Array.from(x),opacity:C,quadPoints:A,boxes:null,pageIndex:j-1,rect:_.slice(0),rotation:S,annotationElementId:w,id:w,deleted:!1,popupRef:R,richText:O,comment:B?.str||null,creationDate:N,modificationDate:V}}else if(t instanceof bm){const{data:{inkLists:A,rect:_,rotation:S,id:w,color:x,borderStyle:{rawWidth:C},popupRef:R,richText:O,contentsObj:B,creationDate:N,modificationDate:V},parent:{page:{pageNumber:j}}}=t;r=t={annotationType:Ut.HIGHLIGHT,color:Array.from(x),thickness:C,inkLists:A,boxes:null,pageIndex:j-1,rect:_.slice(0),rotation:S,annotationElementId:w,id:w,deleted:!1,popupRef:R,richText:O,comment:B?.str||null,creationDate:N,modificationDate:V}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,f=await super.deserialize(t,e,n);f.color=vt.makeHexColor(...o),f.opacity=d||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[p,m]=f.pageDimensions,[b,v]=f.pageTranslation;if(c){const A=f.#n=[];for(let _=0;_<c.length;_+=8)A.push({x:(c[_]-b)/p,y:1-(c[_+1]-v)/m,width:(c[_+2]-c[_])/p,height:(c[_+1]-c[_+5])/m});f.#v(),f.#_(),f.rotate(f.rotation)}else if(u){f.#h=!0;const A=u[0],_={x:A[0]-b,y:m-(A[1]-v)},S=new lg(_,[0,0,p,m],1,f.#p/2,!0,.001);for(let C=0,R=A.length;C<R;C+=2)_.x=A[C]-b,_.y=m-(A[C+1]-v),S.add(_);const{id:w,clipPathId:x}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);f.#b({highlightOutlines:S.getOutlines(),highlightId:w,clipPathId:x}),f.#_(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#F(),outlines:this.#R(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#B(n)?null:(n.id=this.annotationElementId,n)}#B(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,r)=>n!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class X_{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){oe("Not implemented")}}class ie extends Lt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#r(t),this.#c())}#r({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:n}=e.drawLayer.draw(ie._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[r,o]of Object.entries(e))n.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){oe("Not implemented")}static get typesMap(){oe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(ie.#n.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)t.push([n,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,r]of this.constructor.typesMap)t.push([n,e[r]]);return t}_updateProperty(t,e,n){const r=this._drawingOptions,o=r[e],c=u=>{r.updateProperty(e,u);const d=this.#t.updateProperty(e,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,n),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,n,r]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[e,1-t,n*(c/o),r*(o/c)];case 180:return[1-t,1-e,n,r];case 270:return[1-e,t,n*(c/o),r*(o/c)];default:return[t,e,n,r]}}#d(){const{x:t,y:e,width:n,height:r,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-e,t,n*(o/c),r*(c/o)];case 180:return[1-t,1-e,n,r];case 270:return[e,1-t,n*(o/c),r*(c/o)];default:return[t,e,n,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:n,height:r,rotation:o,parentRotation:c,parentDimensions:[u,d]}=this;switch((o*4+c)/90){case 1:return[1-e-r,t,r,n];case 2:return[1-t-n,1-e-r,n,r];case 3:return[e,1-t-n,r,n];case 4:return[t,e-n*(u/d),r*(d/u),n*(u/d)];case 5:return[1-e,t,n*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-e,r*(d/u),n*(u/d)];case 7:return[e-n*(u/d),1-t-r*(d/u),n*(u/d),r*(d/u)];case 8:return[t-n,e-r,n,r];case 9:return[1-e,t-n,r,n];case 10:return[1-t,1-e,n,r];case 11:return[e-r,1-t,r,n];case 12:return[t-r*(d/u),e,r*(d/u),n*(u/d)];case 13:return[1-e-n*(u/d),t-r*(d/u),n*(u/d),r*(d/u)];case 14:return[1-t,1-e-n*(u/d),r*(d/u),n*(u/d)];case 15:return[e,1-t,n*(u/d),r*(d/u)];default:return[t,e,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,r,o){oe("Not implemented")}static startDrawing(t,e,n,r){const{target:o,offsetX:c,offsetY:u,pointerId:d,pointerType:f}=r;if(se.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=t,{width:m,height:b}=o.getBoundingClientRect(),v=ie.#i=new AbortController,A=t.combinedSignal(v);if(se.setPointer(f,d),window.addEventListener("pointerup",_=>{se.isSamePointerIdOrRemove(_.pointerId)&&this._endDraw(_)},{signal:A}),window.addEventListener("pointercancel",_=>{se.isSamePointerIdOrRemove(_.pointerId)&&this._currentParent.endDrawingSession()},{signal:A}),window.addEventListener("pointerdown",_=>{se.isSamePointerType(_.pointerType)&&(se.initializeAndAddPointerId(_.pointerId),ie.#n.isCancellable()&&(ie.#n.removeLastElement(),ie.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Bn,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",_=>{se.isSameTimeStamp(_.timeStamp)&&Pe(_)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),ie.#n){t.drawLayer.updateProperties(this._currentDrawId,ie.#n.startNew(c,u,m,b,p));return}e.updateUIForDefaultProperties(this),ie.#n=this.createDrawerInstance(c,u,m,b,p),ie.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ie.#a.toSVGProperties(),ie.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(se.isSameTimeStamp(t.timeStamp),!ie.#n)return;const{offsetX:e,offsetY:n,pointerId:r}=t;if(se.isSamePointerId(r)){if(se.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ie.#n.add(e,n)),se.setTimeStamp(t.timeStamp),Pe(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ie.#n=null,ie.#a=null,se.clearTimeStamp()),ie.#i&&(ie.#i.abort(),ie.#i=null,se.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,ie.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=ie.#n,r=this._currentDrawId,o=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Wt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Wt.DRAW_STEP),!ie.#n.isEmpty()){const{pageDimensions:[n,r],scale:o}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ie.#n.getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:ie.#a,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,r,o,c){oe("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:u}}=e.viewport,d=this.deserializeDraw(c,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,n);return f.createDrawingOptions(t),f.#r({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,n]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([e,n,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class nx{#t=new Float64Array(6);#e;#n;#i;#a;#r;#s="";#o=0;#c=new yc;#l;#d;constructor(t,e,n,r,o,c){this.#l=n,this.#d=r,this.#i=o,this.#a=c,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#n=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#h(t,e){return wt._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);const[n,r,o,c]=this.#t.subarray(2,6),u=t-o,d=e-c;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#r.push(t,e),isNaN(n)?(this.#t.set([o,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,r,o,c,t,e],0),this.#e.push(...wt.createBezierPoints(n,r,o,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,o){this.#l=n,this.#d=r,this.#i=o,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#r}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,e=this.#n.length;t<e;t++){const{line:n,points:r}=this.#n[t];this.#e=n,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=wt.svgRound(this.#e[4]),e=wt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#r.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const r=wt.svgRound(this.#e[10]),o=wt.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${o}`,this.#o=12,this.#s}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[c,u,d,f,p,m]=this.#e.slice(r,r+6).map(wt.svgRound);n.push(`C${c} ${u} ${d} ${f} ${p} ${m}`)}return this.#s+=n.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,n,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,e,n,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class yc extends wt{#t;#e=0;#n;#i;#a;#r;#s;#o;#c;build(t,e,n,r,o,c,u){this.#a=e,this.#r=n,this.#s=r,this.#o=o,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${wt.svgRound(e[4])} ${wt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${wt.svgRound(e[10])} ${wt.svgRound(e[11])}`);continue}for(let n=6,r=e.length;n<r;n+=6){const[o,c,u,d,f,p]=e.subarray(n,n+6).map(wt.svgRound);t.push(`C${o} ${c} ${u} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,e,n,r],o){const c=[],u=[],[d,f,p,m]=this.#d();let b,v,A,_,S,w,x,C,R;switch(this.#o){case 0:R=wt._rescale,b=t,v=e+r,A=n,_=-r,S=t+d*n,w=e+(1-f-m)*r,x=t+(d+p)*n,C=e+(1-f)*r;break;case 90:R=wt._rescaleAndSwap,b=t,v=e,A=n,_=r,S=t+f*n,w=e+d*r,x=t+(f+m)*n,C=e+(d+p)*r;break;case 180:R=wt._rescale,b=t+n,v=e,A=-n,_=r,S=t+(1-d-p)*n,w=e+f*r,x=t+(1-d)*n,C=e+(f+m)*r;break;case 270:R=wt._rescaleAndSwap,b=t+n,v=e+r,A=-n,_=-r,S=t+(1-f-m)*n,w=e+(1-d-p)*r,x=t+(1-f)*n,C=e+(1-d)*r;break}for(const{line:O,points:B}of this.#i)c.push(R(O,b,v,A,_,o?new Array(O.length):null)),u.push(R(B,b,v,A,_,o?new Array(B.length):null));return{lines:c,points:u,rect:[S,w,x,C]}}static deserialize(t,e,n,r,o,{paths:{lines:c,points:u},rotation:d,thickness:f}){const p=[];let m,b,v,A,_;switch(d){case 0:_=wt._rescale,m=-t/n,b=e/r+1,v=1/n,A=-1/r;break;case 90:_=wt._rescaleAndSwap,m=-e/r,b=-t/n,v=1/r,A=1/n;break;case 180:_=wt._rescale,m=t/n+1,b=-e/r,v=-1/n,A=1/r;break;case 270:_=wt._rescaleAndSwap,m=e/r+1,b=t/n+1,v=-1/r,A=-1/n;break}if(!c){c=[];for(const w of u){const x=w.length;if(x===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(x===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const C=new Float32Array(3*(x-2));c.push(C);let[R,O,B,N]=w.subarray(0,4);C.set([NaN,NaN,NaN,NaN,R,O],0);for(let V=4;V<x;V+=2){const j=w[V],Z=w[V+1];C.set(wt.createBezierPoints(R,O,B,N,j,Z),(V-2)*3),[R,O,B,N]=[B,N,j,Z]}}}for(let w=0,x=c.length;w<x;w++)p.push({line:_(c[w].map(C=>C??NaN),m,b,v,A),points:_(u[w].map(C=>C??NaN),m,b,v,A)});const S=new this.prototype.constructor;return S.build(p,n,r,1,d,f,o),S}#l(t=this.#c){const e=this.#n+t/2*this.#s;return this.#o%180===0?[e/this.#a,e/this.#r]:[e/this.#r,e/this.#a]}#d(){const[t,e,n,r]=this.#t,[o,c]=this.#l(0);return[t+o,e+c,n-2*o,r-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)vt.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],c=r[5];for(let u=6,d=r.length;u<d;u+=6){const[f,p,m,b,v,A]=r.subarray(u,u+6);vt.bezierBoundingBox(o,c,f,p,m,b,v,A,t),o=v,c=A}}const[e,n]=this.#l();t[0]=Ei(t[0]-e,0,1),t[1]=Ei(t[1]-n,0,1),t[2]=Ei(t[2]+e,0,1),t[3]=Ei(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#c=t;const[r,o]=this.#l(),[c,u]=[r-e,o-n],d=this.#t;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateParentDimensions([t,e],n){const[r,o]=this.#l();this.#a=t,this.#r=e,this.#s=n;const[c,u]=this.#l(),d=c-r,f=u-o,p=this.#t;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(wt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${wt.svgRound(t)} ${wt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,r=0,o=0,c=0,u=0,d=0;switch(this.#e){case 90:r=e/t,o=-t/e,u=t;break;case 180:n=-1,c=-1,u=t,d=e;break;case 270:r=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${n} ${r} ${o} ${c} ${wt.svgRound(u)} ${wt.svgRound(d)})`}getPathResizingSVGProperties([t,e,n,r]){const[o,c]=this.#l(),[u,d,f,p]=this.#t;if(Math.abs(f-o)<=wt.PRECISION||Math.abs(p-c)<=wt.PRECISION){const _=t+n/2-(u+f/2),S=e+r/2-(d+p/2);return{path:{"transform-origin":`${wt.svgRound(t)} ${wt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${_} ${S})`}}}const m=(n-2*o)/(f-2*o),b=(r-2*c)/(p-2*c),v=f/n,A=p/r;return{path:{"transform-origin":`${wt.svgRound(u)} ${wt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${A}) translate(${wt.svgRound(o)} ${wt.svgRound(c)}) scale(${m} ${b}) translate(${wt.svgRound(-o)} ${wt.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,n,r]){const[o,c]=this.#l(),u=this.#t,[d,f,p,m]=u;if(u[0]=t,u[1]=e,u[2]=n,u[3]=r,Math.abs(p-o)<=wt.PRECISION||Math.abs(m-c)<=wt.PRECISION){const S=t+n/2-(d+p/2),w=e+r/2-(f+m/2);for(const{line:x,points:C}of this.#i)wt._translate(x,S,w,x),wt._translate(C,S,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${wt.svgRound(t)} ${wt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(n-2*o)/(p-2*o),v=(r-2*c)/(m-2*c),A=-b*(d+o)+t+o,_=-v*(f+c)+e+c;if(b!==1||v!==1||A!==0||_!==0)for(const{line:S,points:w}of this.#i)wt._rescale(S,A,_,b,v,S),wt._rescale(w,A,_,b,v,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${wt.svgRound(t)} ${wt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[r,o]=n,c=this.#t,u=t-c[0],d=e-c[1];if(this.#a===r&&this.#r===o)for(const{line:f,points:p}of this.#i)wt._translate(f,u,d,f),wt._translate(p,u,d,p);else{const f=this.#a/r,p=this.#r/o;this.#a=r,this.#r=o;for(const{line:m,points:b}of this.#i)wt._rescale(m,u,d,f,p,m),wt._rescale(b,u,d,f,p,b);c[2]*=f,c[3]*=p}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${wt.svgRound(t)} ${wt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${wt.svgRound(t[0])} ${wt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Gh extends X_{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Gh(this._viewParameters);return t.updateAll(this),t}}class _m extends ie{static _type="ink";static _editorType=Ut.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Lt.initialize(t,e),this._defaultDrawingOptions=new Gh(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Pt(this,"typesMap",new Map([[Wt.INK_THICKNESS,"stroke-width"],[Wt.INK_COLOR,"stroke"],[Wt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,r,o){return new nx(t,e,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,r,o,c){return yc.deserialize(t,e,n,r,o,c)}static async deserialize(t,e,n){let r=null;if(t instanceof bm){const{data:{inkLists:c,rect:u,rotation:d,id:f,color:p,opacity:m,borderStyle:{rawWidth:b},popupRef:v,richText:A,contentsObj:_,creationDate:S,modificationDate:w},parent:{page:{pageNumber:x}}}=t;r=t={annotationType:Ut.INK,color:Array.from(p),thickness:b,opacity:m,paths:{points:c},boxes:null,pageIndex:x-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:v,richText:A,comment:_?.str||null,creationDate:S,modificationDate:w}}const o=await super.deserialize(t,e,n);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new sc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Wt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=_m.getDefaultDrawingOptions({stroke:vt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:Lt._colorManager.convert(r),opacity:o,thickness:c,paths:{lines:e,points:n}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==e[u])||t.thickness!==n||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class cg extends yc{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Xu=8,Il=3;class eo{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,n,r,o,c,u){const d=this.#e(n,r,o,c);for(let f=0;f<8;f++){const p=(-f+d-u+16)%8,m=this.#n[2*p],b=this.#n[2*p+1];if(t[(n+m)*e+(r+b)]!==0)return p}return-1}static#a(t,e,n,r,o,c,u){const d=this.#e(n,r,o,c);for(let f=0;f<8;f++){const p=(f+d+u+16)%8,m=this.#n[2*p],b=this.#n[2*p+1];if(t[(n+m)*e+(r+b)]!==0)return p}return-1}static#r(t,e,n,r){const o=t.length,c=new Int32Array(o);for(let p=0;p<o;p++)c[p]=t[p]<=r?1:0;for(let p=1;p<n-1;p++)c[p*e]=c[p*e+e-1]=0;for(let p=0;p<e;p++)c[p]=c[e*n-1-p]=0;let u=1,d;const f=[];for(let p=1;p<n-1;p++){d=1;for(let m=1;m<e-1;m++){const b=p*e+m,v=c[b];if(v===0)continue;let A=p,_=m;if(v===1&&c[b-1]===0)u+=1,_-=1;else if(v>=1&&c[b+1]===0)u+=1,_+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const S=[m,p],w=_===m+1,x={isHole:w,points:S,id:u,parent:0};f.push(x);let C;for(const at of f)if(at.id===d){C=at;break}C?C.isHole?x.parent=w?C.parent:d:x.parent=w?d:C.parent:x.parent=w?d:0;const R=this.#i(c,e,p,m,A,_,0);if(R===-1){c[b]=-u,c[b]!==1&&(d=Math.abs(c[b]));continue}let O=this.#n[2*R],B=this.#n[2*R+1];const N=p+O,V=m+B;A=N,_=V;let j=p,Z=m;for(;;){const at=this.#a(c,e,j,Z,A,_,1);O=this.#n[2*at],B=this.#n[2*at+1];const F=j+O,$=Z+B;S.push($,F);const k=j*e+Z;if(c[k+1]===0?c[k]=-u:c[k]===1&&(c[k]=u),F===p&&$===m&&j===N&&Z===V){c[b]!==1&&(d=Math.abs(c[b]));break}else A=j,_=Z,j=F,Z=$}}}return f}static#s(t,e,n,r){if(n-e<=4){for(let N=e;N<n-2;N+=2)r.push(t[N],t[N+1]);return}const o=t[e],c=t[e+1],u=t[n-4]-o,d=t[n-3]-c,f=Math.hypot(u,d),p=u/f,m=d/f,b=p*c-m*o,v=d/u,A=1/f,_=Math.atan(v),S=Math.cos(_),w=Math.sin(_),x=A*(Math.abs(S)+Math.abs(w)),C=A*(1-x+x**2),R=Math.max(Math.atan(Math.abs(w+S)*C),Math.atan(Math.abs(w-S)*C));let O=0,B=e;for(let N=e+2;N<n-2;N+=2){const V=Math.abs(b-p*t[N+1]+m*t[N]);V>O&&(B=N,O=V)}O>(f*R)**2?(this.#s(t,e,B+2,r),this.#s(t,B,n,r)):r.push(o,c)}static#o(t){const e=[],n=t.length;return this.#s(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,r,o,c){const u=new Float32Array(c**2),d=-2*r**2,f=c>>1;for(let _=0;_<c;_++){const S=(_-f)**2;for(let w=0;w<c;w++)u[_*c+w]=Math.exp((S+(w-f)**2)/d)}const p=new Float32Array(256),m=-2*o**2;for(let _=0;_<256;_++)p[_]=Math.exp(_**2/m);const b=t.length,v=new Uint8Array(b),A=new Uint32Array(256);for(let _=0;_<n;_++)for(let S=0;S<e;S++){const w=_*e+S,x=t[w];let C=0,R=0;for(let B=0;B<c;B++){const N=_+B-f;if(!(N<0||N>=n))for(let V=0;V<c;V++){const j=S+V-f;if(j<0||j>=e)continue;const Z=t[N*e+j],at=u[B*c+V]*p[Math.abs(Z-x)];C+=Z*at,R+=at}}const O=v[w]=Math.round(C/R);A[O]++}return[v,A]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,o=1/0;for(let u=0,d=n.length;u<d;u++){const f=n[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const c=255/(r-o);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-o)*c;return n}static#h(t){let e,n=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let c=o,u=o;for(e=o;e<256;e++){const d=t[e];d>n&&(e-c>r&&(r=e-c,u=e-1),n=d,c=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:r}=t,{maxDim:o}=this.#t;let c=n,u=r;if(n>o||r>o){let b=n,v=r,A=Math.log2(Math.max(n,r)/o);const _=Math.floor(A);A=A===_?_-1:_;for(let w=0;w<A;w++){c=Math.ceil(b/2),u=Math.ceil(v/2);const x=new OffscreenCanvas(c,u);x.getContext("2d").drawImage(t,0,0,b,v,0,0,c,u),b=c,v=u,t!==e&&t.close(),t=x.transferToImageBitmap()}const S=Math.min(o/c,o/u);c=Math.round(c*S),u=Math.round(u*S)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[this.#d(p),c,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},o,c,u,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const m=200,b=p.font=`${n} ${r} ${m}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:A,actualBoundingBoxAscent:_,actualBoundingBoxDescent:S,fontBoundingBoxAscent:w,fontBoundingBoxDescent:x,width:C}=p.measureText(t),R=1.5,O=Math.ceil(Math.max(Math.abs(v)+Math.abs(A)||0,C)*R),B=Math.ceil(Math.max(Math.abs(_)+Math.abs(S)||m,Math.abs(w)+Math.abs(x)||m)*R);f=new OffscreenCanvas(O,B),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=b,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,O,B),p.fillStyle="black",p.fillText(t,O*(R-1)/2,B*(3-R)/2);const N=this.#d(p.getImageData(0,0,O,B).data),V=this.#l(N),j=this.#h(V),Z=this.#r(N,O,B,j);return this.processDrawnLines({lines:{curves:Z,width:O,height:B},pageWidth:o,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,o){const[c,u,d]=this.#f(t),[f,p]=this.#c(c,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#h(p),b=this.#r(f,u,d,m);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:c,areContours:u}){r%180!==0&&([e,n]=[n,e]);const{curves:d,width:f,height:p}=t,m=t.thickness??0,b=[],v=Math.min(e/f,n/p),A=v/e,_=v/n,S=[];for(const{points:x}of d){const C=c?this.#o(x):x;if(!C)continue;S.push(C);const R=C.length,O=new Float32Array(R),B=new Float32Array(3*(R===2?2:R-2));if(b.push({line:B,points:O}),R===2){O[0]=C[0]*A,O[1]=C[1]*_,B.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[N,V,j,Z]=C;N*=A,V*=_,j*=A,Z*=_,O.set([N,V,j,Z],0),B.set([NaN,NaN,NaN,NaN,N,V],0);for(let at=4;at<R;at+=2){const F=O[at]=C[at]*A,$=O[at+1]=C[at+1]*_;B.set(wt.createBezierPoints(N,V,j,Z,F,$),(at-2)*3),[N,V,j,Z]=[j,Z,F,$]}}if(b.length===0)return null;const w=u?new cg:new yc;return w.build(b,e,n,1,r,u?0:m,o),{outline:w,newCurves:S,areContours:u,thickness:m,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:o}){let c=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let R=2,O=C.length;R<O;R++){const B=C[R]-C[R-2];c=Math.min(c,B),u=Math.max(u,B)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,m=Xu+Il*p,b=new Uint32Array(m);let v=0;b[v++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=r,b[v++]=o,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(n??0)),b[v++]=p,b[v++]=f.BYTES_PER_ELEMENT;for(const C of t)b[v++]=C.length-2,b[v++]=C[0],b[v++]=C[1];const A=new CompressionStream("deflate-raw"),_=A.writable.getWriter();await _.ready,_.write(b);const S=f.prototype.constructor;for(const C of t){const R=new S(C.length-2);for(let O=2,B=C.length;O<B;O++)R[O-2]=C[O]-C[O-2];_.write(R)}_.close();const w=await new Response(A.readable).arrayBuffer();return new Uint8Array(w).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const C of n)c||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),c.set(C,u),u+=C.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],m=d[3],b=d[4]===0,v=d[5],A=d[6],_=d[7],S=[],w=(Xu+Il*A)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(_){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(c.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(c.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(c.buffer,w);break}u=0;for(let C=0;C<A;C++){const R=d[Il*C+Xu],O=new Float32Array(R+2);S.push(O);for(let B=0;B<Il-1;B++)O[B]=d[Il*C+Xu+B+1];for(let B=0;B<R;B++)O[B+2]=O[B]+x[u++]}return{areContours:b,thickness:v,outlines:S,width:p,height:m}}catch(e){return Ft(`decompressSignature: ${e}`),null}}}class Am extends X_{constructor(){super(),super.updateProperties({fill:Lt._defaultLineColor,"stroke-width":0})}clone(){const t=new Am;return t.updateAll(this),t}}class wm extends Gh{constructor(t){super(t),super.updateProperties({stroke:Lt._defaultLineColor,"stroke-width":1})}clone(){const t=new wm(this._viewParameters);return t.updateAll(this),t}}class ns extends ie{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=Ut.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Lt.initialize(t,e),this._defaultDrawingOptions=new Am,this._defaultDrawnSignatureOptions=new wm(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Pt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:o,areContours:c,description:u,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:p,pageHeight:m},rotation:b}=this.parent.viewport,v=eo.processDrawnLines({lines:r,pageWidth:p,pageHeight:m,rotation:b,innerMargin:ns._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(v,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:r,height:o}=this.#n,c=Math.max(r,o),u=eo.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:n,width:r,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,r){const{x:o,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof cg,this.description=n;let d;this.#t?d=ns.getDefaultDrawingOptions():(d=ns._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return eo.process(t,e,n,r,ns._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return eo.extractContoursFromText(t,e,n,r,o,ns._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return eo.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:ns._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=ns.getDefaultDrawingOptions():(this._drawingOptions=ns._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:e,points:n},o.uuid=this.#i,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,n,r,o,c){return c.areContours?cg.deserialize(t,e,n,r,o,c):yc.deserialize(t,e,n,r,o,c)}static async deserialize(t,e,n){const r=await super.deserialize(t,e,n);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class sx extends Lt{#t=null;#e=null;#n=null;#i=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Ut.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Lt.initialize(t,e)}static isHandlingMimeForPasting(t){return tg.includes(t)}static paste(t,e){e.pasteEditor({mode:Ut.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await n.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#h(n,!0)).finally(()=>this.#f());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=tg.join(",");const e=this._uiManager._signal;this.#n=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,r&&(this.#t=r),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:e,height:n}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)e=this.width*r,n=this.height*o;else if(e>c*r||n>c*o){const d=Math.min(c*r/e,c*o/n);e*=d,n*=d}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/r,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new os;let u=this.#t,d=r,f=o,p=null;if(e){if(r>e||o>e){const B=Math.min(e/r,e/o);d=Math.floor(r*B),f=Math.floor(o*B)}p=document.createElement("canvas");const b=p.width=Math.ceil(d*c.sx),v=p.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(b,v));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let _="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":xE.isDarkMode&&(_="#8f8f9d",S="#42414d");const w=15,x=w*c.sx,C=w*c.sy,R=new OffscreenCanvas(x*2,C*2),O=R.getContext("2d");O.fillStyle=_,O.fillRect(0,0,x*2,C*2),O.fillStyle=S,O.fillRect(0,0,x,C),O.fillRect(x,C,x,C),A.fillStyle=A.createPattern(R,"repeat"),A.fillRect(0,0,b,v),A.drawImage(u,0,0,u.width,u.height,0,0,b,v)}let m=null;if(n){let b,v;if(c.symmetric&&u.width<t&&u.height<t)b=u.width,v=u.height;else if(u=this.#t,r>t||o>t){const S=Math.min(t/r,t/o);b=Math.floor(r*S),v=Math.floor(o*S),this.#l||(u=this.#u(b,v))}const _=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});_.drawImage(u,0,0,u.width,u.height,0,0,b,v),m={width:b,height:v,data:_.getImageData(0,0,b,v).data}}return{canvas:p,width:d,height:f,imageData:m}}#u(t,e){const{width:n,height:r}=this.#t;let o=n,c=r,u=this.#t;for(;o>2*t||c>2*e;){const d=o,f=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(o,c);p.getContext("2d").drawImage(u,0,0,d,f,0,0,o,c),u=p.transferToImageBitmap()}return u}#p(){const[t,e]=this.parentDimensions,{width:n,height:r}=this,o=new os,c=Math.ceil(n*t*o.sx),u=Math.ceil(r*e*o.sy),d=this.#s;if(!d||d.width===c&&d.height===u)return;d.width=c,d.height=u;const f=this.#l?this.#t:this.#u(c,u),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,r=Math.round(this.width*e*xo.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*xo.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let r=null,o=!1;if(t instanceof G_){const{data:{rect:_,rotation:S,id:w,structParent:x,popupRef:C,richText:R,contentsObj:O,creationDate:B,modificationDate:N},container:V,parent:{page:{pageNumber:j}},canvas:Z}=t;let at,F;Z?(delete t.canvas,{id:at,bitmap:F}=n.imageManager.getFromCanvas(V.id,Z),Z.remove()):(o=!0,t._hasNoCanvas=!0);const $=(await e._structTree.getAriaAttributes(`${no}${w}`))?.get("aria-label")||"";r=t={annotationType:Ut.STAMP,bitmapId:at,bitmap:F,pageIndex:j-1,rect:_.slice(0),rotation:S,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:x,popupRef:C,richText:R,comment:O?.str||null,creationDate:B,modificationDate:N}}const c=await super.deserialize(t,e,n),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:p,isSvg:m,accessibilityData:b}=t;o?(n.addMissingCanvas(t.id,c),c.#o=!0):p&&n.imageManager.isValidId(p)?(c.#e=p,d&&(c.#t=d)):c.#i=f,c.#l=m;const[v,A]=c.pageDimensions;return c.width=(u[2]-u[0])/v,c.height=(u[3]-u[1])/A,b&&(c.altTextData=b),c._initialData=r,t.comment&&c.setCommentData(t),c.#d=!!r,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(n);return u.isSame?null:(u.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const c=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const u=e.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return n}#v(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,r=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Rs{#t;#e=!1;#n=null;#i=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([fi,_m,sx,je,ns].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:f,l10n:p}){const m=[...Rs.#p.values()];if(!Rs._initialized){Rs._initialized=!0;for(const b of m)b.initialize(p,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=e,this.div=n,this.#t=o,this.#n=c,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Ut.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case Ut.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ut.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ut.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Ut.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of Rs.#p.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#n;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,p=this.#g;if(f-p>500){this.#g=f;return}this.#g=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const b=document.elementsFromPoint(u,d);if(m.toggle("getElements",!1),!this.div.contains(b[0]))return;let v;const A=new RegExp(`^${tc}[0-9]+$`);for(const S of b)if(A.test(S.id)){v=S.id;break}if(!v)return;const _=this.#r.get(v);_?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),_.dblclick(o))},{signal:r,capture:!0})}const t=this.#n,e=[];if(t){const r=new Map,o=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){e.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of Rs.#p.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:n}=ai.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),je.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),Lt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return Rs.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:r}=this.#S(),o=this.getNextId(),c=this.#T({parent:this,id:o,x:n,y:r,uiManager:this.#u,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await Rs.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),o=this.#T({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:t,y:e,width:n,height:r}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+r),f=(o+u)/2-t,p=(c+d)/2-e,[m,b]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:m,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=ai.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===Ut.STAMP||n===Ut.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Ut.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=ai.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,n){const r=this.#u.findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,sr(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,sr(this.div,{rotation:n}),e!==n)for(const r of this.#r.values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Si{#t=null;#e=new Map;#n=new Map;static#i=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Pt(this,"_svgFactory",new oh)}static#a(t,[e,n,r,o]){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#r(){const t=Si._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const n=Si._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Si._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r}#o(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)}draw(t,e=!1,n=!1){const r=Si.#i++,o=this.#r(),c=Si._svgFactory.createElement("defs");o.append(c);const u=Si._svgFactory.createElement("path");c.append(u);const d=`path_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(r,u);const f=n?this.#s(c,d):null,p=Si._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=Si.#i++,r=this.#r(),o=Si._svgFactory.createElement("defs");r.append(o);const c=Si._svgFactory.createElement("path");o.append(c);const u=`path_${n}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const m=Si._svgFactory.createElement("mask");o.append(m),d=`mask_${n}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const b=Si._svgFactory.createElement("rect");m.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=Si._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=Si._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(n,r),n}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:r,rootClass:o,path:c}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(n&&this.#o(u,n),r&&Si.#a(u,r),o){const{classList:d}=u;for(const[f,p]of Object.entries(o))d.toggle(f,p)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:og};globalThis.pdfjsLib={AbortException:_a,AnnotationEditorLayer:Rs,AnnotationEditorParamsType:Wt,AnnotationEditorType:Ut,AnnotationEditorUIManager:Aa,AnnotationLayer:vm,AnnotationMode:ga,AnnotationType:$e,applyOpacity:kE,build:NT,ColorPicker:Ln,createValidAbsoluteUrl:u_,CSSConstants:CE,DOMSVGFactory:oh,DrawLayer:Si,FeatureTest:ai,fetchData:fc,findContrastColor:ME,getDocument:N_,getFilenameFromUrl:AE,getPdfFilenameFromUrl:wE,getRGB:gc,getUuid:d_,getXfaPageViewport:EE,GlobalWorkerOptions:ho,ImageKind:Wu,InvalidPDFException:Qp,isDataScheme:zh,isPdfFile:cm,isValidExplicitDest:UE,MathClamp:Ei,noContextMenu:Bn,normalizeUnicode:vE,OPS:ec,OutputScale:os,PagesMapper:ne,PasswordResponses:cE,PDFDataRangeTransport:B_,PDFDateString:Jp,PDFWorker:nc,PermissionFlag:lE,PixelsPerInch:xo,RenderingCancelledException:lm,renderRichText:p_,ResponseException:ah,setLayerDimensions:sr,shadow:Pt,SignatureExtractor:eo,stopEvent:Pe,SupportedImageMimeTypes:tg,TextLayer:an,TouchManager:Fh,updateUrlHash:h_,Util:vt,VerbosityLevel:Rh,version:P_,XfaLayer:f_};function Yu(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dp={exports:{}};var cv;function ax(){return cv||(cv=1,(function(s,t){(function(e){s.exports=e()})(function(){return(function e(n,r,o){function c(f,p){if(!r[f]){if(!n[f]){var m=typeof Yu=="function"&&Yu;if(!p&&m)return m(f,!0);if(u)return u(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var v=r[f]={exports:{}};n[f][0].call(v.exports,function(A){var _=n[f][1][A];return c(_||A)},v,v.exports,e,n,r,o)}return r[f].exports}for(var u=typeof Yu=="function"&&Yu,d=0;d<o.length;d++)c(o[d]);return c})({1:[function(e,n,r){var o=e("./utils"),c=e("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(d){for(var f,p,m,b,v,A,_,S=[],w=0,x=d.length,C=x,R=o.getTypeOf(d)!=="string";w<d.length;)C=x-w,m=R?(f=d[w++],p=w<x?d[w++]:0,w<x?d[w++]:0):(f=d.charCodeAt(w++),p=w<x?d.charCodeAt(w++):0,w<x?d.charCodeAt(w++):0),b=f>>2,v=(3&f)<<4|p>>4,A=1<C?(15&p)<<2|m>>6:64,_=2<C?63&m:64,S.push(u.charAt(b)+u.charAt(v)+u.charAt(A)+u.charAt(_));return S.join("")},r.decode=function(d){var f,p,m,b,v,A,_=0,S=0,w="data:";if(d.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var x,C=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===u.charAt(64)&&C--,d.charAt(d.length-2)===u.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=c.uint8array?new Uint8Array(0|C):new Array(0|C);_<d.length;)f=u.indexOf(d.charAt(_++))<<2|(b=u.indexOf(d.charAt(_++)))>>4,p=(15&b)<<4|(v=u.indexOf(d.charAt(_++)))>>2,m=(3&v)<<6|(A=u.indexOf(d.charAt(_++))),x[S++]=f,v!==64&&(x[S++]=p),A!==64&&(x[S++]=m);return x}},{"./support":30,"./utils":32}],2:[function(e,n,r){var o=e("./external"),c=e("./stream/DataWorker"),u=e("./stream/Crc32Probe"),d=e("./stream/DataLengthProbe");function f(p,m,b,v,A){this.compressedSize=p,this.uncompressedSize=m,this.crc32=b,this.compression=v,this.compressedContent=A}f.prototype={getContentWorker:function(){var p=new c(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),m=this;return p.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new c(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(p,m,b){return p.pipe(new u).pipe(new d("uncompressedSize")).pipe(m.compressWorker(b)).pipe(new d("compressedSize")).withStreamInfo("compression",m)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,r){var o=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,r){var o=e("./utils"),c=(function(){for(var u,d=[],f=0;f<256;f++){u=f;for(var p=0;p<8;p++)u=1&u?3988292384^u>>>1:u>>>1;d[f]=u}return d})();n.exports=function(u,d){return u!==void 0&&u.length?o.getTypeOf(u)!=="string"?(function(f,p,m,b){var v=c,A=b+m;f^=-1;for(var _=b;_<A;_++)f=f>>>8^v[255&(f^p[_])];return-1^f})(0|d,u,u.length,0):(function(f,p,m,b){var v=c,A=b+m;f^=-1;for(var _=b;_<A;_++)f=f>>>8^v[255&(f^p.charCodeAt(_))];return-1^f})(0|d,u,u.length,0):0}},{"./utils":32}],5:[function(e,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,n,r){var o=null;o=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:o}},{lie:37}],7:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=e("pako"),u=e("./utils"),d=e("./stream/GenericWorker"),f=o?"uint8array":"array";function p(m,b){d.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=b,this.meta={}}r.magic="\b\0",u.inherits(p,d),p.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,m.data),!1)},p.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(b){m.push({data:b,meta:m.meta})}},r.compressWorker=function(m){return new p("Deflate",m)},r.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,r){function o(v,A){var _,S="";for(_=0;_<A;_++)S+=String.fromCharCode(255&v),v>>>=8;return S}function c(v,A,_,S,w,x){var C,R,O=v.file,B=v.compression,N=x!==f.utf8encode,V=u.transformTo("string",x(O.name)),j=u.transformTo("string",f.utf8encode(O.name)),Z=O.comment,at=u.transformTo("string",x(Z)),F=u.transformTo("string",f.utf8encode(Z)),$=j.length!==O.name.length,k=F.length!==Z.length,tt="",U="",H="",ct=O.dir,st=O.date,mt={crc32:0,compressedSize:0,uncompressedSize:0};A&&!_||(mt.crc32=v.crc32,mt.compressedSize=v.compressedSize,mt.uncompressedSize=v.uncompressedSize);var M=0;A&&(M|=8),N||!$&&!k||(M|=2048);var L=0,J=0;ct&&(L|=16),w==="UNIX"?(J=798,L|=(function(rt,_t){var At=rt;return rt||(At=_t?16893:33204),(65535&At)<<16})(O.unixPermissions,ct)):(J=20,L|=(function(rt){return 63&(rt||0)})(O.dosPermissions)),C=st.getUTCHours(),C<<=6,C|=st.getUTCMinutes(),C<<=5,C|=st.getUTCSeconds()/2,R=st.getUTCFullYear()-1980,R<<=4,R|=st.getUTCMonth()+1,R<<=5,R|=st.getUTCDate(),$&&(U=o(1,1)+o(p(V),4)+j,tt+="up"+o(U.length,2)+U),k&&(H=o(1,1)+o(p(at),4)+F,tt+="uc"+o(H.length,2)+H);var it="";return it+=`
\0`,it+=o(M,2),it+=B.magic,it+=o(C,2),it+=o(R,2),it+=o(mt.crc32,4),it+=o(mt.compressedSize,4),it+=o(mt.uncompressedSize,4),it+=o(V.length,2),it+=o(tt.length,2),{fileRecord:m.LOCAL_FILE_HEADER+it+V+tt,dirRecord:m.CENTRAL_FILE_HEADER+o(J,2)+it+o(at.length,2)+"\0\0\0\0"+o(L,4)+o(S,4)+V+tt+at}}var u=e("../utils"),d=e("../stream/GenericWorker"),f=e("../utf8"),p=e("../crc32"),m=e("../signature");function b(v,A,_,S){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=A,this.zipPlatform=_,this.encodeFileName=S,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(b,d),b.prototype.push=function(v){var A=v.meta.percent||0,_=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,d.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:_?(A+100*(_-S-1))/_:100}}))},b.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var A=this.streamFiles&&!v.file.dir;if(A){var _=c(v,A,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(v){this.accumulate=!1;var A=this.streamFiles&&!v.file.dir,_=c(v,A,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),A)this.push({data:(function(S){return m.DATA_DESCRIPTOR+o(S.crc32,4)+o(S.compressedSize,4)+o(S.uncompressedSize,4)})(v),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var v=this.bytesWritten,A=0;A<this.dirRecords.length;A++)this.push({data:this.dirRecords[A],meta:{percent:100}});var _=this.bytesWritten-v,S=(function(w,x,C,R,O){var B=u.transformTo("string",O(R));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(w,2)+o(w,2)+o(x,4)+o(C,4)+o(B.length,2)+B})(this.dirRecords.length,_,v,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(v){this._sources.push(v);var A=this;return v.on("data",function(_){A.processChunk(_)}),v.on("end",function(){A.closedSource(A.previous.streamInfo),A._sources.length?A.prepareNextSource():A.end()}),v.on("error",function(_){A.error(_)}),this},b.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(v){var A=this._sources;if(!d.prototype.error.call(this,v))return!1;for(var _=0;_<A.length;_++)try{A[_].error(v)}catch{}return!0},b.prototype.lock=function(){d.prototype.lock.call(this);for(var v=this._sources,A=0;A<v.length;A++)v[A].lock()},n.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,r){var o=e("../compressions"),c=e("./ZipFileWorker");r.generateWorker=function(u,d,f){var p=new c(d.streamFiles,f,d.platform,d.encodeFileName),m=0;try{u.forEach(function(b,v){m++;var A=(function(x,C){var R=x||C,O=o[R];if(!O)throw new Error(R+" is not a valid compression method !");return O})(v.options.compression,d.compression),_=v.options.compressionOptions||d.compressionOptions||{},S=v.dir,w=v.date;v._compressWorker(A,_).withStreamInfo("file",{name:b,dir:S,date:w,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(p)}),p.entriesCount=m}catch(b){p.error(b)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new o;for(var u in this)typeof this[u]!="function"&&(c[u]=this[u]);return c}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(c,u){return new o().loadAsync(c,u)},o.external=e("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,r){var o=e("./utils"),c=e("./external"),u=e("./utf8"),d=e("./zipEntries"),f=e("./stream/Crc32Probe"),p=e("./nodejsUtils");function m(b){return new c.Promise(function(v,A){var _=b.decompressed.getContentWorker().pipe(new f);_.on("error",function(S){A(S)}).on("end",function(){_.streamInfo.crc32!==b.decompressed.crc32?A(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(b,v){var A=this;return v=o.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),p.isNode&&p.isStream(b)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",b,!0,v.optimizedBinaryString,v.base64).then(function(_){var S=new d(v);return S.load(_),S}).then(function(_){var S=[c.Promise.resolve(_)],w=_.files;if(v.checkCRC32)for(var x=0;x<w.length;x++)S.push(m(w[x]));return c.Promise.all(S)}).then(function(_){for(var S=_.shift(),w=S.files,x=0;x<w.length;x++){var C=w[x],R=C.fileNameStr,O=o.resolve(C.fileNameStr);A.file(O,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:v.createFolders}),C.dir||(A.file(O).unsafeOriginalName=R)}return S.zipComment.length&&(A.comment=S.zipComment),A})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,r){var o=e("../utils"),c=e("../stream/GenericWorker");function u(d,f){c.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(u,c),u.prototype._bindStream=function(d){var f=this;(this._stream=d).pause(),d.on("data",function(p){f.push({data:p,meta:{percent:0}})}).on("error",function(p){f.isPaused?this.generatedError=p:f.error(p)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,r){var o=e("readable-stream").Readable;function c(u,d,f){o.call(this,d),this._helper=u;var p=this;u.on("data",function(m,b){p.push(m)||p._helper.pause(),f&&f(b)}).on("error",function(m){p.emit("error",m)}).on("end",function(){p.push(null)})}e("../utils").inherits(c,o),c.prototype._read=function(){this._helper.resume()},n.exports=c},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,c);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,c)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var c=new Buffer(o);return c.fill(0),c},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,n,r){function o(O,B,N){var V,j=u.getTypeOf(B),Z=u.extend(N||{},p);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(O=w(O)),Z.createFolders&&(V=S(O))&&x.call(this,V,!0);var at=j==="string"&&Z.binary===!1&&Z.base64===!1;N&&N.binary!==void 0||(Z.binary=!at),(B instanceof m&&B.uncompressedSize===0||Z.dir||!B||B.length===0)&&(Z.base64=!1,Z.binary=!0,B="",Z.compression="STORE",j="string");var F=null;F=B instanceof m||B instanceof d?B:A.isNode&&A.isStream(B)?new _(O,B):u.prepareContent(O,B,Z.binary,Z.optimizedBinaryString,Z.base64);var $=new b(O,F,Z);this.files[O]=$}var c=e("./utf8"),u=e("./utils"),d=e("./stream/GenericWorker"),f=e("./stream/StreamHelper"),p=e("./defaults"),m=e("./compressedObject"),b=e("./zipObject"),v=e("./generate"),A=e("./nodejsUtils"),_=e("./nodejs/NodejsStreamInputAdapter"),S=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var B=O.lastIndexOf("/");return 0<B?O.substring(0,B):""},w=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},x=function(O,B){return B=B!==void 0?B:p.createFolders,O=w(O),this.files[O]||o.call(this,O,null,{dir:!0,createFolders:B}),this.files[O]};function C(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var B,N,V;for(B in this.files)V=this.files[B],(N=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&O(N,V)},filter:function(O){var B=[];return this.forEach(function(N,V){O(N,V)&&B.push(V)}),B},file:function(O,B,N){if(arguments.length!==1)return O=this.root+O,o.call(this,O,B,N),this;if(C(O)){var V=O;return this.filter(function(Z,at){return!at.dir&&V.test(Z)})}var j=this.files[this.root+O];return j&&!j.dir?j:null},folder:function(O){if(!O)return this;if(C(O))return this.filter(function(j,Z){return Z.dir&&O.test(j)});var B=this.root+O,N=x.call(this,B),V=this.clone();return V.root=N.name,V},remove:function(O){O=this.root+O;var B=this.files[O];if(B||(O.slice(-1)!=="/"&&(O+="/"),B=this.files[O]),B&&!B.dir)delete this.files[O];else for(var N=this.filter(function(j,Z){return Z.name.slice(0,O.length)===O}),V=0;V<N.length;V++)delete this.files[N[V].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var B,N={};try{if((N=u.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");u.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var V=N.comment||this.comment||"";B=v.generateWorker(this,N,V)}catch(j){(B=new d("error")).error(j)}return new f(B,N.type||"string",N.mimeType)},generateAsync:function(O,B){return this.generateInternalStream(O).accumulate(B)},generateNodeStream:function(O,B){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(B)}};n.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,r){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,r){var o=e("./DataReader");function c(u){o.call(this,u);for(var d=0;d<this.data.length;d++)u[d]=255&u[d]}e("../utils").inherits(c,o),c.prototype.byteAt=function(u){return this.data[this.zero+u]},c.prototype.lastIndexOfSignature=function(u){for(var d=u.charCodeAt(0),f=u.charCodeAt(1),p=u.charCodeAt(2),m=u.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===d&&this.data[b+1]===f&&this.data[b+2]===p&&this.data[b+3]===m)return b-this.zero;return-1},c.prototype.readAndCheckSignature=function(u){var d=u.charCodeAt(0),f=u.charCodeAt(1),p=u.charCodeAt(2),m=u.charCodeAt(3),b=this.readData(4);return d===b[0]&&f===b[1]&&p===b[2]&&m===b[3]},c.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=c},{"../utils":32,"./DataReader":18}],18:[function(e,n,r){var o=e("../utils");function c(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var d,f=0;for(this.checkOffset(u),d=this.index+u-1;d>=this.index;d--)f=(f<<8)+this.byteAt(d);return this.index+=u,f},readString:function(u){return o.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},n.exports=c},{"../utils":32}],19:[function(e,n,r){var o=e("./Uint8ArrayReader");function c(u){o.call(this,u)}e("../utils").inherits(c,o),c.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,r){var o=e("./DataReader");function c(u){o.call(this,u)}e("../utils").inherits(c,o),c.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},c.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},c.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},c.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=c},{"../utils":32,"./DataReader":18}],21:[function(e,n,r){var o=e("./ArrayReader");function c(u){o.call(this,u)}e("../utils").inherits(c,o),c.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,r){var o=e("../utils"),c=e("../support"),u=e("./ArrayReader"),d=e("./StringReader"),f=e("./NodeBufferReader"),p=e("./Uint8ArrayReader");n.exports=function(m){var b=o.getTypeOf(m);return o.checkSupport(b),b!=="string"||c.uint8array?b==="nodebuffer"?new f(m):c.uint8array?new p(o.transformTo("uint8array",m)):new u(o.transformTo("array",m)):new d(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,r){var o=e("./GenericWorker"),c=e("../utils");function u(d){o.call(this,"ConvertWorker to "+d),this.destType=d}c.inherits(u,o),u.prototype.processChunk=function(d){this.push({data:c.transformTo(this.destType,d.data),meta:d.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,r){var o=e("./GenericWorker"),c=e("../crc32");function u(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(u,o),u.prototype.processChunk=function(d){this.streamInfo.crc32=c(d.data,this.streamInfo.crc32||0),this.push(d)},n.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,r){var o=e("../utils"),c=e("./GenericWorker");function u(d){c.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}o.inherits(u,c),u.prototype.processChunk=function(d){if(d){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+d.data.length}c.prototype.processChunk.call(this,d)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,r){var o=e("../utils"),c=e("./GenericWorker");function u(d){c.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(p){f.dataIsReady=!0,f.data=p,f.max=p&&p.length||0,f.type=o.getTypeOf(p),f.isPaused||f._tickAndRepeat()},function(p){f.error(p)})}o.inherits(u,c),u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,f);break;case"uint8array":d=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":d=this.data.slice(this.index,f)}return this.index=f,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,r){function o(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,u){return this._listeners[c].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,u){if(this._listeners[c])for(var d=0;d<this._listeners[c].length;d++)this._listeners[c][d].call(this,u)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var u=this;return c.on("data",function(d){u.processChunk(d)}),c.on("end",function(){u.end()}),c.on("error",function(d){u.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,u){return this.extraStreamInfo[c]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},n.exports=o},{}],29:[function(e,n,r){var o=e("../utils"),c=e("./ConvertWorker"),u=e("./GenericWorker"),d=e("../base64"),f=e("../support"),p=e("../external"),m=null;if(f.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(A,_){return new p.Promise(function(S,w){var x=[],C=A._internalType,R=A._outputType,O=A._mimeType;A.on("data",function(B,N){x.push(B),_&&_(N)}).on("error",function(B){x=[],w(B)}).on("end",function(){try{var B=(function(N,V,j){switch(N){case"blob":return o.newBlob(o.transformTo("arraybuffer",V),j);case"base64":return d.encode(V);default:return o.transformTo(N,V)}})(R,(function(N,V){var j,Z=0,at=null,F=0;for(j=0;j<V.length;j++)F+=V[j].length;switch(N){case"string":return V.join("");case"array":return Array.prototype.concat.apply([],V);case"uint8array":for(at=new Uint8Array(F),j=0;j<V.length;j++)at.set(V[j],Z),Z+=V[j].length;return at;case"nodebuffer":return Buffer.concat(V);default:throw new Error("concat : unsupported type '"+N+"'")}})(C,x),O);S(B)}catch(N){w(N)}x=[]}).resume()})}function v(A,_,S){var w=_;switch(_){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=_,this._mimeType=S,o.checkSupport(w),this._worker=A.pipe(new c(w)),A.lock()}catch(x){this._worker=new u("error"),this._worker.error(x)}}v.prototype={accumulate:function(A){return b(this,A)},on:function(A,_){var S=this;return A==="data"?this._worker.on(A,function(w){_.call(S,w.data,w.meta)}):this._worker.on(A,function(){o.delay(_,arguments,S)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(A){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},A)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(o),r.blob=c.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,r){for(var o=e("./utils"),c=e("./support"),u=e("./nodejsUtils"),d=e("./stream/GenericWorker"),f=new Array(256),p=0;p<256;p++)f[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;f[254]=f[254]=1;function m(){d.call(this,"utf-8 decode"),this.leftOver=null}function b(){d.call(this,"utf-8 encode")}r.utf8encode=function(v){return c.nodebuffer?u.newBufferFrom(v,"utf-8"):(function(A){var _,S,w,x,C,R=A.length,O=0;for(x=0;x<R;x++)(64512&(S=A.charCodeAt(x)))==55296&&x+1<R&&(64512&(w=A.charCodeAt(x+1)))==56320&&(S=65536+(S-55296<<10)+(w-56320),x++),O+=S<128?1:S<2048?2:S<65536?3:4;for(_=c.uint8array?new Uint8Array(O):new Array(O),x=C=0;C<O;x++)(64512&(S=A.charCodeAt(x)))==55296&&x+1<R&&(64512&(w=A.charCodeAt(x+1)))==56320&&(S=65536+(S-55296<<10)+(w-56320),x++),S<128?_[C++]=S:(S<2048?_[C++]=192|S>>>6:(S<65536?_[C++]=224|S>>>12:(_[C++]=240|S>>>18,_[C++]=128|S>>>12&63),_[C++]=128|S>>>6&63),_[C++]=128|63&S);return _})(v)},r.utf8decode=function(v){return c.nodebuffer?o.transformTo("nodebuffer",v).toString("utf-8"):(function(A){var _,S,w,x,C=A.length,R=new Array(2*C);for(_=S=0;_<C;)if((w=A[_++])<128)R[S++]=w;else if(4<(x=f[w]))R[S++]=65533,_+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&_<C;)w=w<<6|63&A[_++],x--;1<x?R[S++]=65533:w<65536?R[S++]=w:(w-=65536,R[S++]=55296|w>>10&1023,R[S++]=56320|1023&w)}return R.length!==S&&(R.subarray?R=R.subarray(0,S):R.length=S),o.applyFromCharCode(R)})(v=o.transformTo(c.uint8array?"uint8array":"array",v))},o.inherits(m,d),m.prototype.processChunk=function(v){var A=o.transformTo(c.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var _=A;(A=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),A.set(_,this.leftOver.length)}else A=this.leftOver.concat(A);this.leftOver=null}var S=(function(x,C){var R;for((C=C||x.length)>x.length&&(C=x.length),R=C-1;0<=R&&(192&x[R])==128;)R--;return R<0||R===0?C:R+f[x[R]]>C?R:C})(A),w=A;S!==A.length&&(c.uint8array?(w=A.subarray(0,S),this.leftOver=A.subarray(S,A.length)):(w=A.slice(0,S),this.leftOver=A.slice(S,A.length))),this.push({data:r.utf8decode(w),meta:v.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=m,o.inherits(b,d),b.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,r){var o=e("./support"),c=e("./base64"),u=e("./nodejsUtils"),d=e("./external");function f(_){return _}function p(_,S){for(var w=0;w<_.length;++w)S[w]=255&_.charCodeAt(w);return S}e("setimmediate"),r.newBlob=function(_,S){r.checkSupport("blob");try{return new Blob([_],{type:S})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(_),w.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(_,S,w){var x=[],C=0,R=_.length;if(R<=w)return String.fromCharCode.apply(null,_);for(;C<R;)S==="array"||S==="nodebuffer"?x.push(String.fromCharCode.apply(null,_.slice(C,Math.min(C+w,R)))):x.push(String.fromCharCode.apply(null,_.subarray(C,Math.min(C+w,R)))),C+=w;return x.join("")},stringifyByChar:function(_){for(var S="",w=0;w<_.length;w++)S+=String.fromCharCode(_[w]);return S},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function b(_){var S=65536,w=r.getTypeOf(_),x=!0;if(w==="uint8array"?x=m.applyCanBeUsed.uint8array:w==="nodebuffer"&&(x=m.applyCanBeUsed.nodebuffer),x)for(;1<S;)try{return m.stringifyByChunk(_,w,S)}catch{S=Math.floor(S/2)}return m.stringifyByChar(_)}function v(_,S){for(var w=0;w<_.length;w++)S[w]=_[w];return S}r.applyFromCharCode=b;var A={};A.string={string:f,array:function(_){return p(_,new Array(_.length))},arraybuffer:function(_){return A.string.uint8array(_).buffer},uint8array:function(_){return p(_,new Uint8Array(_.length))},nodebuffer:function(_){return p(_,u.allocBuffer(_.length))}},A.array={string:b,array:f,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return u.newBufferFrom(_)}},A.arraybuffer={string:function(_){return b(new Uint8Array(_))},array:function(_){return v(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:f,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return u.newBufferFrom(new Uint8Array(_))}},A.uint8array={string:b,array:function(_){return v(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:f,nodebuffer:function(_){return u.newBufferFrom(_)}},A.nodebuffer={string:b,array:function(_){return v(_,new Array(_.length))},arraybuffer:function(_){return A.nodebuffer.uint8array(_).buffer},uint8array:function(_){return v(_,new Uint8Array(_.length))},nodebuffer:f},r.transformTo=function(_,S){if(S=S||"",!_)return S;r.checkSupport(_);var w=r.getTypeOf(S);return A[w][_](S)},r.resolve=function(_){for(var S=_.split("/"),w=[],x=0;x<S.length;x++){var C=S[x];C==="."||C===""&&x!==0&&x!==S.length-1||(C===".."?w.pop():w.push(C))}return w.join("/")},r.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":o.nodebuffer&&u.isBuffer(_)?"nodebuffer":o.uint8array&&_ instanceof Uint8Array?"uint8array":o.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(_){if(!o[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(_){var S,w,x="";for(w=0;w<(_||"").length;w++)x+="\\x"+((S=_.charCodeAt(w))<16?"0":"")+S.toString(16).toUpperCase();return x},r.delay=function(_,S,w){setImmediate(function(){_.apply(w||null,S||[])})},r.inherits=function(_,S){function w(){}w.prototype=S.prototype,_.prototype=new w},r.extend=function(){var _,S,w={};for(_=0;_<arguments.length;_++)for(S in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],S)&&w[S]===void 0&&(w[S]=arguments[_][S]);return w},r.prepareContent=function(_,S,w,x,C){return d.Promise.resolve(S).then(function(R){return o.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new d.Promise(function(O,B){var N=new FileReader;N.onload=function(V){O(V.target.result)},N.onerror=function(V){B(V.target.error)},N.readAsArrayBuffer(R)}):R}).then(function(R){var O=r.getTypeOf(R);return O?(O==="arraybuffer"?R=r.transformTo("uint8array",R):O==="string"&&(C?R=c.decode(R):w&&x!==!0&&(R=(function(B){return p(B,o.uint8array?new Uint8Array(B.length):new Array(B.length))})(R))),R):d.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,r){var o=e("./reader/readerFor"),c=e("./utils"),u=e("./signature"),d=e("./zipEntry"),f=e("./support");function p(m){this.files=[],this.loadOptions=m}p.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(b)+", expected "+c.pretty(m)+")")}},isSignature:function(m,b){var v=this.reader.index;this.reader.setIndex(m);var A=this.reader.readString(4)===b;return this.reader.setIndex(v),A},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",v=c.transformTo(b,m);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,b,v,A=this.zip64EndOfCentralSize-44;0<A;)m=this.reader.readInt(2),b=this.reader.readInt(4),v=this.reader.readData(b),this.zip64ExtensibleData[m]={id:m,length:b,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,b;for(m=0;m<this.files.length;m++)b=this.files[m],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(m=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var b=m;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var A=b-v;if(0<A)this.isSignature(b,u.CENTRAL_FILE_HEADER)||(this.reader.zero=A);else if(A<0)throw new Error("Corrupted zip: missing "+Math.abs(A)+" bytes.")},prepareReader:function(m){this.reader=o(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,r){var o=e("./reader/readerFor"),c=e("./utils"),u=e("./compressedObject"),d=e("./crc32"),f=e("./utf8"),p=e("./compressions"),m=e("./support");function b(v,A){this.options=v,this.loadOptions=A}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var A,_;if(v.skip(22),this.fileNameLength=v.readInt(2),_=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((A=(function(S){for(var w in p)if(Object.prototype.hasOwnProperty.call(p,w)&&p[w].magic===S)return p[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,A,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var A=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(A),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=o(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var A,_,S,w=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<w;)A=v.readInt(2),_=v.readInt(2),S=v.readData(_),this.extraFields[A]={id:A,length:_,value:S};v.setIndex(w)},handleUTF8:function(){var v=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var A=this.findExtraFieldUnicodePath();if(A!==null)this.fileNameStr=A;else{var _=c.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var w=c.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var A=o(v.value);return A.readInt(1)!==1||d(this.fileName)!==A.readInt(4)?null:f.utf8decode(A.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var A=o(v.value);return A.readInt(1)!==1||d(this.fileComment)!==A.readInt(4)?null:f.utf8decode(A.readData(v.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,r){function o(A,_,S){this.name=A,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=_,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var c=e("./stream/StreamHelper"),u=e("./stream/DataWorker"),d=e("./utf8"),f=e("./compressedObject"),p=e("./stream/GenericWorker");o.prototype={internalStream:function(A){var _=null,S="string";try{if(!A)throw new Error("No output type specified.");var w=(S=A.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),_=this._decompressWorker();var x=!this._dataBinary;x&&!w&&(_=_.pipe(new d.Utf8EncodeWorker)),!x&&w&&(_=_.pipe(new d.Utf8DecodeWorker))}catch(C){(_=new p("error")).error(C)}return new c(_,S,"")},async:function(A,_){return this.internalStream(A).accumulate(_)},nodeStream:function(A,_){return this.internalStream(A||"nodebuffer").toNodejsStream(_)},_compressWorker:function(A,_){if(this._data instanceof f&&this._data.compression.magic===A.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new d.Utf8EncodeWorker)),f.createWorkerFrom(S,A,_)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof p?this._data:new u(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<m.length;v++)o.prototype[m[v]]=b;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(o){var c,u,d=o.MutationObserver||o.WebKitMutationObserver;if(d){var f=0,p=new d(A),m=o.document.createTextNode("");p.observe(m,{characterData:!0}),c=function(){m.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)c="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var _=o.document.createElement("script");_.onreadystatechange=function(){A(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},o.document.documentElement.appendChild(_)}:function(){setTimeout(A,0)};else{var b=new o.MessageChannel;b.port1.onmessage=A,c=function(){b.port2.postMessage(0)}}var v=[];function A(){var _,S;u=!0;for(var w=v.length;w;){for(S=v,v=[],_=-1;++_<w;)S[_]();w=v.length}u=!1}n.exports=function(_){v.push(_)!==1||u||c()}}).call(this,typeof Ru<"u"?Ru:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,r){var o=e("immediate");function c(){}var u={},d=["REJECTED"],f=["FULFILLED"],p=["PENDING"];function m(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,w!==c&&_(this,w)}function b(w,x,C){this.promise=w,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function v(w,x,C){o(function(){var R;try{R=x(C)}catch(O){return u.reject(w,O)}R===w?u.reject(w,new TypeError("Cannot resolve promise with itself")):u.resolve(w,R)})}function A(w){var x=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof x=="function")return function(){x.apply(w,arguments)}}function _(w,x){var C=!1;function R(N){C||(C=!0,u.reject(w,N))}function O(N){C||(C=!0,u.resolve(w,N))}var B=S(function(){x(O,R)});B.status==="error"&&R(B.value)}function S(w,x){var C={};try{C.value=w(x),C.status="success"}catch(R){C.status="error",C.value=R}return C}(n.exports=m).prototype.finally=function(w){if(typeof w!="function")return this;var x=this.constructor;return this.then(function(C){return x.resolve(w()).then(function(){return C})},function(C){return x.resolve(w()).then(function(){throw C})})},m.prototype.catch=function(w){return this.then(null,w)},m.prototype.then=function(w,x){if(typeof w!="function"&&this.state===f||typeof x!="function"&&this.state===d)return this;var C=new this.constructor(c);return this.state!==p?v(C,this.state===f?w:x,this.outcome):this.queue.push(new b(C,w,x)),C},b.prototype.callFulfilled=function(w){u.resolve(this.promise,w)},b.prototype.otherCallFulfilled=function(w){v(this.promise,this.onFulfilled,w)},b.prototype.callRejected=function(w){u.reject(this.promise,w)},b.prototype.otherCallRejected=function(w){v(this.promise,this.onRejected,w)},u.resolve=function(w,x){var C=S(A,x);if(C.status==="error")return u.reject(w,C.value);var R=C.value;if(R)_(w,R);else{w.state=f,w.outcome=x;for(var O=-1,B=w.queue.length;++O<B;)w.queue[O].callFulfilled(x)}return w},u.reject=function(w,x){w.state=d,w.outcome=x;for(var C=-1,R=w.queue.length;++C<R;)w.queue[C].callRejected(x);return w},m.resolve=function(w){return w instanceof this?w:u.resolve(new this(c),w)},m.reject=function(w){var x=new this(c);return u.reject(x,w)},m.all=function(w){var x=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=w.length,R=!1;if(!C)return this.resolve([]);for(var O=new Array(C),B=0,N=-1,V=new this(c);++N<C;)j(w[N],N);return V;function j(Z,at){x.resolve(Z).then(function(F){O[at]=F,++B!==C||R||(R=!0,u.resolve(V,O))},function(F){R||(R=!0,u.reject(V,F))})}},m.race=function(w){var x=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=w.length,R=!1;if(!C)return this.resolve([]);for(var O=-1,B=new this(c);++O<C;)N=w[O],x.resolve(N).then(function(V){R||(R=!0,u.resolve(B,V))},function(V){R||(R=!0,u.reject(B,V))});var N;return B}},{immediate:36}],38:[function(e,n,r){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,r){var o=e("./zlib/deflate"),c=e("./utils/common"),u=e("./utils/strings"),d=e("./zlib/messages"),f=e("./zlib/zstream"),p=Object.prototype.toString,m=0,b=-1,v=0,A=8;function _(w){if(!(this instanceof _))return new _(w);this.options=c.assign({level:b,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},w||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var C=o.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(C!==m)throw new Error(d[C]);if(x.header&&o.deflateSetHeader(this.strm,x.header),x.dictionary){var R;if(R=typeof x.dictionary=="string"?u.string2buf(x.dictionary):p.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(C=o.deflateSetDictionary(this.strm,R))!==m)throw new Error(d[C]);this._dict_set=!0}}function S(w,x){var C=new _(x);if(C.push(w,!0),C.err)throw C.msg||d[C.err];return C.result}_.prototype.push=function(w,x){var C,R,O=this.strm,B=this.options.chunkSize;if(this.ended)return!1;R=x===~~x?x:x===!0?4:0,typeof w=="string"?O.input=u.string2buf(w):p.call(w)==="[object ArrayBuffer]"?O.input=new Uint8Array(w):O.input=w,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new c.Buf8(B),O.next_out=0,O.avail_out=B),(C=o.deflate(O,R))!==1&&C!==m)return this.onEnd(C),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(c.shrinkBuf(O.output,O.next_out))):this.onData(c.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&C!==1);return R===4?(C=o.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===m):R!==2||(this.onEnd(m),!(O.avail_out=0))},_.prototype.onData=function(w){this.chunks.push(w)},_.prototype.onEnd=function(w){w===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},r.Deflate=_,r.deflate=S,r.deflateRaw=function(w,x){return(x=x||{}).raw=!0,S(w,x)},r.gzip=function(w,x){return(x=x||{}).gzip=!0,S(w,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,r){var o=e("./zlib/inflate"),c=e("./utils/common"),u=e("./utils/strings"),d=e("./zlib/constants"),f=e("./zlib/messages"),p=e("./zlib/zstream"),m=e("./zlib/gzheader"),b=Object.prototype.toString;function v(_){if(!(this instanceof v))return new v(_);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},_||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||_&&_.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&(15&S.windowBits)==0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var w=o.inflateInit2(this.strm,S.windowBits);if(w!==d.Z_OK)throw new Error(f[w]);this.header=new m,o.inflateGetHeader(this.strm,this.header)}function A(_,S){var w=new v(S);if(w.push(_,!0),w.err)throw w.msg||f[w.err];return w.result}v.prototype.push=function(_,S){var w,x,C,R,O,B,N=this.strm,V=this.options.chunkSize,j=this.options.dictionary,Z=!1;if(this.ended)return!1;x=S===~~S?S:S===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof _=="string"?N.input=u.binstring2buf(_):b.call(_)==="[object ArrayBuffer]"?N.input=new Uint8Array(_):N.input=_,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new c.Buf8(V),N.next_out=0,N.avail_out=V),(w=o.inflate(N,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&j&&(B=typeof j=="string"?u.string2buf(j):b.call(j)==="[object ArrayBuffer]"?new Uint8Array(j):j,w=o.inflateSetDictionary(this.strm,B)),w===d.Z_BUF_ERROR&&Z===!0&&(w=d.Z_OK,Z=!1),w!==d.Z_STREAM_END&&w!==d.Z_OK)return this.onEnd(w),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&w!==d.Z_STREAM_END&&(N.avail_in!==0||x!==d.Z_FINISH&&x!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=u.utf8border(N.output,N.next_out),R=N.next_out-C,O=u.buf2string(N.output,C),N.next_out=R,N.avail_out=V-R,R&&c.arraySet(N.output,N.output,C,R,0),this.onData(O)):this.onData(c.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(Z=!0)}while((0<N.avail_in||N.avail_out===0)&&w!==d.Z_STREAM_END);return w===d.Z_STREAM_END&&(x=d.Z_FINISH),x===d.Z_FINISH?(w=o.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===d.Z_OK):x!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(N.avail_out=0))},v.prototype.onData=function(_){this.chunks.push(_)},v.prototype.onEnd=function(_){_===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},r.Inflate=v,r.inflate=A,r.inflateRaw=function(_,S){return(S=S||{}).raw=!0,A(_,S)},r.ungzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(d){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var p=f.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var m in p)p.hasOwnProperty(m)&&(d[m]=p[m])}}return d},r.shrinkBuf=function(d,f){return d.length===f?d:d.subarray?d.subarray(0,f):(d.length=f,d)};var c={arraySet:function(d,f,p,m,b){if(f.subarray&&d.subarray)d.set(f.subarray(p,p+m),b);else for(var v=0;v<m;v++)d[b+v]=f[p+v]},flattenChunks:function(d){var f,p,m,b,v,A;for(f=m=0,p=d.length;f<p;f++)m+=d[f].length;for(A=new Uint8Array(m),f=b=0,p=d.length;f<p;f++)v=d[f],A.set(v,b),b+=v.length;return A}},u={arraySet:function(d,f,p,m,b){for(var v=0;v<m;v++)d[b+v]=f[p+v]},flattenChunks:function(d){return[].concat.apply([],d)}};r.setTyped=function(d){d?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,c)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,u))},r.setTyped(o)},{}],42:[function(e,n,r){var o=e("./common"),c=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var d=new o.Buf8(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function p(m,b){if(b<65537&&(m.subarray&&u||!m.subarray&&c))return String.fromCharCode.apply(null,o.shrinkBuf(m,b));for(var v="",A=0;A<b;A++)v+=String.fromCharCode(m[A]);return v}d[254]=d[254]=1,r.string2buf=function(m){var b,v,A,_,S,w=m.length,x=0;for(_=0;_<w;_++)(64512&(v=m.charCodeAt(_)))==55296&&_+1<w&&(64512&(A=m.charCodeAt(_+1)))==56320&&(v=65536+(v-55296<<10)+(A-56320),_++),x+=v<128?1:v<2048?2:v<65536?3:4;for(b=new o.Buf8(x),_=S=0;S<x;_++)(64512&(v=m.charCodeAt(_)))==55296&&_+1<w&&(64512&(A=m.charCodeAt(_+1)))==56320&&(v=65536+(v-55296<<10)+(A-56320),_++),v<128?b[S++]=v:(v<2048?b[S++]=192|v>>>6:(v<65536?b[S++]=224|v>>>12:(b[S++]=240|v>>>18,b[S++]=128|v>>>12&63),b[S++]=128|v>>>6&63),b[S++]=128|63&v);return b},r.buf2binstring=function(m){return p(m,m.length)},r.binstring2buf=function(m){for(var b=new o.Buf8(m.length),v=0,A=b.length;v<A;v++)b[v]=m.charCodeAt(v);return b},r.buf2string=function(m,b){var v,A,_,S,w=b||m.length,x=new Array(2*w);for(v=A=0;v<w;)if((_=m[v++])<128)x[A++]=_;else if(4<(S=d[_]))x[A++]=65533,v+=S-1;else{for(_&=S===2?31:S===3?15:7;1<S&&v<w;)_=_<<6|63&m[v++],S--;1<S?x[A++]=65533:_<65536?x[A++]=_:(_-=65536,x[A++]=55296|_>>10&1023,x[A++]=56320|1023&_)}return p(x,A)},r.utf8border=function(m,b){var v;for((b=b||m.length)>m.length&&(b=m.length),v=b-1;0<=v&&(192&m[v])==128;)v--;return v<0||v===0?b:v+d[m[v]]>b?v:b}},{"./common":41}],43:[function(e,n,r){n.exports=function(o,c,u,d){for(var f=65535&o|0,p=o>>>16&65535|0,m=0;u!==0;){for(u-=m=2e3<u?2e3:u;p=p+(f=f+c[d++]|0)|0,--m;);f%=65521,p%=65521}return f|p<<16|0}},{}],44:[function(e,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,r){var o=(function(){for(var c,u=[],d=0;d<256;d++){c=d;for(var f=0;f<8;f++)c=1&c?3988292384^c>>>1:c>>>1;u[d]=c}return u})();n.exports=function(c,u,d,f){var p=o,m=f+d;c^=-1;for(var b=f;b<m;b++)c=c>>>8^p[255&(c^u[b])];return-1^c}},{}],46:[function(e,n,r){var o,c=e("../utils/common"),u=e("./trees"),d=e("./adler32"),f=e("./crc32"),p=e("./messages"),m=0,b=4,v=0,A=-2,_=-1,S=4,w=2,x=8,C=9,R=286,O=30,B=19,N=2*R+1,V=15,j=3,Z=258,at=Z+j+1,F=42,$=113,k=1,tt=2,U=3,H=4;function ct(T,ut){return T.msg=p[ut],ut}function st(T){return(T<<1)-(4<T?9:0)}function mt(T){for(var ut=T.length;0<=--ut;)T[ut]=0}function M(T){var ut=T.state,nt=ut.pending;nt>T.avail_out&&(nt=T.avail_out),nt!==0&&(c.arraySet(T.output,ut.pending_buf,ut.pending_out,nt,T.next_out),T.next_out+=nt,ut.pending_out+=nt,T.total_out+=nt,T.avail_out-=nt,ut.pending-=nt,ut.pending===0&&(ut.pending_out=0))}function L(T,ut){u._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,ut),T.block_start=T.strstart,M(T.strm)}function J(T,ut){T.pending_buf[T.pending++]=ut}function it(T,ut){T.pending_buf[T.pending++]=ut>>>8&255,T.pending_buf[T.pending++]=255&ut}function rt(T,ut){var nt,P,z=T.max_chain_length,X=T.strstart,dt=T.prev_length,ft=T.nice_match,W=T.strstart>T.w_size-at?T.strstart-(T.w_size-at):0,pt=T.window,yt=T.w_mask,gt=T.prev,Ot=T.strstart+Z,ce=pt[X+dt-1],Gt=pt[X+dt];T.prev_length>=T.good_match&&(z>>=2),ft>T.lookahead&&(ft=T.lookahead);do if(pt[(nt=ut)+dt]===Gt&&pt[nt+dt-1]===ce&&pt[nt]===pt[X]&&pt[++nt]===pt[X+1]){X+=2,nt++;do;while(pt[++X]===pt[++nt]&&pt[++X]===pt[++nt]&&pt[++X]===pt[++nt]&&pt[++X]===pt[++nt]&&pt[++X]===pt[++nt]&&pt[++X]===pt[++nt]&&pt[++X]===pt[++nt]&&pt[++X]===pt[++nt]&&X<Ot);if(P=Z-(Ot-X),X=Ot-Z,dt<P){if(T.match_start=ut,ft<=(dt=P))break;ce=pt[X+dt-1],Gt=pt[X+dt]}}while((ut=gt[ut&yt])>W&&--z!=0);return dt<=T.lookahead?dt:T.lookahead}function _t(T){var ut,nt,P,z,X,dt,ft,W,pt,yt,gt=T.w_size;do{if(z=T.window_size-T.lookahead-T.strstart,T.strstart>=gt+(gt-at)){for(c.arraySet(T.window,T.window,gt,gt,0),T.match_start-=gt,T.strstart-=gt,T.block_start-=gt,ut=nt=T.hash_size;P=T.head[--ut],T.head[ut]=gt<=P?P-gt:0,--nt;);for(ut=nt=gt;P=T.prev[--ut],T.prev[ut]=gt<=P?P-gt:0,--nt;);z+=gt}if(T.strm.avail_in===0)break;if(dt=T.strm,ft=T.window,W=T.strstart+T.lookahead,pt=z,yt=void 0,yt=dt.avail_in,pt<yt&&(yt=pt),nt=yt===0?0:(dt.avail_in-=yt,c.arraySet(ft,dt.input,dt.next_in,yt,W),dt.state.wrap===1?dt.adler=d(dt.adler,ft,yt,W):dt.state.wrap===2&&(dt.adler=f(dt.adler,ft,yt,W)),dt.next_in+=yt,dt.total_in+=yt,yt),T.lookahead+=nt,T.lookahead+T.insert>=j)for(X=T.strstart-T.insert,T.ins_h=T.window[X],T.ins_h=(T.ins_h<<T.hash_shift^T.window[X+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[X+j-1])&T.hash_mask,T.prev[X&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=X,X++,T.insert--,!(T.lookahead+T.insert<j)););}while(T.lookahead<at&&T.strm.avail_in!==0)}function At(T,ut){for(var nt,P;;){if(T.lookahead<at){if(_t(T),T.lookahead<at&&ut===m)return k;if(T.lookahead===0)break}if(nt=0,T.lookahead>=j&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+j-1])&T.hash_mask,nt=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),nt!==0&&T.strstart-nt<=T.w_size-at&&(T.match_length=rt(T,nt)),T.match_length>=j)if(P=u._tr_tally(T,T.strstart-T.match_start,T.match_length-j),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=j){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+j-1])&T.hash_mask,nt=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else P=u._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(P&&(L(T,!1),T.strm.avail_out===0))return k}return T.insert=T.strstart<j-1?T.strstart:j-1,ut===b?(L(T,!0),T.strm.avail_out===0?U:H):T.last_lit&&(L(T,!1),T.strm.avail_out===0)?k:tt}function Dt(T,ut){for(var nt,P,z;;){if(T.lookahead<at){if(_t(T),T.lookahead<at&&ut===m)return k;if(T.lookahead===0)break}if(nt=0,T.lookahead>=j&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+j-1])&T.hash_mask,nt=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=j-1,nt!==0&&T.prev_length<T.max_lazy_match&&T.strstart-nt<=T.w_size-at&&(T.match_length=rt(T,nt),T.match_length<=5&&(T.strategy===1||T.match_length===j&&4096<T.strstart-T.match_start)&&(T.match_length=j-1)),T.prev_length>=j&&T.match_length<=T.prev_length){for(z=T.strstart+T.lookahead-j,P=u._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-j),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=z&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+j-1])&T.hash_mask,nt=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=j-1,T.strstart++,P&&(L(T,!1),T.strm.avail_out===0))return k}else if(T.match_available){if((P=u._tr_tally(T,0,T.window[T.strstart-1]))&&L(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return k}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(P=u._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<j-1?T.strstart:j-1,ut===b?(L(T,!0),T.strm.avail_out===0?U:H):T.last_lit&&(L(T,!1),T.strm.avail_out===0)?k:tt}function xt(T,ut,nt,P,z){this.good_length=T,this.max_lazy=ut,this.nice_length=nt,this.max_chain=P,this.func=z}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*N),this.dyn_dtree=new c.Buf16(2*(2*O+1)),this.bl_tree=new c.Buf16(2*(2*B+1)),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(V+1),this.heap=new c.Buf16(2*R+1),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*R+1),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(T){var ut;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=w,(ut=T.state).pending=0,ut.pending_out=0,ut.wrap<0&&(ut.wrap=-ut.wrap),ut.status=ut.wrap?F:$,T.adler=ut.wrap===2?0:1,ut.last_flush=m,u._tr_init(ut),v):ct(T,A)}function oi(T){var ut=le(T);return ut===v&&(function(nt){nt.window_size=2*nt.w_size,mt(nt.head),nt.max_lazy_match=o[nt.level].max_lazy,nt.good_match=o[nt.level].good_length,nt.nice_match=o[nt.level].nice_length,nt.max_chain_length=o[nt.level].max_chain,nt.strstart=0,nt.block_start=0,nt.lookahead=0,nt.insert=0,nt.match_length=nt.prev_length=j-1,nt.match_available=0,nt.ins_h=0})(T.state),ut}function yi(T,ut,nt,P,z,X){if(!T)return A;var dt=1;if(ut===_&&(ut=6),P<0?(dt=0,P=-P):15<P&&(dt=2,P-=16),z<1||C<z||nt!==x||P<8||15<P||ut<0||9<ut||X<0||S<X)return ct(T,A);P===8&&(P=9);var ft=new ve;return(T.state=ft).strm=T,ft.wrap=dt,ft.gzhead=null,ft.w_bits=P,ft.w_size=1<<ft.w_bits,ft.w_mask=ft.w_size-1,ft.hash_bits=z+7,ft.hash_size=1<<ft.hash_bits,ft.hash_mask=ft.hash_size-1,ft.hash_shift=~~((ft.hash_bits+j-1)/j),ft.window=new c.Buf8(2*ft.w_size),ft.head=new c.Buf16(ft.hash_size),ft.prev=new c.Buf16(ft.w_size),ft.lit_bufsize=1<<z+6,ft.pending_buf_size=4*ft.lit_bufsize,ft.pending_buf=new c.Buf8(ft.pending_buf_size),ft.d_buf=1*ft.lit_bufsize,ft.l_buf=3*ft.lit_bufsize,ft.level=ut,ft.strategy=X,ft.method=nt,oi(T)}o=[new xt(0,0,0,0,function(T,ut){var nt=65535;for(nt>T.pending_buf_size-5&&(nt=T.pending_buf_size-5);;){if(T.lookahead<=1){if(_t(T),T.lookahead===0&&ut===m)return k;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var P=T.block_start+nt;if((T.strstart===0||T.strstart>=P)&&(T.lookahead=T.strstart-P,T.strstart=P,L(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-at&&(L(T,!1),T.strm.avail_out===0))return k}return T.insert=0,ut===b?(L(T,!0),T.strm.avail_out===0?U:H):(T.strstart>T.block_start&&(L(T,!1),T.strm.avail_out),k)}),new xt(4,4,8,4,At),new xt(4,5,16,8,At),new xt(4,6,32,32,At),new xt(4,4,16,16,Dt),new xt(8,16,32,32,Dt),new xt(8,16,128,128,Dt),new xt(8,32,128,256,Dt),new xt(32,128,258,1024,Dt),new xt(32,258,258,4096,Dt)],r.deflateInit=function(T,ut){return yi(T,ut,x,15,8,0)},r.deflateInit2=yi,r.deflateReset=oi,r.deflateResetKeep=le,r.deflateSetHeader=function(T,ut){return T&&T.state?T.state.wrap!==2?A:(T.state.gzhead=ut,v):A},r.deflate=function(T,ut){var nt,P,z,X;if(!T||!T.state||5<ut||ut<0)return T?ct(T,A):A;if(P=T.state,!T.output||!T.input&&T.avail_in!==0||P.status===666&&ut!==b)return ct(T,T.avail_out===0?-5:A);if(P.strm=T,nt=P.last_flush,P.last_flush=ut,P.status===F)if(P.wrap===2)T.adler=0,J(P,31),J(P,139),J(P,8),P.gzhead?(J(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),J(P,255&P.gzhead.time),J(P,P.gzhead.time>>8&255),J(P,P.gzhead.time>>16&255),J(P,P.gzhead.time>>24&255),J(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),J(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(J(P,255&P.gzhead.extra.length),J(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(T.adler=f(T.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(J(P,0),J(P,0),J(P,0),J(P,0),J(P,0),J(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),J(P,3),P.status=$);else{var dt=x+(P.w_bits-8<<4)<<8;dt|=(2<=P.strategy||P.level<2?0:P.level<6?1:P.level===6?2:3)<<6,P.strstart!==0&&(dt|=32),dt+=31-dt%31,P.status=$,it(P,dt),P.strstart!==0&&(it(P,T.adler>>>16),it(P,65535&T.adler)),T.adler=1}if(P.status===69)if(P.gzhead.extra){for(z=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>z&&(T.adler=f(T.adler,P.pending_buf,P.pending-z,z)),M(T),z=P.pending,P.pending!==P.pending_buf_size));)J(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>z&&(T.adler=f(T.adler,P.pending_buf,P.pending-z,z)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(P.status===73)if(P.gzhead.name){z=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>z&&(T.adler=f(T.adler,P.pending_buf,P.pending-z,z)),M(T),z=P.pending,P.pending===P.pending_buf_size)){X=1;break}X=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,J(P,X)}while(X!==0);P.gzhead.hcrc&&P.pending>z&&(T.adler=f(T.adler,P.pending_buf,P.pending-z,z)),X===0&&(P.gzindex=0,P.status=91)}else P.status=91;if(P.status===91)if(P.gzhead.comment){z=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>z&&(T.adler=f(T.adler,P.pending_buf,P.pending-z,z)),M(T),z=P.pending,P.pending===P.pending_buf_size)){X=1;break}X=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,J(P,X)}while(X!==0);P.gzhead.hcrc&&P.pending>z&&(T.adler=f(T.adler,P.pending_buf,P.pending-z,z)),X===0&&(P.status=103)}else P.status=103;if(P.status===103&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&M(T),P.pending+2<=P.pending_buf_size&&(J(P,255&T.adler),J(P,T.adler>>8&255),T.adler=0,P.status=$)):P.status=$),P.pending!==0){if(M(T),T.avail_out===0)return P.last_flush=-1,v}else if(T.avail_in===0&&st(ut)<=st(nt)&&ut!==b)return ct(T,-5);if(P.status===666&&T.avail_in!==0)return ct(T,-5);if(T.avail_in!==0||P.lookahead!==0||ut!==m&&P.status!==666){var ft=P.strategy===2?(function(W,pt){for(var yt;;){if(W.lookahead===0&&(_t(W),W.lookahead===0)){if(pt===m)return k;break}if(W.match_length=0,yt=u._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++,yt&&(L(W,!1),W.strm.avail_out===0))return k}return W.insert=0,pt===b?(L(W,!0),W.strm.avail_out===0?U:H):W.last_lit&&(L(W,!1),W.strm.avail_out===0)?k:tt})(P,ut):P.strategy===3?(function(W,pt){for(var yt,gt,Ot,ce,Gt=W.window;;){if(W.lookahead<=Z){if(_t(W),W.lookahead<=Z&&pt===m)return k;if(W.lookahead===0)break}if(W.match_length=0,W.lookahead>=j&&0<W.strstart&&(gt=Gt[Ot=W.strstart-1])===Gt[++Ot]&&gt===Gt[++Ot]&&gt===Gt[++Ot]){ce=W.strstart+Z;do;while(gt===Gt[++Ot]&&gt===Gt[++Ot]&&gt===Gt[++Ot]&&gt===Gt[++Ot]&&gt===Gt[++Ot]&&gt===Gt[++Ot]&&gt===Gt[++Ot]&&gt===Gt[++Ot]&&Ot<ce);W.match_length=Z-(ce-Ot),W.match_length>W.lookahead&&(W.match_length=W.lookahead)}if(W.match_length>=j?(yt=u._tr_tally(W,1,W.match_length-j),W.lookahead-=W.match_length,W.strstart+=W.match_length,W.match_length=0):(yt=u._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++),yt&&(L(W,!1),W.strm.avail_out===0))return k}return W.insert=0,pt===b?(L(W,!0),W.strm.avail_out===0?U:H):W.last_lit&&(L(W,!1),W.strm.avail_out===0)?k:tt})(P,ut):o[P.level].func(P,ut);if(ft!==U&&ft!==H||(P.status=666),ft===k||ft===U)return T.avail_out===0&&(P.last_flush=-1),v;if(ft===tt&&(ut===1?u._tr_align(P):ut!==5&&(u._tr_stored_block(P,0,0,!1),ut===3&&(mt(P.head),P.lookahead===0&&(P.strstart=0,P.block_start=0,P.insert=0))),M(T),T.avail_out===0))return P.last_flush=-1,v}return ut!==b?v:P.wrap<=0?1:(P.wrap===2?(J(P,255&T.adler),J(P,T.adler>>8&255),J(P,T.adler>>16&255),J(P,T.adler>>24&255),J(P,255&T.total_in),J(P,T.total_in>>8&255),J(P,T.total_in>>16&255),J(P,T.total_in>>24&255)):(it(P,T.adler>>>16),it(P,65535&T.adler)),M(T),0<P.wrap&&(P.wrap=-P.wrap),P.pending!==0?v:1)},r.deflateEnd=function(T){var ut;return T&&T.state?(ut=T.state.status)!==F&&ut!==69&&ut!==73&&ut!==91&&ut!==103&&ut!==$&&ut!==666?ct(T,A):(T.state=null,ut===$?ct(T,-3):v):A},r.deflateSetDictionary=function(T,ut){var nt,P,z,X,dt,ft,W,pt,yt=ut.length;if(!T||!T.state||(X=(nt=T.state).wrap)===2||X===1&&nt.status!==F||nt.lookahead)return A;for(X===1&&(T.adler=d(T.adler,ut,yt,0)),nt.wrap=0,yt>=nt.w_size&&(X===0&&(mt(nt.head),nt.strstart=0,nt.block_start=0,nt.insert=0),pt=new c.Buf8(nt.w_size),c.arraySet(pt,ut,yt-nt.w_size,nt.w_size,0),ut=pt,yt=nt.w_size),dt=T.avail_in,ft=T.next_in,W=T.input,T.avail_in=yt,T.next_in=0,T.input=ut,_t(nt);nt.lookahead>=j;){for(P=nt.strstart,z=nt.lookahead-(j-1);nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[P+j-1])&nt.hash_mask,nt.prev[P&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=P,P++,--z;);nt.strstart=P,nt.lookahead=j-1,_t(nt)}return nt.strstart+=nt.lookahead,nt.block_start=nt.strstart,nt.insert=nt.lookahead,nt.lookahead=0,nt.match_length=nt.prev_length=j-1,nt.match_available=0,T.next_in=ft,T.input=W,T.avail_in=dt,nt.wrap=X,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,r){n.exports=function(o,c){var u,d,f,p,m,b,v,A,_,S,w,x,C,R,O,B,N,V,j,Z,at,F,$,k,tt;u=o.state,d=o.next_in,k=o.input,f=d+(o.avail_in-5),p=o.next_out,tt=o.output,m=p-(c-o.avail_out),b=p+(o.avail_out-257),v=u.dmax,A=u.wsize,_=u.whave,S=u.wnext,w=u.window,x=u.hold,C=u.bits,R=u.lencode,O=u.distcode,B=(1<<u.lenbits)-1,N=(1<<u.distbits)-1;t:do{C<15&&(x+=k[d++]<<C,C+=8,x+=k[d++]<<C,C+=8),V=R[x&B];e:for(;;){if(x>>>=j=V>>>24,C-=j,(j=V>>>16&255)===0)tt[p++]=65535&V;else{if(!(16&j)){if((64&j)==0){V=R[(65535&V)+(x&(1<<j)-1)];continue e}if(32&j){u.mode=12;break t}o.msg="invalid literal/length code",u.mode=30;break t}Z=65535&V,(j&=15)&&(C<j&&(x+=k[d++]<<C,C+=8),Z+=x&(1<<j)-1,x>>>=j,C-=j),C<15&&(x+=k[d++]<<C,C+=8,x+=k[d++]<<C,C+=8),V=O[x&N];i:for(;;){if(x>>>=j=V>>>24,C-=j,!(16&(j=V>>>16&255))){if((64&j)==0){V=O[(65535&V)+(x&(1<<j)-1)];continue i}o.msg="invalid distance code",u.mode=30;break t}if(at=65535&V,C<(j&=15)&&(x+=k[d++]<<C,(C+=8)<j&&(x+=k[d++]<<C,C+=8)),v<(at+=x&(1<<j)-1)){o.msg="invalid distance too far back",u.mode=30;break t}if(x>>>=j,C-=j,(j=p-m)<at){if(_<(j=at-j)&&u.sane){o.msg="invalid distance too far back",u.mode=30;break t}if($=w,(F=0)===S){if(F+=A-j,j<Z){for(Z-=j;tt[p++]=w[F++],--j;);F=p-at,$=tt}}else if(S<j){if(F+=A+S-j,(j-=S)<Z){for(Z-=j;tt[p++]=w[F++],--j;);if(F=0,S<Z){for(Z-=j=S;tt[p++]=w[F++],--j;);F=p-at,$=tt}}}else if(F+=S-j,j<Z){for(Z-=j;tt[p++]=w[F++],--j;);F=p-at,$=tt}for(;2<Z;)tt[p++]=$[F++],tt[p++]=$[F++],tt[p++]=$[F++],Z-=3;Z&&(tt[p++]=$[F++],1<Z&&(tt[p++]=$[F++]))}else{for(F=p-at;tt[p++]=tt[F++],tt[p++]=tt[F++],tt[p++]=tt[F++],2<(Z-=3););Z&&(tt[p++]=tt[F++],1<Z&&(tt[p++]=tt[F++]))}break}}break}}while(d<f&&p<b);d-=Z=C>>3,x&=(1<<(C-=Z<<3))-1,o.next_in=d,o.next_out=p,o.avail_in=d<f?f-d+5:5-(d-f),o.avail_out=p<b?b-p+257:257-(p-b),u.hold=x,u.bits=C}},{}],49:[function(e,n,r){var o=e("../utils/common"),c=e("./adler32"),u=e("./crc32"),d=e("./inffast"),f=e("./inftrees"),p=1,m=2,b=0,v=-2,A=1,_=852,S=592;function w(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(F){var $;return F&&F.state?($=F.state,F.total_in=F.total_out=$.total=0,F.msg="",$.wrap&&(F.adler=1&$.wrap),$.mode=A,$.last=0,$.havedict=0,$.dmax=32768,$.head=null,$.hold=0,$.bits=0,$.lencode=$.lendyn=new o.Buf32(_),$.distcode=$.distdyn=new o.Buf32(S),$.sane=1,$.back=-1,b):v}function R(F){var $;return F&&F.state?(($=F.state).wsize=0,$.whave=0,$.wnext=0,C(F)):v}function O(F,$){var k,tt;return F&&F.state?(tt=F.state,$<0?(k=0,$=-$):(k=1+($>>4),$<48&&($&=15)),$&&($<8||15<$)?v:(tt.window!==null&&tt.wbits!==$&&(tt.window=null),tt.wrap=k,tt.wbits=$,R(F))):v}function B(F,$){var k,tt;return F?(tt=new x,(F.state=tt).window=null,(k=O(F,$))!==b&&(F.state=null),k):v}var N,V,j=!0;function Z(F){if(j){var $;for(N=new o.Buf32(512),V=new o.Buf32(32),$=0;$<144;)F.lens[$++]=8;for(;$<256;)F.lens[$++]=9;for(;$<280;)F.lens[$++]=7;for(;$<288;)F.lens[$++]=8;for(f(p,F.lens,0,288,N,0,F.work,{bits:9}),$=0;$<32;)F.lens[$++]=5;f(m,F.lens,0,32,V,0,F.work,{bits:5}),j=!1}F.lencode=N,F.lenbits=9,F.distcode=V,F.distbits=5}function at(F,$,k,tt){var U,H=F.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new o.Buf8(H.wsize)),tt>=H.wsize?(o.arraySet(H.window,$,k-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(tt<(U=H.wsize-H.wnext)&&(U=tt),o.arraySet(H.window,$,k-tt,U,H.wnext),(tt-=U)?(o.arraySet(H.window,$,k-tt,tt,0),H.wnext=tt,H.whave=H.wsize):(H.wnext+=U,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=U))),0}r.inflateReset=R,r.inflateReset2=O,r.inflateResetKeep=C,r.inflateInit=function(F){return B(F,15)},r.inflateInit2=B,r.inflate=function(F,$){var k,tt,U,H,ct,st,mt,M,L,J,it,rt,_t,At,Dt,xt,ve,le,oi,yi,T,ut,nt,P,z=0,X=new o.Buf8(4),dt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return v;(k=F.state).mode===12&&(k.mode=13),ct=F.next_out,U=F.output,mt=F.avail_out,H=F.next_in,tt=F.input,st=F.avail_in,M=k.hold,L=k.bits,J=st,it=mt,ut=b;t:for(;;)switch(k.mode){case A:if(k.wrap===0){k.mode=13;break}for(;L<16;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if(2&k.wrap&&M===35615){X[k.check=0]=255&M,X[1]=M>>>8&255,k.check=u(k.check,X,2,0),L=M=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&M)<<8)+(M>>8))%31){F.msg="incorrect header check",k.mode=30;break}if((15&M)!=8){F.msg="unknown compression method",k.mode=30;break}if(L-=4,T=8+(15&(M>>>=4)),k.wbits===0)k.wbits=T;else if(T>k.wbits){F.msg="invalid window size",k.mode=30;break}k.dmax=1<<T,F.adler=k.check=1,k.mode=512&M?10:12,L=M=0;break;case 2:for(;L<16;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if(k.flags=M,(255&k.flags)!=8){F.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){F.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=M>>8&1),512&k.flags&&(X[0]=255&M,X[1]=M>>>8&255,k.check=u(k.check,X,2,0)),L=M=0,k.mode=3;case 3:for(;L<32;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}k.head&&(k.head.time=M),512&k.flags&&(X[0]=255&M,X[1]=M>>>8&255,X[2]=M>>>16&255,X[3]=M>>>24&255,k.check=u(k.check,X,4,0)),L=M=0,k.mode=4;case 4:for(;L<16;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}k.head&&(k.head.xflags=255&M,k.head.os=M>>8),512&k.flags&&(X[0]=255&M,X[1]=M>>>8&255,k.check=u(k.check,X,2,0)),L=M=0,k.mode=5;case 5:if(1024&k.flags){for(;L<16;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}k.length=M,k.head&&(k.head.extra_len=M),512&k.flags&&(X[0]=255&M,X[1]=M>>>8&255,k.check=u(k.check,X,2,0)),L=M=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(st<(rt=k.length)&&(rt=st),rt&&(k.head&&(T=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),o.arraySet(k.head.extra,tt,H,rt,T)),512&k.flags&&(k.check=u(k.check,tt,rt,H)),st-=rt,H+=rt,k.length-=rt),k.length))break t;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(st===0)break t;for(rt=0;T=tt[H+rt++],k.head&&T&&k.length<65536&&(k.head.name+=String.fromCharCode(T)),T&&rt<st;);if(512&k.flags&&(k.check=u(k.check,tt,rt,H)),st-=rt,H+=rt,T)break t}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(st===0)break t;for(rt=0;T=tt[H+rt++],k.head&&T&&k.length<65536&&(k.head.comment+=String.fromCharCode(T)),T&&rt<st;);if(512&k.flags&&(k.check=u(k.check,tt,rt,H)),st-=rt,H+=rt,T)break t}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;L<16;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if(M!==(65535&k.check)){F.msg="header crc mismatch",k.mode=30;break}L=M=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),F.adler=k.check=0,k.mode=12;break;case 10:for(;L<32;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}F.adler=k.check=w(M),L=M=0,k.mode=11;case 11:if(k.havedict===0)return F.next_out=ct,F.avail_out=mt,F.next_in=H,F.avail_in=st,k.hold=M,k.bits=L,2;F.adler=k.check=1,k.mode=12;case 12:if($===5||$===6)break t;case 13:if(k.last){M>>>=7&L,L-=7&L,k.mode=27;break}for(;L<3;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}switch(k.last=1&M,L-=1,3&(M>>>=1)){case 0:k.mode=14;break;case 1:if(Z(k),k.mode=20,$!==6)break;M>>>=2,L-=2;break t;case 2:k.mode=17;break;case 3:F.msg="invalid block type",k.mode=30}M>>>=2,L-=2;break;case 14:for(M>>>=7&L,L-=7&L;L<32;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if((65535&M)!=(M>>>16^65535)){F.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&M,L=M=0,k.mode=15,$===6)break t;case 15:k.mode=16;case 16:if(rt=k.length){if(st<rt&&(rt=st),mt<rt&&(rt=mt),rt===0)break t;o.arraySet(U,tt,H,rt,ct),st-=rt,H+=rt,mt-=rt,ct+=rt,k.length-=rt;break}k.mode=12;break;case 17:for(;L<14;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if(k.nlen=257+(31&M),M>>>=5,L-=5,k.ndist=1+(31&M),M>>>=5,L-=5,k.ncode=4+(15&M),M>>>=4,L-=4,286<k.nlen||30<k.ndist){F.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;L<3;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}k.lens[dt[k.have++]]=7&M,M>>>=3,L-=3}for(;k.have<19;)k.lens[dt[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,nt={bits:k.lenbits},ut=f(0,k.lens,0,19,k.lencode,0,k.work,nt),k.lenbits=nt.bits,ut){F.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;xt=(z=k.lencode[M&(1<<k.lenbits)-1])>>>16&255,ve=65535&z,!((Dt=z>>>24)<=L);){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if(ve<16)M>>>=Dt,L-=Dt,k.lens[k.have++]=ve;else{if(ve===16){for(P=Dt+2;L<P;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if(M>>>=Dt,L-=Dt,k.have===0){F.msg="invalid bit length repeat",k.mode=30;break}T=k.lens[k.have-1],rt=3+(3&M),M>>>=2,L-=2}else if(ve===17){for(P=Dt+3;L<P;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}L-=Dt,T=0,rt=3+(7&(M>>>=Dt)),M>>>=3,L-=3}else{for(P=Dt+7;L<P;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}L-=Dt,T=0,rt=11+(127&(M>>>=Dt)),M>>>=7,L-=7}if(k.have+rt>k.nlen+k.ndist){F.msg="invalid bit length repeat",k.mode=30;break}for(;rt--;)k.lens[k.have++]=T}}if(k.mode===30)break;if(k.lens[256]===0){F.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,nt={bits:k.lenbits},ut=f(p,k.lens,0,k.nlen,k.lencode,0,k.work,nt),k.lenbits=nt.bits,ut){F.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,nt={bits:k.distbits},ut=f(m,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,nt),k.distbits=nt.bits,ut){F.msg="invalid distances set",k.mode=30;break}if(k.mode=20,$===6)break t;case 20:k.mode=21;case 21:if(6<=st&&258<=mt){F.next_out=ct,F.avail_out=mt,F.next_in=H,F.avail_in=st,k.hold=M,k.bits=L,d(F,it),ct=F.next_out,U=F.output,mt=F.avail_out,H=F.next_in,tt=F.input,st=F.avail_in,M=k.hold,L=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;xt=(z=k.lencode[M&(1<<k.lenbits)-1])>>>16&255,ve=65535&z,!((Dt=z>>>24)<=L);){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if(xt&&(240&xt)==0){for(le=Dt,oi=xt,yi=ve;xt=(z=k.lencode[yi+((M&(1<<le+oi)-1)>>le)])>>>16&255,ve=65535&z,!(le+(Dt=z>>>24)<=L);){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}M>>>=le,L-=le,k.back+=le}if(M>>>=Dt,L-=Dt,k.back+=Dt,k.length=ve,xt===0){k.mode=26;break}if(32&xt){k.back=-1,k.mode=12;break}if(64&xt){F.msg="invalid literal/length code",k.mode=30;break}k.extra=15&xt,k.mode=22;case 22:if(k.extra){for(P=k.extra;L<P;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}k.length+=M&(1<<k.extra)-1,M>>>=k.extra,L-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;xt=(z=k.distcode[M&(1<<k.distbits)-1])>>>16&255,ve=65535&z,!((Dt=z>>>24)<=L);){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if((240&xt)==0){for(le=Dt,oi=xt,yi=ve;xt=(z=k.distcode[yi+((M&(1<<le+oi)-1)>>le)])>>>16&255,ve=65535&z,!(le+(Dt=z>>>24)<=L);){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}M>>>=le,L-=le,k.back+=le}if(M>>>=Dt,L-=Dt,k.back+=Dt,64&xt){F.msg="invalid distance code",k.mode=30;break}k.offset=ve,k.extra=15&xt,k.mode=24;case 24:if(k.extra){for(P=k.extra;L<P;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}k.offset+=M&(1<<k.extra)-1,M>>>=k.extra,L-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){F.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(mt===0)break t;if(rt=it-mt,k.offset>rt){if((rt=k.offset-rt)>k.whave&&k.sane){F.msg="invalid distance too far back",k.mode=30;break}_t=rt>k.wnext?(rt-=k.wnext,k.wsize-rt):k.wnext-rt,rt>k.length&&(rt=k.length),At=k.window}else At=U,_t=ct-k.offset,rt=k.length;for(mt<rt&&(rt=mt),mt-=rt,k.length-=rt;U[ct++]=At[_t++],--rt;);k.length===0&&(k.mode=21);break;case 26:if(mt===0)break t;U[ct++]=k.length,mt--,k.mode=21;break;case 27:if(k.wrap){for(;L<32;){if(st===0)break t;st--,M|=tt[H++]<<L,L+=8}if(it-=mt,F.total_out+=it,k.total+=it,it&&(F.adler=k.check=k.flags?u(k.check,U,it,ct-it):c(k.check,U,it,ct-it)),it=mt,(k.flags?M:w(M))!==k.check){F.msg="incorrect data check",k.mode=30;break}L=M=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;L<32;){if(st===0)break t;st--,M+=tt[H++]<<L,L+=8}if(M!==(4294967295&k.total)){F.msg="incorrect length check",k.mode=30;break}L=M=0}k.mode=29;case 29:ut=1;break t;case 30:ut=-3;break t;case 31:return-4;default:return v}return F.next_out=ct,F.avail_out=mt,F.next_in=H,F.avail_in=st,k.hold=M,k.bits=L,(k.wsize||it!==F.avail_out&&k.mode<30&&(k.mode<27||$!==4))&&at(F,F.output,F.next_out,it-F.avail_out)?(k.mode=31,-4):(J-=F.avail_in,it-=F.avail_out,F.total_in+=J,F.total_out+=it,k.total+=it,k.wrap&&it&&(F.adler=k.check=k.flags?u(k.check,U,it,F.next_out-it):c(k.check,U,it,F.next_out-it)),F.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(J==0&&it===0||$===4)&&ut===b&&(ut=-5),ut)},r.inflateEnd=function(F){if(!F||!F.state)return v;var $=F.state;return $.window&&($.window=null),F.state=null,b},r.inflateGetHeader=function(F,$){var k;return F&&F.state?(2&(k=F.state).wrap)==0?v:((k.head=$).done=!1,b):v},r.inflateSetDictionary=function(F,$){var k,tt=$.length;return F&&F.state?(k=F.state).wrap!==0&&k.mode!==11?v:k.mode===11&&c(1,$,tt,0)!==k.check?-3:at(F,$,tt,tt)?(k.mode=31,-4):(k.havedict=1,b):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,r){var o=e("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(p,m,b,v,A,_,S,w){var x,C,R,O,B,N,V,j,Z,at=w.bits,F=0,$=0,k=0,tt=0,U=0,H=0,ct=0,st=0,mt=0,M=0,L=null,J=0,it=new o.Buf16(16),rt=new o.Buf16(16),_t=null,At=0;for(F=0;F<=15;F++)it[F]=0;for($=0;$<v;$++)it[m[b+$]]++;for(U=at,tt=15;1<=tt&&it[tt]===0;tt--);if(tt<U&&(U=tt),tt===0)return A[_++]=20971520,A[_++]=20971520,w.bits=1,0;for(k=1;k<tt&&it[k]===0;k++);for(U<k&&(U=k),F=st=1;F<=15;F++)if(st<<=1,(st-=it[F])<0)return-1;if(0<st&&(p===0||tt!==1))return-1;for(rt[1]=0,F=1;F<15;F++)rt[F+1]=rt[F]+it[F];for($=0;$<v;$++)m[b+$]!==0&&(S[rt[m[b+$]]++]=$);if(N=p===0?(L=_t=S,19):p===1?(L=c,J-=257,_t=u,At-=257,256):(L=d,_t=f,-1),F=k,B=_,ct=$=M=0,R=-1,O=(mt=1<<(H=U))-1,p===1&&852<mt||p===2&&592<mt)return 1;for(;;){for(V=F-ct,Z=S[$]<N?(j=0,S[$]):S[$]>N?(j=_t[At+S[$]],L[J+S[$]]):(j=96,0),x=1<<F-ct,k=C=1<<H;A[B+(M>>ct)+(C-=x)]=V<<24|j<<16|Z|0,C!==0;);for(x=1<<F-1;M&x;)x>>=1;if(x!==0?(M&=x-1,M+=x):M=0,$++,--it[F]==0){if(F===tt)break;F=m[b+S[$]]}if(U<F&&(M&O)!==R){for(ct===0&&(ct=U),B+=k,st=1<<(H=F-ct);H+ct<tt&&!((st-=it[H+ct])<=0);)H++,st<<=1;if(mt+=1<<H,p===1&&852<mt||p===2&&592<mt)return 1;A[R=M&O]=U<<24|H<<16|B-_|0}}return M!==0&&(A[B+M]=F-ct<<24|64<<16|0),w.bits=U,0}},{"../utils/common":41}],51:[function(e,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,r){var o=e("../utils/common"),c=0,u=1;function d(z){for(var X=z.length;0<=--X;)z[X]=0}var f=0,p=29,m=256,b=m+1+p,v=30,A=19,_=2*b+1,S=15,w=16,x=7,C=256,R=16,O=17,B=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],at=new Array(2*(b+2));d(at);var F=new Array(2*v);d(F);var $=new Array(512);d($);var k=new Array(256);d(k);var tt=new Array(p);d(tt);var U,H,ct,st=new Array(v);function mt(z,X,dt,ft,W){this.static_tree=z,this.extra_bits=X,this.extra_base=dt,this.elems=ft,this.max_length=W,this.has_stree=z&&z.length}function M(z,X){this.dyn_tree=z,this.max_code=0,this.stat_desc=X}function L(z){return z<256?$[z]:$[256+(z>>>7)]}function J(z,X){z.pending_buf[z.pending++]=255&X,z.pending_buf[z.pending++]=X>>>8&255}function it(z,X,dt){z.bi_valid>w-dt?(z.bi_buf|=X<<z.bi_valid&65535,J(z,z.bi_buf),z.bi_buf=X>>w-z.bi_valid,z.bi_valid+=dt-w):(z.bi_buf|=X<<z.bi_valid&65535,z.bi_valid+=dt)}function rt(z,X,dt){it(z,dt[2*X],dt[2*X+1])}function _t(z,X){for(var dt=0;dt|=1&z,z>>>=1,dt<<=1,0<--X;);return dt>>>1}function At(z,X,dt){var ft,W,pt=new Array(S+1),yt=0;for(ft=1;ft<=S;ft++)pt[ft]=yt=yt+dt[ft-1]<<1;for(W=0;W<=X;W++){var gt=z[2*W+1];gt!==0&&(z[2*W]=_t(pt[gt]++,gt))}}function Dt(z){var X;for(X=0;X<b;X++)z.dyn_ltree[2*X]=0;for(X=0;X<v;X++)z.dyn_dtree[2*X]=0;for(X=0;X<A;X++)z.bl_tree[2*X]=0;z.dyn_ltree[2*C]=1,z.opt_len=z.static_len=0,z.last_lit=z.matches=0}function xt(z){8<z.bi_valid?J(z,z.bi_buf):0<z.bi_valid&&(z.pending_buf[z.pending++]=z.bi_buf),z.bi_buf=0,z.bi_valid=0}function ve(z,X,dt,ft){var W=2*X,pt=2*dt;return z[W]<z[pt]||z[W]===z[pt]&&ft[X]<=ft[dt]}function le(z,X,dt){for(var ft=z.heap[dt],W=dt<<1;W<=z.heap_len&&(W<z.heap_len&&ve(X,z.heap[W+1],z.heap[W],z.depth)&&W++,!ve(X,ft,z.heap[W],z.depth));)z.heap[dt]=z.heap[W],dt=W,W<<=1;z.heap[dt]=ft}function oi(z,X,dt){var ft,W,pt,yt,gt=0;if(z.last_lit!==0)for(;ft=z.pending_buf[z.d_buf+2*gt]<<8|z.pending_buf[z.d_buf+2*gt+1],W=z.pending_buf[z.l_buf+gt],gt++,ft===0?rt(z,W,X):(rt(z,(pt=k[W])+m+1,X),(yt=N[pt])!==0&&it(z,W-=tt[pt],yt),rt(z,pt=L(--ft),dt),(yt=V[pt])!==0&&it(z,ft-=st[pt],yt)),gt<z.last_lit;);rt(z,C,X)}function yi(z,X){var dt,ft,W,pt=X.dyn_tree,yt=X.stat_desc.static_tree,gt=X.stat_desc.has_stree,Ot=X.stat_desc.elems,ce=-1;for(z.heap_len=0,z.heap_max=_,dt=0;dt<Ot;dt++)pt[2*dt]!==0?(z.heap[++z.heap_len]=ce=dt,z.depth[dt]=0):pt[2*dt+1]=0;for(;z.heap_len<2;)pt[2*(W=z.heap[++z.heap_len]=ce<2?++ce:0)]=1,z.depth[W]=0,z.opt_len--,gt&&(z.static_len-=yt[2*W+1]);for(X.max_code=ce,dt=z.heap_len>>1;1<=dt;dt--)le(z,pt,dt);for(W=Ot;dt=z.heap[1],z.heap[1]=z.heap[z.heap_len--],le(z,pt,1),ft=z.heap[1],z.heap[--z.heap_max]=dt,z.heap[--z.heap_max]=ft,pt[2*W]=pt[2*dt]+pt[2*ft],z.depth[W]=(z.depth[dt]>=z.depth[ft]?z.depth[dt]:z.depth[ft])+1,pt[2*dt+1]=pt[2*ft+1]=W,z.heap[1]=W++,le(z,pt,1),2<=z.heap_len;);z.heap[--z.heap_max]=z.heap[1],(function(Gt,Li){var Us,gn,Sa,ye,li,mn,De=Li.dyn_tree,bc=Li.max_code,Vh=Li.stat_desc.static_tree,Xh=Li.stat_desc.has_stree,hr=Li.stat_desc.extra_bits,Ea=Li.stat_desc.extra_base,Yn=Li.stat_desc.max_length,yn=0;for(ye=0;ye<=S;ye++)Gt.bl_count[ye]=0;for(De[2*Gt.heap[Gt.heap_max]+1]=0,Us=Gt.heap_max+1;Us<_;Us++)Yn<(ye=De[2*De[2*(gn=Gt.heap[Us])+1]+1]+1)&&(ye=Yn,yn++),De[2*gn+1]=ye,bc<gn||(Gt.bl_count[ye]++,li=0,Ea<=gn&&(li=hr[gn-Ea]),mn=De[2*gn],Gt.opt_len+=mn*(ye+li),Xh&&(Gt.static_len+=mn*(Vh[2*gn+1]+li)));if(yn!==0){do{for(ye=Yn-1;Gt.bl_count[ye]===0;)ye--;Gt.bl_count[ye]--,Gt.bl_count[ye+1]+=2,Gt.bl_count[Yn]--,yn-=2}while(0<yn);for(ye=Yn;ye!==0;ye--)for(gn=Gt.bl_count[ye];gn!==0;)bc<(Sa=Gt.heap[--Us])||(De[2*Sa+1]!==ye&&(Gt.opt_len+=(ye-De[2*Sa+1])*De[2*Sa],De[2*Sa+1]=ye),gn--)}})(z,X),At(pt,ce,z.bl_count)}function T(z,X,dt){var ft,W,pt=-1,yt=X[1],gt=0,Ot=7,ce=4;for(yt===0&&(Ot=138,ce=3),X[2*(dt+1)+1]=65535,ft=0;ft<=dt;ft++)W=yt,yt=X[2*(ft+1)+1],++gt<Ot&&W===yt||(gt<ce?z.bl_tree[2*W]+=gt:W!==0?(W!==pt&&z.bl_tree[2*W]++,z.bl_tree[2*R]++):gt<=10?z.bl_tree[2*O]++:z.bl_tree[2*B]++,pt=W,ce=(gt=0)===yt?(Ot=138,3):W===yt?(Ot=6,3):(Ot=7,4))}function ut(z,X,dt){var ft,W,pt=-1,yt=X[1],gt=0,Ot=7,ce=4;for(yt===0&&(Ot=138,ce=3),ft=0;ft<=dt;ft++)if(W=yt,yt=X[2*(ft+1)+1],!(++gt<Ot&&W===yt)){if(gt<ce)for(;rt(z,W,z.bl_tree),--gt!=0;);else W!==0?(W!==pt&&(rt(z,W,z.bl_tree),gt--),rt(z,R,z.bl_tree),it(z,gt-3,2)):gt<=10?(rt(z,O,z.bl_tree),it(z,gt-3,3)):(rt(z,B,z.bl_tree),it(z,gt-11,7));pt=W,ce=(gt=0)===yt?(Ot=138,3):W===yt?(Ot=6,3):(Ot=7,4)}}d(st);var nt=!1;function P(z,X,dt,ft){it(z,(f<<1)+(ft?1:0),3),(function(W,pt,yt,gt){xt(W),J(W,yt),J(W,~yt),o.arraySet(W.pending_buf,W.window,pt,yt,W.pending),W.pending+=yt})(z,X,dt)}r._tr_init=function(z){nt||((function(){var X,dt,ft,W,pt,yt=new Array(S+1);for(W=ft=0;W<p-1;W++)for(tt[W]=ft,X=0;X<1<<N[W];X++)k[ft++]=W;for(k[ft-1]=W,W=pt=0;W<16;W++)for(st[W]=pt,X=0;X<1<<V[W];X++)$[pt++]=W;for(pt>>=7;W<v;W++)for(st[W]=pt<<7,X=0;X<1<<V[W]-7;X++)$[256+pt++]=W;for(dt=0;dt<=S;dt++)yt[dt]=0;for(X=0;X<=143;)at[2*X+1]=8,X++,yt[8]++;for(;X<=255;)at[2*X+1]=9,X++,yt[9]++;for(;X<=279;)at[2*X+1]=7,X++,yt[7]++;for(;X<=287;)at[2*X+1]=8,X++,yt[8]++;for(At(at,b+1,yt),X=0;X<v;X++)F[2*X+1]=5,F[2*X]=_t(X,5);U=new mt(at,N,m+1,b,S),H=new mt(F,V,0,v,S),ct=new mt(new Array(0),j,0,A,x)})(),nt=!0),z.l_desc=new M(z.dyn_ltree,U),z.d_desc=new M(z.dyn_dtree,H),z.bl_desc=new M(z.bl_tree,ct),z.bi_buf=0,z.bi_valid=0,Dt(z)},r._tr_stored_block=P,r._tr_flush_block=function(z,X,dt,ft){var W,pt,yt=0;0<z.level?(z.strm.data_type===2&&(z.strm.data_type=(function(gt){var Ot,ce=4093624447;for(Ot=0;Ot<=31;Ot++,ce>>>=1)if(1&ce&&gt.dyn_ltree[2*Ot]!==0)return c;if(gt.dyn_ltree[18]!==0||gt.dyn_ltree[20]!==0||gt.dyn_ltree[26]!==0)return u;for(Ot=32;Ot<m;Ot++)if(gt.dyn_ltree[2*Ot]!==0)return u;return c})(z)),yi(z,z.l_desc),yi(z,z.d_desc),yt=(function(gt){var Ot;for(T(gt,gt.dyn_ltree,gt.l_desc.max_code),T(gt,gt.dyn_dtree,gt.d_desc.max_code),yi(gt,gt.bl_desc),Ot=A-1;3<=Ot&&gt.bl_tree[2*Z[Ot]+1]===0;Ot--);return gt.opt_len+=3*(Ot+1)+5+5+4,Ot})(z),W=z.opt_len+3+7>>>3,(pt=z.static_len+3+7>>>3)<=W&&(W=pt)):W=pt=dt+5,dt+4<=W&&X!==-1?P(z,X,dt,ft):z.strategy===4||pt===W?(it(z,2+(ft?1:0),3),oi(z,at,F)):(it(z,4+(ft?1:0),3),(function(gt,Ot,ce,Gt){var Li;for(it(gt,Ot-257,5),it(gt,ce-1,5),it(gt,Gt-4,4),Li=0;Li<Gt;Li++)it(gt,gt.bl_tree[2*Z[Li]+1],3);ut(gt,gt.dyn_ltree,Ot-1),ut(gt,gt.dyn_dtree,ce-1)})(z,z.l_desc.max_code+1,z.d_desc.max_code+1,yt+1),oi(z,z.dyn_ltree,z.dyn_dtree)),Dt(z),ft&&xt(z)},r._tr_tally=function(z,X,dt){return z.pending_buf[z.d_buf+2*z.last_lit]=X>>>8&255,z.pending_buf[z.d_buf+2*z.last_lit+1]=255&X,z.pending_buf[z.l_buf+z.last_lit]=255&dt,z.last_lit++,X===0?z.dyn_ltree[2*dt]++:(z.matches++,X--,z.dyn_ltree[2*(k[dt]+m+1)]++,z.dyn_dtree[2*L(X)]++),z.last_lit===z.lit_bufsize-1},r._tr_align=function(z){it(z,2,3),rt(z,C,at),(function(X){X.bi_valid===16?(J(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):8<=X.bi_valid&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)})(z)}},{"../utils/common":41}],53:[function(e,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(o){(function(c,u){if(!c.setImmediate){var d,f,p,m,b=1,v={},A=!1,_=c.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(c);S=S&&S.setTimeout?S:c,d={}.toString.call(c.process)==="[object process]"?function(R){process.nextTick(function(){x(R)})}:(function(){if(c.postMessage&&!c.importScripts){var R=!0,O=c.onmessage;return c.onmessage=function(){R=!1},c.postMessage("","*"),c.onmessage=O,R}})()?(m="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",C,!1):c.attachEvent("onmessage",C),function(R){c.postMessage(m+R,"*")}):c.MessageChannel?((p=new MessageChannel).port1.onmessage=function(R){x(R.data)},function(R){p.port2.postMessage(R)}):_&&"onreadystatechange"in _.createElement("script")?(f=_.documentElement,function(R){var O=_.createElement("script");O.onreadystatechange=function(){x(R),O.onreadystatechange=null,f.removeChild(O),O=null},f.appendChild(O)}):function(R){setTimeout(x,0,R)},S.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var O=new Array(arguments.length-1),B=0;B<O.length;B++)O[B]=arguments[B+1];var N={callback:R,args:O};return v[b]=N,d(b),b++},S.clearImmediate=w}function w(R){delete v[R]}function x(R){if(A)setTimeout(x,0,R);else{var O=v[R];if(O){A=!0;try{(function(B){var N=B.callback,V=B.args;switch(V.length){case 0:N();break;case 1:N(V[0]);break;case 2:N(V[0],V[1]);break;case 3:N(V[0],V[1],V[2]);break;default:N.apply(u,V)}})(O)}finally{w(R),A=!1}}}}function C(R){R.source===c&&typeof R.data=="string"&&R.data.indexOf(m)===0&&x(+R.data.slice(m.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Ru<"u"?Ru:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Dp)),Dp.exports}var rx=ax();const ox=aw(rx);ho.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${P_}/pdf.worker.min.js`;async function lx(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=r=>{t([{dataUrl:r.target.result,filename:s.name,type:s.type}])},n.onerror=e,n.readAsDataURL(s)})}async function cx(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=r=>{let o=r.target.result;o.startsWith("data:")||(o=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(o)))}`),t([{dataUrl:o,filename:s.name,type:"image/svg+xml"}])},n.onerror=e,n.readAsText(s)})}async function ux(s,t){const e=[];try{const n=await s.arrayBuffer(),r=await N_({data:n}).promise,o=r.numPages;for(let c=1;c<=o;c++){t&&t(c,o);const u=await r.getPage(c),f=u.getViewport({scale:2}),p=document.createElement("canvas");p.width=f.width,p.height=f.height;const m=p.getContext("2d");await u.render({canvasContext:m,viewport:f}).promise;const b=p.toDataURL("image/png");e.push({dataUrl:b,filename:`${s.name} - Page ${c}`,type:"image/png"})}return e}catch(n){throw console.error("PDF processing error:",n),new Error(`Failed to process PDF: ${n.message}`)}}async function hx(s){const t=[];try{const e=await s.arrayBuffer(),n=await ox.loadAsync(e),r=[];n.forEach((o,c)=>{o.startsWith("ppt/media/")&&!c.dir&&r.push({path:o,entry:c})}),r.sort((o,c)=>{const u=parseInt(o.path.match(/(\d+)/)?.[1]||"0"),d=parseInt(c.path.match(/(\d+)/)?.[1]||"0");return u-d});for(const{path:o,entry:c}of r){const u=await c.async("blob"),d=o.split(".").pop().toLowerCase(),f=dx(d),p=await fx(u);t.push({dataUrl:p,filename:o.split("/").pop(),type:f})}if(t.length===0)throw new Error("No images found in PPTX file");return t}catch(e){throw console.error("PPTX processing error:",e),new Error(`Failed to process PPTX: ${e.message}`)}}function dx(s){return{png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",svg:"image/svg+xml",webp:"image/webp"}[s]||"image/png"}function fx(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=e,n.readAsDataURL(s)})}async function px(s,t){const e=s.name.split(".").pop().toLowerCase();if(["png","jpg","jpeg","gif","bmp","webp"].includes(e))return lx(s);if(e==="svg")return cx(s);if(e==="pdf")return ux(s,t);if(e==="pptx")return hx(s);throw new Error(`Unsupported file type: ${e}`)}function gx({onSlidesAdded:s}){const[t,e]=Ce.useState(!1),[n,r]=Ce.useState(!1),[o,c]=Ce.useState({current:0,total:0}),u=Ce.useCallback(async b=>{r(!0),c({current:0,total:b.length});const v=[];for(let A=0;A<b.length;A++){const _=b[A];c({current:A+1,total:b.length});try{const S=await px(_,(w,x)=>{c({current:w,total:x,isPdf:!0})});v.push(...S)}catch(S){console.error(`Failed to process ${_.name}:`,S),alert(`Failed to process ${_.name}: ${S.message}`)}}v.length>0&&s(v),r(!1),c({current:0,total:0})},[s]),d=b=>{b.preventDefault(),e(!0)},f=b=>{b.preventDefault(),e(!1)},p=b=>{b.preventDefault(),e(!1);const v=Array.from(b.dataTransfer.files);v.length>0&&u(v)},m=b=>{const v=Array.from(b.target.files);v.length>0&&u(v),b.target.value=""};return bt.jsxs("div",{className:"file-upload-container",children:[bt.jsx("div",{className:`file-upload-zone ${t?"dragging":""}`,onDragOver:d,onDragLeave:f,onDrop:p,children:n?bt.jsxs("div",{className:"upload-progress",children:[bt.jsx("div",{className:"spinner"}),bt.jsx("p",{children:o.isPdf?`Processing PDF: Page ${o.current} of ${o.total}`:`Processing file ${o.current} of ${o.total}`})]}):bt.jsxs(bt.Fragment,{children:[bt.jsx("div",{className:"upload-icon",children:""}),bt.jsx("p",{className:"upload-text",children:"Drag & drop files here"}),bt.jsx("p",{className:"upload-subtext",children:"or click to browse"}),bt.jsx("input",{type:"file",multiple:!0,accept:".png,.jpg,.jpeg,.gif,.svg,.pdf,.pptx",onChange:m,className:"file-input"})]})}),bt.jsx("div",{className:"supported-formats",children:bt.jsx("span",{children:"Supported: PNG, JPG, GIF, SVG, PDF, PPTX"})})]})}function mx({slides:s,onAddSlides:t,onRemoveSlide:e,onClearAll:n,onClose:r}){const[o,c]=Ce.useState(!1),u=()=>{window.confirm("Are you sure you want to start a new session? All slides will be removed.")&&(n(),c(!0))};return bt.jsx("div",{className:"slide-manager-overlay",children:bt.jsxs("div",{className:"slide-manager",children:[bt.jsxs("div",{className:"slide-manager-header",children:[bt.jsx("h2",{children:"Slide Manager"}),bt.jsx("button",{className:"close-btn",onClick:r,children:""})]}),bt.jsxs("div",{className:"slide-manager-actions",children:[bt.jsx("button",{className:"action-btn upload-btn",onClick:()=>c(!o),children:o?"Hide Upload":" Upload Slides"}),bt.jsx("button",{className:"action-btn clear-btn",onClick:u,children:" New Session"})]}),o&&bt.jsx(gx,{onSlidesAdded:d=>{t(d),c(!1)}}),bt.jsxs("div",{className:"slides-grid-container",children:[bt.jsxs("p",{className:"slides-count",children:[s.length," slide",s.length!==1?"s":""]}),s.length===0?bt.jsx("div",{className:"no-slides",children:bt.jsx("p",{children:"No slides yet. Upload some files to get started!"})}):bt.jsx("div",{className:"slides-grid",children:s.map((d,f)=>bt.jsxs("div",{className:"slide-thumbnail-wrapper",children:[bt.jsx("div",{className:"slide-number",children:f+1}),bt.jsx("img",{src:d.dataUrl,alt:d.filename,className:"slide-thumbnail"}),bt.jsx("button",{className:"remove-slide-btn",onClick:()=>e(d.id),title:"Remove slide",children:""}),bt.jsx("p",{className:"slide-filename",title:d.filename,children:d.filename})]},d.id))})]}),bt.jsx("div",{className:"slide-manager-footer",children:bt.jsx("button",{className:"done-btn",onClick:r,children:"Done"})})]})})}function yx(){const{slides:s,addSlides:t,removeSlide:e,clearAllSlides:n}=oE(),[r,o]=Ce.useState(0),[c,u]=Ce.useState(!1),d=Ce.useRef(null),f=iE(d),p=Ce.useRef(0),m=Ce.useRef(null);Ce.useEffect(()=>{let A=null;async function _(){try{A=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480}}),d.current&&(d.current.srcObject=A,console.log("Webcam initialized"))}catch(S){console.error("Failed to access webcam:",S)}}return _(),()=>{A&&A.getTracks().forEach(S=>S.stop())}},[]);const b=Ce.useCallback((A,_)=>{const S=Date.now();S-p.current<300||(p.current=S,o(A==="next"?w=>w<_-1?w+1:w:w=>w>0?w-1:w))},[]);Ce.useEffect(()=>{if(!f||s.length===0)return;f==="Open_Palm"?m.current=()=>b("next",s.length):f==="Victory"&&(m.current=()=>b("prev",s.length));const A=setTimeout(()=>{m.current&&(m.current(),m.current=null)},0);return()=>clearTimeout(A)},[f,b,s.length]),Ce.useEffect(()=>{function A(_){s.length!==0&&(_.key==="ArrowRight"||_.key===" "?(_.preventDefault(),b("next",s.length)):_.key==="ArrowLeft"&&(_.preventDefault(),b("prev",s.length)))}return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[s.length,b]);const v=s.length>0?Math.min(r,s.length-1):0;return bt.jsxs("div",{className:"app-container",children:[bt.jsx("div",{className:"slide-area",children:s.length===0?bt.jsx("div",{className:"no-slides-display",children:bt.jsxs("div",{className:"no-slides-content",children:[bt.jsx("h2",{children:"No Slides"}),bt.jsx("p",{children:"Upload slides to start presenting"}),bt.jsx("button",{className:"upload-slides-btn",onClick:()=>u(!0),children:"Upload Slides"})]})}):bt.jsxs(bt.Fragment,{children:[bt.jsx("img",{className:"slide-img",src:s[v].dataUrl,alt:`Slide ${v+1}`}),bt.jsx("div",{className:"gesture-overlay",children:bt.jsx("span",{children:f||"Show hand gesture"})}),bt.jsxs("div",{className:"slide-counter",children:[v+1," / ",s.length]}),bt.jsx("button",{className:"nav-arrow nav-prev",onClick:()=>b("prev",s.length),disabled:v===0,"aria-label":"Previous slide",children:""}),bt.jsx("button",{className:"nav-arrow nav-next",onClick:()=>b("next",s.length),disabled:v===s.length-1,"aria-label":"Next slide",children:""})]})}),bt.jsxs("div",{className:"sidebar",children:[bt.jsxs("div",{className:"sidebar-title",children:[bt.jsx("h2",{children:"Spatial Presenter"}),bt.jsx("p",{children:"Control slides with hand gestures"})]}),bt.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,className:"webcam-preview"}),bt.jsxs("div",{className:"info-card",children:[bt.jsx("h3",{children:"Current Gesture"}),bt.jsx("p",{className:`gesture-value ${f?"active":"inactive"}`,children:f||"None detected"})]}),bt.jsxs("div",{className:"info-card",children:[bt.jsx("h3",{children:"Gestures"}),bt.jsxs("div",{className:"guide-rows",children:[bt.jsx("div",{children:"Open Palm - Next"}),bt.jsx("div",{children:"Victory/Peace - Back"})]})]}),bt.jsxs("div",{className:"info-card",children:[bt.jsx("h3",{children:"Keyboard"}),bt.jsxs("div",{className:"guide-rows",children:[bt.jsx("div",{children:"Arrow Right/Space - Next"}),bt.jsx("div",{children:"Arrow Left - Previous"})]})]}),bt.jsx("button",{className:"manage-slides-btn",onClick:()=>u(!0),children:"Manage Slides"})]}),c&&bt.jsx(mx,{slides:s,onAddSlides:t,onRemoveSlide:e,onClearAll:n,onClose:()=>u(!1)})]})}gw.createRoot(document.getElementById("root")).render(bt.jsx(Ce.StrictMode,{children:bt.jsx(yx,{})}));
